function StringStream(a){this.pos=this.start=0,this.fstream=a,this.string=this.fstream.line()}function FileStream(a,b){this.line_number=0,this.file=b,this.lines=a.split("\n")}!function(a,b){function c(a){var b=a.length,c=fa.type(a);return fa.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=oa[a]={};return fa.each(a.match(ha)||[],function(a,c){b[c]=!0}),b}function e(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=fa.expando+Math.random()}function f(a,c,d){var e;if(d===b&&1===a.nodeType)if(e="data-"+c.replace(sa,"-$1").toLowerCase(),d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:ra.test(d)?JSON.parse(d):d}catch(f){}pa.set(a,c,d)}else d=b;return d}function g(){return!0}function h(){return!1}function i(){try{return T.activeElement}catch(a){}}function j(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function k(a,b,c){if(fa.isFunction(b))return fa.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return fa.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Ca.test(b))return fa.filter(b,a,c);b=fa.filter(b,a)}return fa.grep(a,function(a){return ba.call(b,a)>=0!==c})}function l(a,b){return fa.nodeName(a,"table")&&fa.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function m(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function n(a){var b=Na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function o(a,b){for(var c=a.length,d=0;c>d;d++)qa.set(a[d],"globalEval",!b||qa.get(b[d],"globalEval"))}function p(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(qa.hasData(a)&&(f=qa.access(a),g=qa.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)fa.event.add(b,e,j[e][c])}pa.hasData(a)&&(h=pa.access(a),i=fa.extend({},h),pa.set(b,i))}}function q(a,c){var d=a.getElementsByTagName?a.getElementsByTagName(c||"*"):a.querySelectorAll?a.querySelectorAll(c||"*"):[];return c===b||c&&fa.nodeName(a,c)?fa.merge([a],d):d}function r(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ka.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function s(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=_a.length;e--;)if(b=_a[e]+c,b in a)return b;return d}function t(a,b){return a=b||a,"none"===fa.css(a,"display")||!fa.contains(a.ownerDocument,a)}function u(b){return a.getComputedStyle(b,null)}function v(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=qa.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&t(d)&&(f[g]=qa.access(d,"olddisplay",z(d.nodeName)))):f[g]||(e=t(d),(c&&"none"!==c||!e)&&qa.set(d,"olddisplay",e?c:fa.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function w(a,b,c){var d=Ua.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function x(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=fa.css(a,c+$a[f],!0,e)),d?("content"===c&&(g-=fa.css(a,"padding"+$a[f],!0,e)),"margin"!==c&&(g-=fa.css(a,"border"+$a[f]+"Width",!0,e))):(g+=fa.css(a,"padding"+$a[f],!0,e),"padding"!==c&&(g+=fa.css(a,"border"+$a[f]+"Width",!0,e)));return g}function y(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=u(a),g=fa.support.boxSizing&&"border-box"===fa.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Qa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Va.test(e))return e;d=g&&(fa.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+x(a,b,c||(g?"border":"content"),d,f)+"px"}function z(a){var b=T,c=Xa[a];return c||(c=A(a,b),"none"!==c&&c||(Ra=(Ra||fa("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(Ra[0].contentWindow||Ra[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=A(a,b),Ra.detach()),Xa[a]=c),c}function A(a,b){var c=fa(b.createElement(a)).appendTo(b.body),d=fa.css(c[0],"display");return c.remove(),d}function B(a,b,c,d){var e;if(fa.isArray(b))fa.each(b,function(b,e){c||bb.test(a)?d(a,e):B(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==fa.type(b))d(a,b);else for(e in b)B(a+"["+e+"]",b[e],c,d)}function C(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ha)||[];if(fa.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function D(a,b,c,d){function e(h){var i;return f[h]=!0,fa.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===sb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function E(a,c){var d,e,f=fa.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);return e&&fa.extend(!0,a,e),a}function F(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("Content-Type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function G(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function H(){return setTimeout(function(){Bb=b}),Bb=fa.now()}function I(a,b,c){for(var d,e=(Hb[b]||[]).concat(Hb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function J(a,b,c){var d,e,f=0,g=Gb.length,h=fa.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Bb||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:fa.extend({},b),opts:fa.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Bb||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=fa.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(K(k,j.opts.specialEasing);g>f;f++)if(d=Gb[f].call(j,a,k,j.opts))return d;return fa.map(k,I,j),fa.isFunction(j.opts.start)&&j.opts.start.call(a,j),fa.fx.timer(fa.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function K(a,b){var c,d,e,f,g;for(c in a)if(d=fa.camelCase(c),e=b[d],f=a[c],fa.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=fa.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function L(a,c,d){var e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&t(a),o=qa.get(a,"fxshow");d.queue||(i=fa._queueHooks(a,"fx"),null==i.unqueued&&(i.unqueued=0,j=i.empty.fire,i.empty.fire=function(){i.unqueued||j()}),i.unqueued++,k.always(function(){k.always(function(){i.unqueued--,fa.queue(a,"fx").length||i.empty.fire()})})),1===a.nodeType&&("height"in c||"width"in c)&&(d.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===fa.css(a,"display")&&"none"===fa.css(a,"float")&&(m.display="inline-block")),d.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=d.overflow[0],m.overflowX=d.overflow[1],m.overflowY=d.overflow[2]}));for(e in c)if(f=c[e],Db.exec(f)){if(delete c[e],g=g||"toggle"===f,f===(n?"hide":"show")){if("show"!==f||!o||o[e]===b)continue;n=!0}l[e]=o&&o[e]||fa.style(a,e)}if(!fa.isEmptyObject(l)){o?"hidden"in o&&(n=o.hidden):o=qa.access(a,"fxshow",{}),g&&(o.hidden=!n),n?fa(a).show():k.done(function(){fa(a).hide()}),k.done(function(){var b;qa.remove(a,"fxshow");for(b in l)fa.style(a,b,l[b])});for(e in l)h=I(n?o[e]:0,e,k),e in o||(o[e]=h.start,n&&(h.end=h.start,h.start="width"===e||"height"===e?1:0))}}function M(a,b,c,d,e){return new M.prototype.init(a,b,c,d,e)}function N(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=$a[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function O(a){return fa.isWindow(a)?a:9===a.nodeType&&a.defaultView}var P,Q,R=typeof b,S=a.location,T=a.document,U=T.documentElement,V=a.jQuery,W=a.$,X={},Y=[],Z="2.0.2",$=Y.concat,_=Y.push,aa=Y.slice,ba=Y.indexOf,ca=X.toString,da=X.hasOwnProperty,ea=Z.trim,fa=function(a,b){return new fa.fn.init(a,b,P)},ga=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ha=/\S+/g,ia=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ja=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ka=/^-ms-/,la=/-([\da-z])/gi,ma=function(a,b){return b.toUpperCase()},na=function(){T.removeEventListener("DOMContentLoaded",na,!1),a.removeEventListener("load",na,!1),fa.ready()};fa.fn=fa.prototype={jquery:Z,constructor:fa,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:ia.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof fa?c[0]:c,fa.merge(this,fa.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:T,!0)),ja.test(e[1])&&fa.isPlainObject(c))for(e in c)fa.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}return f=T.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=T,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):fa.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),fa.makeArray(a,this))},selector:"",length:0,toArray:function(){return aa.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=fa.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return fa.each(this,a,b)},ready:function(a){return fa.ready.promise().done(a),this},slice:function(){return this.pushStack(aa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(fa.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:_,sort:[].sort,splice:[].splice},fa.fn.init.prototype=fa.fn,fa.extend=fa.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||fa.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&(fa.isPlainObject(e)||(f=fa.isArray(e)))?(f?(f=!1,g=d&&fa.isArray(d)?d:[]):g=d&&fa.isPlainObject(d)?d:{},h[c]=fa.extend(k,g,e)):e!==b&&(h[c]=e));return h},fa.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===fa&&(a.$=W),b&&a.jQuery===fa&&(a.jQuery=V),fa},isReady:!1,readyWait:1,holdReady:function(a){a?fa.readyWait++:fa.ready(!0)},ready:function(a){(a===!0?--fa.readyWait:fa.isReady)||(fa.isReady=!0,a!==!0&&--fa.readyWait>0||(Q.resolveWith(T,[fa]),fa.fn.trigger&&fa(T).trigger("ready").off("ready")))},isFunction:function(a){return"function"===fa.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?X[ca.call(a)]||"object":typeof a},isPlainObject:function(a){if("object"!==fa.type(a)||a.nodeType||fa.isWindow(a))return!1;try{if(a.constructor&&!da.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||T;var d=ja.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=fa.buildFragment([a],b,e),e&&fa(e).remove(),fa.merge([],d.childNodes))},parseJSON:JSON.parse,parseXML:function(a){var c,d;if(!a||"string"!=typeof a)return null;try{d=new DOMParser,c=d.parseFromString(a,"text/xml")}catch(e){c=b}return(!c||c.getElementsByTagName("parsererror").length)&&fa.error("Invalid XML: "+a),c},noop:function(){},globalEval:function(a){var b,c=eval;a=fa.trim(a),a&&(1===a.indexOf("use strict")?(b=T.createElement("script"),b.text=a,T.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ka,"ms-").replace(la,ma)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":ea.call(a)},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?fa.merge(d,"string"==typeof a?[a]:a):_.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:ba.call(b,a,c)},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return $.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),fa.isFunction(a)?(e=aa.call(arguments,2),f=function(){return a.apply(c||this,e.concat(aa.call(arguments)))},f.guid=a.guid=a.guid||fa.guid++,f):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===fa.type(d)){f=!0;for(i in d)fa.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,fa.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(fa(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:Date.now,swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),fa.ready.promise=function(b){return Q||(Q=fa.Deferred(),"complete"===T.readyState?setTimeout(fa.ready):(T.addEventListener("DOMContentLoaded",na,!1),a.addEventListener("load",na,!1))),Q.promise(b)},fa.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){X["[object "+b+"]"]=b.toLowerCase()}),P=fa(T),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;if((b?b.ownerDocument||b:S)!==K&&J(b),b=b||K,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(M&&!d){if(e=xa.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&Q(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return ea.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&B.getElementsByClassName&&b.getElementsByClassName)return ea.apply(c,b.getElementsByClassName(g)),c}if(B.qsa&&(!N||!N.test(a))){if(l=k=R,m=b,n=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=p(a),(k=b.getAttribute("id"))?l=k.replace(Aa,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+q(j[i]);m=ra.test(a)&&b.parentNode||b,n=j.join(",")}if(n)try{return ea.apply(c,m.querySelectorAll(n)),c}catch(o){}finally{k||b.removeAttribute("id")}}}return y(a.replace(oa,"$1"),b,c,d)}function d(a){return wa.test(a+"")}function e(){function a(c,d){return b.push(c+=" ")>D.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function f(a){return a[R]=!0,a}function g(a){var b=K.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function h(a,b,c){a=a.split("|");for(var d,e=a.length,f=c?null:b;e--;)(d=D.attrHandle[a[e]])&&d!==b||(D.attrHandle[a[e]]=f)}function i(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:a[b]===!0?b.toLowerCase():null}function j(a,b){return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}function k(a){return"input"===a.nodeName.toLowerCase()?a.defaultValue:void 0}function l(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||_)-(~a.sourceIndex||_);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function m(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function n(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function o(a){return f(function(b){return b=+b,f(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function p(a,b){var d,e,f,g,h,i,j,k=W[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=D.preFilter;h;){(!d||(e=pa.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=qa.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(oa," ")}),h=h.slice(d.length));for(g in D.filter)!(e=va[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):W(a,i).slice(0)}function q(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function r(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=U++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=T+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[R]||(b[R]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===C)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||C,i[1]===!0)return!0}}function s(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function t(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function u(a,b,c,d,e,g){return d&&!d[R]&&(d=u(d)),e&&!e[R]&&(e=u(e,g)),f(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||x(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:t(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=t(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?ha.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=t(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):ea.apply(g,r)})}function v(a){for(var b,c,d,e=a.length,f=D.relative[a[0].type],g=f||D.relative[" "],h=f?1:0,i=r(function(a){return a===b},g,!0),j=r(function(a){return ha.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==H)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=D.relative[a[h].type])k=[r(s(k),c)];else{if(c=D.filter[a[h].type].apply(null,a[h].matches),c[R]){for(d=++h;e>d&&!D.relative[a[d].type];d++);return u(h>1&&s(k),h>1&&q(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(oa,"$1"),c,d>h&&v(a.slice(h,d)),e>d&&v(a=a.slice(d)),e>d&&q(a))}k.push(c)}return s(k)}function w(a,b){var d=0,e=b.length>0,g=a.length>0,h=function(f,h,i,j,k){var l,m,n,o=[],p=0,q="0",r=f&&[],s=null!=k,u=H,v=f||g&&D.find.TAG("*",k&&h.parentNode||h),w=T+=null==u?1:Math.random()||.1;for(s&&(H=h!==K&&h,C=d);null!=(l=v[q]);q++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}s&&(T=w,C=++d)}e&&((l=!n&&l)&&p--,f&&r.push(l))}if(p+=q,e&&q!==p){for(m=0;n=b[m++];)n(r,o,h,i);if(f){if(p>0)for(;q--;)r[q]||o[q]||(o[q]=ca.call(j));o=t(o)}ea.apply(j,o),s&&!f&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return s&&(T=w,H=u),r};return e?f(h):h}function x(a,b,d){for(var e=0,f=b.length;f>e;e++)c(a,b[e],d);return d}function y(a,b,c,d){var e,f,g,h,i,j=p(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&B.getById&&9===b.nodeType&&M&&D.relative[f[1].type]){if(b=(D.find.ID(g.matches[0].replace(Ba,Ca),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=va.needsContext.test(a)?0:f.length;e--&&(g=f[e],!D.relative[h=g.type]);)if((i=D.find[h])&&(d=i(g.matches[0].replace(Ba,Ca),ra.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&q(f),!a)return ea.apply(c,d),c;break}}return G(a,j)(d,b,!M,c,ra.test(a)),c}function z(){}var A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R="sizzle"+-new Date,S=a.document,T=0,U=0,V=e(),W=e(),X=e(),Y=!1,Z=function(){return 0},$=typeof b,_=1<<31,aa={}.hasOwnProperty,ba=[],ca=ba.pop,da=ba.push,ea=ba.push,ga=ba.slice,ha=ba.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},ia="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ja="[\\x20\\t\\r\\n\\f]",ka="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",la=ka.replace("w","w#"),ma="\\["+ja+"*("+ka+")"+ja+"*(?:([*^$|!~]?=)"+ja+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+la+")|)|)"+ja+"*\\]",na=":("+ka+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ma.replace(3,8)+")*)|.*)\\)|)",oa=new RegExp("^"+ja+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ja+"+$","g"),pa=new RegExp("^"+ja+"*,"+ja+"*"),qa=new RegExp("^"+ja+"*([>+~]|"+ja+")"+ja+"*"),ra=new RegExp(ja+"*[+~]"),sa=new RegExp("="+ja+"*([^\\]'\"]*)"+ja+"*\\]","g"),ta=new RegExp(na),ua=new RegExp("^"+la+"$"),va={ID:new RegExp("^#("+ka+")"),CLASS:new RegExp("^\\.("+ka+")"),TAG:new RegExp("^("+ka.replace("w","w*")+")"),ATTR:new RegExp("^"+ma),PSEUDO:new RegExp("^"+na),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ja+"*(even|odd|(([+-]|)(\\d*)n|)"+ja+"*(?:([+-]|)"+ja+"*(\\d+)|))"+ja+"*\\)|)","i"),bool:new RegExp("^(?:"+ia+")$","i"),needsContext:new RegExp("^"+ja+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ja+"*((?:-\\d)?\\d*)"+ja+"*\\)|)(?=[^-]|$)","i")},wa=/^[^{]+\{\s*\[native \w/,xa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ya=/^(?:input|select|textarea|button)$/i,za=/^h\d$/i,Aa=/'|\\/g,Ba=new RegExp("\\\\([\\da-f]{1,6}"+ja+"?|("+ja+")|.)","ig"),Ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{ea.apply(ba=ga.call(S.childNodes),S.childNodes),ba[S.childNodes.length].nodeType}catch(Da){ea={apply:ba.length?function(a,b){da.apply(a,ga.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}F=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},B=c.support={},J=c.setDocument=function(a){var b=a?a.ownerDocument||a:S,c=b.parentWindow;return b!==K&&9===b.nodeType&&b.documentElement?(K=b,L=b.documentElement,M=!F(b),c&&c.frameElement&&c.attachEvent("onbeforeunload",function(){J()}),B.attributes=g(function(a){return a.innerHTML="<a href='#'></a>",h("type|href|height|width",j,"#"===a.firstChild.getAttribute("href")),h(ia,i,null==a.getAttribute("disabled")),a.className="i",!a.getAttribute("className")}),B.input=g(function(a){return a.innerHTML="<input>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")}),h("value",k,B.attributes&&B.input),B.getElementsByTagName=g(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),B.getElementsByClassName=g(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),B.getById=g(function(a){return L.appendChild(a).id=R,!b.getElementsByName||!b.getElementsByName(R).length}),B.getById?(D.find.ID=function(a,b){if(typeof b.getElementById!==$&&M){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},D.filter.ID=function(a){var b=a.replace(Ba,Ca);return function(a){return a.getAttribute("id")===b}}):(delete D.find.ID,D.filter.ID=function(a){var b=a.replace(Ba,Ca);return function(a){var c=typeof a.getAttributeNode!==$&&a.getAttributeNode("id");return c&&c.value===b}}),D.find.TAG=B.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==$?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},D.find.CLASS=B.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==$&&M?b.getElementsByClassName(a):void 0},O=[],N=[],(B.qsa=d(b.querySelectorAll))&&(g(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||N.push("\\["+ja+"*(?:value|"+ia+")"),a.querySelectorAll(":checked").length||N.push(":checked")}),g(function(a){var c=b.createElement("input");c.setAttribute("type","hidden"),a.appendChild(c).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&N.push("[*^$]="+ja+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),N.push(",.*:")})),(B.matchesSelector=d(P=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&g(function(a){B.disconnectedMatch=P.call(a,"div"),P.call(a,"[s!='']:x"),O.push("!=",na)}),N=N.length&&new RegExp(N.join("|")),O=O.length&&new RegExp(O.join("|")),Q=d(L.contains)||L.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B.sortDetached=g(function(a){return 1&a.compareDocumentPosition(b.createElement("div"))}),Z=L.compareDocumentPosition?function(a,c){if(a===c)return Y=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?1&d||!B.sortDetached&&c.compareDocumentPosition(a)===d?a===b||Q(S,a)?-1:c===b||Q(S,c)?1:I?ha.call(I,a)-ha.call(I,c):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0,f=a.parentNode,g=c.parentNode,h=[a],i=[c];if(a===c)return Y=!0,0;if(!f||!g)return a===b?-1:c===b?1:f?-1:g?1:I?ha.call(I,a)-ha.call(I,c):0;if(f===g)return l(a,c);for(d=a;d=d.parentNode;)h.unshift(d);for(d=c;d=d.parentNode;)i.unshift(d);for(;h[e]===i[e];)e++;return e?l(h[e],i[e]):h[e]===S?-1:i[e]===S?1:0},b):K},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==K&&J(a),b=b.replace(sa,"='$1']"),B.matchesSelector&&M&&(!O||!O.test(b))&&(!N||!N.test(b)))try{var d=P.call(a,b);if(d||B.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return c(b,K,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==K&&J(a),Q(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==K&&J(a);var d=D.attrHandle[c.toLowerCase()],e=d&&aa.call(D.attrHandle,c.toLowerCase())?d(a,c,!M):b;return e===b?B.attributes||!M?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(Y=!B.detectDuplicates,I=!B.sortStable&&a.slice(0),a.sort(Z),Y){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},E=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=E(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=E(b);return c},D=c.selectors={cacheLength:50,createPseudo:f,match:va,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(Ba,Ca),a[3]=(a[4]||a[5]||"").replace(Ba,Ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return va.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&ta.test(d)&&(c=p(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(Ba,Ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=V[a+" "];return b||(b=new RegExp("(^|"+ja+")"+a+"("+ja+"|$)"))&&V(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==$&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[R]||(q[R]={}),j=k[a]||[],n=j[0]===T&&j[1],m=j[0]===T&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[T,n,m];break}}else if(s&&(j=(b[R]||(b[R]={}))[a])&&j[0]===T)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[R]||(l[R]={}))[a]=[T,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var d,e=D.pseudos[a]||D.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[R]?e(b):e.length>1?(d=[a,a,"",b],D.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=ha.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:f(function(a){var b=[],c=[],d=G(a.replace(oa,"$1"));return d[R]?f(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:f(function(a){return function(b){return c(a,b).length>0}}),contains:f(function(a){return function(b){return(b.textContent||b.innerText||E(b)).indexOf(a)>-1}}),lang:f(function(a){return ua.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(Ba,Ca).toLowerCase(),function(b){var c;do if(c=M?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===L},focus:function(a){return a===K.activeElement&&(!K.hasFocus||K.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;
return!0},parent:function(a){return!D.pseudos.empty(a)},header:function(a){return za.test(a.nodeName)},input:function(a){return ya.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:o(function(){return[0]}),last:o(function(a,b){return[b-1]}),eq:o(function(a,b,c){return[0>c?c+b:c]}),even:o(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:o(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:o(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:o(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}};for(A in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[A]=m(A);for(A in{submit:!0,reset:!0})D.pseudos[A]=n(A);G=c.compile=function(a,b){var c,d=[],e=[],f=X[a+" "];if(!f){for(b||(b=p(a)),c=b.length;c--;)f=v(b[c]),f[R]?d.push(f):e.push(f);f=X(a,w(e,d))}return f},D.pseudos.nth=D.pseudos.eq,z.prototype=D.filters=D.pseudos,D.setFilters=new z,B.sortStable=R.split("").sort(Z).join("")===R,J(),[0,0].sort(Z),B.detectDuplicates=Y,fa.find=c,fa.expr=c.selectors,fa.expr[":"]=fa.expr.pseudos,fa.unique=c.uniqueSort,fa.text=c.getText,fa.isXMLDoc=c.isXML,fa.contains=c.contains}(a);var oa={};fa.Callbacks=function(a){a="string"==typeof a?oa[a]||d(a):fa.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(c=a.memory&&b,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&h>i;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):c?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){fa.each(b,function(b,c){var e=fa.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),f?h=j.length:c&&(g=b,l(c))}return this},remove:function(){return j&&fa.each(arguments,function(a,b){for(var c;(c=fa.inArray(b,j,c))>-1;)j.splice(c,1),f&&(h>=c&&h--,i>=c&&i--)}),this},has:function(a){return a?fa.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],h=0,this},disable:function(){return j=k=c=b,this},disabled:function(){return!j},lock:function(){return k=b,c||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||e&&!k||(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m},fa.extend({Deferred:function(a){var b=[["resolve","done",fa.Callbacks("once memory"),"resolved"],["reject","fail",fa.Callbacks("once memory"),"rejected"],["notify","progress",fa.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return fa.Deferred(function(c){fa.each(b,function(b,f){var g=f[0],h=fa.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&fa.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?fa.extend(a,d):d}},e={};return d.pipe=d.then,fa.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=aa.call(arguments),g=f.length,h=1!==g||a&&fa.isFunction(a.promise)?g:0,i=1===h?a:fa.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?aa.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&fa.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),fa.support=function(b){var c=T.createElement("input"),d=T.createDocumentFragment(),e=T.createElement("div"),f=T.createElement("select"),g=f.appendChild(T.createElement("option"));return c.type?(c.type="checkbox",b.checkOn=""!==c.value,b.optSelected=g.selected,b.reliableMarginRight=!0,b.boxSizingReliable=!0,b.pixelPosition=!1,c.checked=!0,b.noCloneChecked=c.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled,c=T.createElement("input"),c.value="t",c.type="radio",b.radioValue="t"===c.value,c.setAttribute("checked","t"),c.setAttribute("name","t"),d.appendChild(c),b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,b.focusinBubbles="onfocusin"in a,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===e.style.backgroundClip,fa(function(){var c,d,f="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",g=T.getElementsByTagName("body")[0];g&&(c=T.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(e),e.innerHTML="",e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",fa.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===e.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(e,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(e,null)||{width:"4px"}).width,d=e.appendChild(T.createElement("div")),d.style.cssText=e.style.cssText=f,d.style.marginRight=d.style.width="0",e.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),g.removeChild(c))}),b):b}({});var pa,qa,ra=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,sa=/([A-Z])/g;e.uid=1,e.accepts=function(a){return a.nodeType?1===a.nodeType||9===a.nodeType:!0},e.prototype={key:function(a){if(!e.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=e.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,fa.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(fa.isEmptyObject(f))fa.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,c){var d=this.cache[this.key(a)];return c===b?d:d[c]},access:function(a,c,d){return c===b||c&&"string"==typeof c&&d===b?this.get(a,c):(this.set(a,c,d),d!==b?d:c)},remove:function(a,c){var d,e,f,g=this.key(a),h=this.cache[g];if(c===b)this.cache[g]={};else{fa.isArray(c)?e=c.concat(c.map(fa.camelCase)):(f=fa.camelCase(c),c in h?e=[c,f]:(e=f,e=e in h?[e]:e.match(ha)||[])),d=e.length;for(;d--;)delete h[e[d]]}},hasData:function(a){return!fa.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}},pa=new e,qa=new e,fa.extend({acceptData:e.accepts,hasData:function(a){return pa.hasData(a)||qa.hasData(a)},data:function(a,b,c){return pa.access(a,b,c)},removeData:function(a,b){pa.remove(a,b)},_data:function(a,b,c){return qa.access(a,b,c)},_removeData:function(a,b){qa.remove(a,b)}}),fa.fn.extend({data:function(a,c){var d,e,g=this[0],h=0,i=null;if(a===b){if(this.length&&(i=pa.get(g),1===g.nodeType&&!qa.get(g,"hasDataAttrs"))){for(d=g.attributes;h<d.length;h++)e=d[h].name,0===e.indexOf("data-")&&(e=fa.camelCase(e.slice(5)),f(g,e,i[e]));qa.set(g,"hasDataAttrs",!0)}return i}return"object"==typeof a?this.each(function(){pa.set(this,a)}):fa.access(this,function(c){var d,e=fa.camelCase(a);if(g&&c===b){if(d=pa.get(g,a),d!==b)return d;if(d=pa.get(g,e),d!==b)return d;if(d=f(g,e,b),d!==b)return d}else this.each(function(){var d=pa.get(this,e);pa.set(this,e,c),-1!==a.indexOf("-")&&d!==b&&pa.set(this,a,c)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){pa.remove(this,a)})}}),fa.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=qa.get(a,b),c&&(!d||fa.isArray(c)?d=qa.access(a,b,fa.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=fa.queue(a,b),d=c.length,e=c.shift(),f=fa._queueHooks(a,b),g=function(){fa.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return qa.get(a,c)||qa.access(a,c,{empty:fa.Callbacks("once memory").add(function(){qa.remove(a,[b+"queue",c])})})}}),fa.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?fa.queue(this[0],a):c===b?this:this.each(function(){var b=fa.queue(this,a,c);fa._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&fa.dequeue(this,a)})},dequeue:function(a){return this.each(function(){fa.dequeue(this,a)})},delay:function(a,b){return a=fa.fx?fa.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=fa.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=qa.get(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var ta,ua,va=/[\t\r\n\f]/g,wa=/\r/g,xa=/^(?:input|select|textarea|button)$/i;fa.fn.extend({attr:function(a,b){return fa.access(this,fa.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){fa.removeAttr(this,a)})},prop:function(a,b){return fa.access(this,fa.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[fa.propFix[a]||a]})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(fa.isFunction(a))return this.each(function(b){fa(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ha)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(va," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=fa.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(fa.isFunction(a))return this.each(function(b){fa(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ha)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(va," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?fa.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return fa.isFunction(a)?this.each(function(c){fa(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=fa(this),h=b,i=a.match(ha)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else(c===R||"boolean"===c)&&(this.className&&qa.set(this,"__className__",this.className),this.className=this.className||a===!1?"":qa.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(va," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=fa.isFunction(a),this.each(function(d){var f;1===this.nodeType&&(f=e?a.call(this,d,fa(this).val()):a,null==f?f="":"number"==typeof f?f+="":fa.isArray(f)&&(f=fa.map(f,function(a){return null==a?"":a+""})),c=fa.valHooks[this.type]||fa.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=fa.valHooks[f.type]||fa.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(wa,""):null==d?"":d)}}}),fa.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(fa.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!fa.nodeName(c.parentNode,"optgroup"))){if(b=fa(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=fa.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=fa.inArray(fa(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,c,d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return typeof a.getAttribute===R?fa.prop(a,c,d):(1===g&&fa.isXMLDoc(a)||(c=c.toLowerCase(),e=fa.attrHooks[c]||(fa.expr.match.bool.test(c)?ua:ta)),d===b?e&&"get"in e&&null!==(f=e.get(a,c))?f:(f=fa.find.attr(a,c),null==f?b:f):null!==d?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):void fa.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ha);if(f&&1===a.nodeType)for(;c=f[e++];)d=fa.propFix[c]||c,fa.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!fa.support.radioValue&&"radio"===b&&fa.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!fa.isXMLDoc(a),g&&(c=fa.propFix[c]||c,f=fa.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||xa.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),ua={set:function(a,b,c){return b===!1?fa.removeAttr(a,c):a.setAttribute(c,c),c}},fa.each(fa.expr.match.bool.source.match(/\w+/g),function(a,c){var d=fa.expr.attrHandle[c]||fa.find.attr;fa.expr.attrHandle[c]=function(a,c,e){var f=fa.expr.attrHandle[c],g=e?b:(fa.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;return fa.expr.attrHandle[c]=f,g}}),fa.support.optSelected||(fa.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),fa.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){fa.propFix[this.toLowerCase()]=this}),fa.each(["radio","checkbox"],function(){fa.valHooks[this]={set:function(a,b){return fa.isArray(b)?a.checked=fa.inArray(fa(a).val(),b)>=0:void 0}},fa.support.checkOn||(fa.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ya=/^key/,za=/^(?:mouse|contextmenu)|click/,Aa=/^(?:focusinfocus|focusoutblur)$/,Ba=/^([^.]*)(?:\.(.+)|)$/;fa.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=qa.get(a);if(r){for(d.handler&&(g=d,d=g.handler,f=g.selector),d.guid||(d.guid=fa.guid++),(j=r.events)||(j=r.events={}),(h=r.handle)||(h=r.handle=function(a){return typeof fa===R||a&&fa.event.triggered===a.type?b:fa.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=(c||"").match(ha)||[""],k=c.length;k--;)i=Ba.exec(c[k])||[],o=q=i[1],p=(i[2]||"").split(".").sort(),o&&(m=fa.event.special[o]||{},o=(f?m.delegateType:m.bindType)||o,m=fa.event.special[o]||{},l=fa.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&fa.expr.match.needsContext.test(f),namespace:p.join(".")},g),(n=j[o])||(n=j[o]=[],n.delegateCount=0,m.setup&&m.setup.call(a,e,p,h)!==!1||a.addEventListener&&a.addEventListener(o,h,!1)),m.add&&(m.add.call(a,l),l.handler.guid||(l.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,l):n.push(l),fa.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=qa.hasData(a)&&qa.get(a);if(q&&(i=q.events)){for(b=(b||"").match(ha)||[""],j=b.length;j--;)if(h=Ba.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=fa.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||fa.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)fa.event.remove(a,n+b[j],c,d,!0);fa.isEmptyObject(i)&&(delete q.handle,qa.remove(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||T],o=da.call(c,"type")?c.type:c,p=da.call(c,"namespace")?c.namespace.split("."):[];if(h=i=e=e||T,3!==e.nodeType&&8!==e.nodeType&&!Aa.test(o+fa.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),k=o.indexOf(":")<0&&"on"+o,c=c[fa.expando]?c:new fa.Event(o,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:fa.makeArray(d,[c]),m=fa.event.special[o]||{},f||!m.trigger||m.trigger.apply(e,d)!==!1)){if(!f&&!m.noBubble&&!fa.isWindow(e)){for(j=m.delegateType||o,Aa.test(j+o)||(h=h.parentNode);h;h=h.parentNode)n.push(h),i=h;i===(e.ownerDocument||T)&&n.push(i.defaultView||i.parentWindow||a)}for(g=0;(h=n[g++])&&!c.isPropagationStopped();)c.type=g>1?j:m.bindType||o,l=(qa.get(h,"events")||{})[c.type]&&qa.get(h,"handle"),l&&l.apply(h,d),l=k&&h[k],l&&fa.acceptData(h)&&l.apply&&l.apply(h,d)===!1&&c.preventDefault();return c.type=o,f||c.isDefaultPrevented()||m._default&&m._default.apply(n.pop(),d)!==!1||!fa.acceptData(e)||k&&fa.isFunction(e[o])&&!fa.isWindow(e)&&(i=e[k],i&&(e[k]=null),fa.event.triggered=o,e[o](),fa.event.triggered=b,i&&(e[k]=i)),c.result}},dispatch:function(a){a=fa.event.fix(a);var c,d,e,f,g,h=[],i=aa.call(arguments),j=(qa.get(this,"events")||{})[a.type]||[],k=fa.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=fa.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,d=0;(g=f.handlers[d++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((fa.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),e!==b&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!==this;j=j.parentNode||this)if(j.disabled!==!0||"click"!==a.type){for(e=[],d=0;i>d;d++)g=c[d],f=g.selector+" ",e[f]===b&&(e[f]=g.needsContext?fa(f,this).index(j)>=0:fa.find(f,this,null,[j]).length),e[f]&&e.push(g);e.length&&h.push({elem:j,handlers:e})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||T,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[fa.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=za.test(e)?this.mouseHooks:ya.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new fa.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=T),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==i()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===i()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&fa.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return fa.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=fa.extend(new fa.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?fa.event.trigger(e,null,b):fa.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},fa.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},fa.Event=function(a,b){return this instanceof fa.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.getPreventDefault&&a.getPreventDefault()?g:h):this.type=a,b&&fa.extend(this,b),this.timeStamp=a&&a.timeStamp||fa.now(),void(this[fa.expando]=!0)):new fa.Event(a,b)},fa.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=g,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=g,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g,this.stopPropagation()}},fa.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){fa.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!fa.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),fa.support.focusinBubbles||fa.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){fa.event.simulate(b,a.target,fa.event.fix(a),!0)};fa.event.special[b]={setup:function(){0===c++&&T.addEventListener(a,d,!0)},teardown:function(){0===--c&&T.removeEventListener(a,d,!0)}}}),fa.fn.extend({on:function(a,c,d,e,f){var g,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=h;else if(!e)return this;return 1===f&&(g=e,e=function(a){return fa().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=fa.guid++)),this.each(function(){fa.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,fa(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=h),this.each(function(){fa.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){fa.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?fa.event.trigger(a,b,c,!0):void 0}});var Ca=/^.[^:#\[\.,]*$/,Da=/^(?:parents|prev(?:Until|All))/,Ea=fa.expr.match.needsContext,Fa={children:!0,contents:!0,next:!0,prev:!0};fa.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(fa(a).filter(function(){for(b=0;e>b;b++)if(fa.contains(d[b],this))return!0}));for(b=0;e>b;b++)fa.find(a,d[b],c);return c=this.pushStack(e>1?fa.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b=fa(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(fa.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(k(this,a||[],!0))},filter:function(a){return this.pushStack(k(this,a||[],!1))},is:function(a){return!!k(this,"string"==typeof a&&Ea.test(a)?fa(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Ea.test(a)||"string"!=typeof a?fa(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&fa.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?fa.unique(f):f)},index:function(a){return a?"string"==typeof a?ba.call(fa(a),this[0]):ba.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?fa(a,b):fa.makeArray(a&&a.nodeType?[a]:a),d=fa.merge(this.get(),c);return this.pushStack(fa.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),fa.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return fa.dir(a,"parentNode")},parentsUntil:function(a,b,c){return fa.dir(a,"parentNode",c)},next:function(a){return j(a,"nextSibling")},prev:function(a){return j(a,"previousSibling")},nextAll:function(a){return fa.dir(a,"nextSibling")},prevAll:function(a){return fa.dir(a,"previousSibling")},nextUntil:function(a,b,c){return fa.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return fa.dir(a,"previousSibling",c)},siblings:function(a){return fa.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return fa.sibling(a.firstChild)},contents:function(a){return a.contentDocument||fa.merge([],a.childNodes)}},function(a,b){fa.fn[a]=function(c,d){var e=fa.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=fa.filter(d,e)),this.length>1&&(Fa[a]||fa.unique(e),Da.test(a)&&e.reverse()),this.pushStack(e)}}),fa.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?fa.find.matchesSelector(d,a)?[d]:[]:fa.find.matches(a,fa.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,c,d){for(var e=[],f=d!==b;(a=a[c])&&9!==a.nodeType;)if(1===a.nodeType){if(f&&fa(a).is(d))break;e.push(a)}return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ga=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ha=/<([\w:]+)/,Ia=/<|&#?\w+;/,Ja=/<(?:script|style|link)/i,Ka=/^(?:checkbox|radio)$/i,La=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=/^$|\/(?:java|ecma)script/i,Na=/^true\/(.*)/,Oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Pa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pa.optgroup=Pa.option,Pa.tbody=Pa.tfoot=Pa.colgroup=Pa.caption=Pa.thead,Pa.th=Pa.td,fa.fn.extend({text:function(a){return fa.access(this,function(a){return a===b?fa.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=l(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=l(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?fa.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||fa.cleanData(q(c)),c.parentNode&&(b&&fa.contains(c.ownerDocument,c)&&o(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(fa.cleanData(q(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return fa.clone(this,a,b)})},html:function(a){return fa.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof a&&!Ja.test(a)&&!Pa[(Ha.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ga,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(fa.cleanData(q(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=fa.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),fa(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=$.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,o=k-1,p=a[0],r=fa.isFunction(p);if(r||!(1>=k||"string"!=typeof p||fa.support.checkClone)&&La.test(p))return this.each(function(d){var e=l.eq(d);r&&(a[0]=p.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(d=fa.buildFragment(a,this[0].ownerDocument,!1,!c&&this),e=d.firstChild,1===d.childNodes.length&&(d=e),e)){for(f=fa.map(q(d,"script"),m),g=f.length;k>j;j++)h=d,j!==o&&(h=fa.clone(h,!0,!0),g&&fa.merge(f,q(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,fa.map(f,n),j=0;g>j;j++)h=f[j],Ma.test(h.type||"")&&!qa.access(h,"globalEval")&&fa.contains(i,h)&&(h.src?fa._evalUrl(h.src):fa.globalEval(h.textContent.replace(Oa,"")))}return this}}),fa.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){fa.fn[a]=function(a){for(var c,d=[],e=fa(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),fa(e[g])[b](c),_.apply(d,c.get());return this.pushStack(d)}}),fa.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=fa.contains(a.ownerDocument,a);if(!(fa.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||fa.isXMLDoc(a)))for(g=q(h),f=q(a),d=0,e=f.length;e>d;d++)r(f[d],g[d]);if(b)if(c)for(f=f||q(a),g=g||q(h),d=0,e=f.length;e>d;d++)p(f[d],g[d]);else p(a,h);return g=q(h,"script"),g.length>0&&o(g,!i&&q(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=0,l=a.length,m=b.createDocumentFragment(),n=[];l>k;k++)if(e=a[k],e||0===e)if("object"===fa.type(e))fa.merge(n,e.nodeType?[e]:e);else if(Ia.test(e)){for(f=f||m.appendChild(b.createElement("div")),g=(Ha.exec(e)||["",""])[1].toLowerCase(),h=Pa[g]||Pa._default,f.innerHTML=h[1]+e.replace(Ga,"<$1></$2>")+h[2],j=h[0];j--;)f=f.firstChild;fa.merge(n,f.childNodes),f=m.firstChild,f.textContent=""}else n.push(b.createTextNode(e));for(m.textContent="",k=0;e=n[k++];)if((!d||-1===fa.inArray(e,d))&&(i=fa.contains(e.ownerDocument,e),f=q(m.appendChild(e),"script"),i&&o(f),c))for(j=0;e=f[j++];)Ma.test(e.type||"")&&c.push(e);return m},cleanData:function(a){for(var c,d,f,g,h,i,j=fa.event.special,k=0;(d=a[k])!==b;k++){if(e.accepts(d)&&(h=d[qa.expando],h&&(c=qa.cache[h]))){if(f=Object.keys(c.events||{}),f.length)for(i=0;(g=f[i])!==b;i++)j[g]?fa.event.remove(d,g):fa.removeEvent(d,g,c.handle);qa.cache[h]&&delete qa.cache[h]}delete pa.cache[d[pa.expando]]}},_evalUrl:function(a){return fa.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),fa.fn.extend({wrapAll:function(a){var b;return fa.isFunction(a)?this.each(function(b){fa(this).wrapAll(a.call(this,b))}):(this[0]&&(b=fa(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return fa.isFunction(a)?this.each(function(b){fa(this).wrapInner(a.call(this,b))}):this.each(function(){var b=fa(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=fa.isFunction(a);return this.each(function(c){fa(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){fa.nodeName(this,"body")||fa(this).replaceWith(this.childNodes)}).end()}});var Qa,Ra,Sa=/^(none|table(?!-c[ea]).+)/,Ta=/^margin/,Ua=new RegExp("^("+ga+")(.*)$","i"),Va=new RegExp("^("+ga+")(?!px)[a-z%]+$","i"),Wa=new RegExp("^([+-])=("+ga+")","i"),Xa={BODY:"block"},Ya={position:"absolute",visibility:"hidden",display:"block"},Za={letterSpacing:0,fontWeight:400},$a=["Top","Right","Bottom","Left"],_a=["Webkit","O","Moz","ms"];
fa.fn.extend({css:function(a,c){return fa.access(this,function(a,c,d){var e,f,g={},h=0;if(fa.isArray(c)){for(e=u(a),f=c.length;f>h;h++)g[c[h]]=fa.css(a,c[h],!1,e);return g}return d!==b?fa.style(a,c,d):fa.css(a,c)},a,c,arguments.length>1)},show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:t(this))?fa(this).show():fa(this).hide()})}}),fa.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Qa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=fa.camelCase(c),j=a.style;return c=fa.cssProps[i]||(fa.cssProps[i]=s(j,i)),h=fa.cssHooks[c]||fa.cssHooks[i],d===b?h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c]:(g=typeof d,"string"===g&&(f=Wa.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(fa.css(a,c)),g="number"),null==d||"number"===g&&isNaN(d)||("number"!==g||fa.cssNumber[i]||(d+="px"),fa.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b||(j[c]=d)),void 0)}},css:function(a,c,d,e){var f,g,h,i=fa.camelCase(c);return c=fa.cssProps[i]||(fa.cssProps[i]=s(a.style,i)),h=fa.cssHooks[c]||fa.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,d)),f===b&&(f=Qa(a,c,e)),"normal"===f&&c in Za&&(f=Za[c]),""===d||d?(g=parseFloat(f),d===!0||fa.isNumeric(g)?g||0:f):f}}),Qa=function(a,c,d){var e,f,g,h=d||u(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||fa.contains(a.ownerDocument,a)||(i=fa.style(a,c)),Va.test(i)&&Ta.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i},fa.each(["height","width"],function(a,b){fa.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Sa.test(fa.css(a,"display"))?fa.swap(a,Ya,function(){return y(a,b,d)}):y(a,b,d):void 0},set:function(a,c,d){var e=d&&u(a);return w(a,c,d?x(a,b,d,fa.support.boxSizing&&"border-box"===fa.css(a,"boxSizing",!1,e),e):0)}}}),fa(function(){fa.support.reliableMarginRight||(fa.cssHooks.marginRight={get:function(a,b){return b?fa.swap(a,{display:"inline-block"},Qa,[a,"marginRight"]):void 0}}),!fa.support.pixelPosition&&fa.fn.position&&fa.each(["top","left"],function(a,b){fa.cssHooks[b]={get:function(a,c){return c?(c=Qa(a,b),Va.test(c)?fa(a).position()[b]+"px":c):void 0}}})}),fa.expr&&fa.expr.filters&&(fa.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},fa.expr.filters.visible=function(a){return!fa.expr.filters.hidden(a)}),fa.each({margin:"",padding:"",border:"Width"},function(a,b){fa.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+$a[d]+b]=f[d]||f[d-2]||f[0];return e}},Ta.test(a)||(fa.cssHooks[a+b].set=w)});var ab=/%20/g,bb=/\[\]$/,cb=/\r?\n/g,db=/^(?:submit|button|image|reset|file)$/i,eb=/^(?:input|select|textarea|keygen)/i;fa.fn.extend({serialize:function(){return fa.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=fa.prop(this,"elements");return a?fa.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!fa(this).is(":disabled")&&eb.test(this.nodeName)&&!db.test(a)&&(this.checked||!Ka.test(a))}).map(function(a,b){var c=fa(this).val();return null==c?null:fa.isArray(c)?fa.map(c,function(a){return{name:b.name,value:a.replace(cb,"\r\n")}}):{name:b.name,value:c.replace(cb,"\r\n")}}).get()}}),fa.param=function(a,c){var d,e=[],f=function(a,b){b=fa.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=fa.ajaxSettings&&fa.ajaxSettings.traditional),fa.isArray(a)||a.jquery&&!fa.isPlainObject(a))fa.each(a,function(){f(this.name,this.value)});else for(d in a)B(d,a[d],c,f);return e.join("&").replace(ab,"+")},fa.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){fa.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),fa.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var fb,gb,hb=fa.now(),ib=/\?/,jb=/#.*$/,kb=/([?&])_=[^&]*/,lb=/^(.*?):[ \t]*([^\r\n]*)$/gm,mb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,nb=/^(?:GET|HEAD)$/,ob=/^\/\//,pb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,qb=fa.fn.load,rb={},sb={},tb="*/".concat("*");try{gb=S.href}catch(ub){gb=T.createElement("a"),gb.href="",gb=gb.href}fb=pb.exec(gb.toLowerCase())||[],fa.fn.load=function(a,c,d){if("string"!=typeof a&&qb)return qb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i),a=a.slice(0,i)),fa.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),h.length>0&&fa.ajax({url:a,type:f,dataType:"html",data:c}).done(function(a){g=arguments,h.html(e?fa("<div>").append(fa.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,g||[a.responseText,b,a])}),this},fa.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){fa.fn[b]=function(a){return this.on(b,a)}}),fa.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gb,type:"GET",isLocal:mb.test(fb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":fa.parseJSON,"text xml":fa.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?E(E(a,fa.ajaxSettings),b):E(fa.ajaxSettings,a)},ajaxPrefilter:C(rb),ajaxTransport:C(sb),ajax:function(a,c){function d(a,c,d,h){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),e=b,g=h||"",w.readyState=a>0?4:0,j=a>=200&&300>a||304===a,d&&(t=F(m,w,d)),t=G(m,t,w,j),j?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(fa.lastModified[f]=v),v=w.getResponseHeader("etag"),v&&(fa.etag[f]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger(j?"ajaxSuccess":"ajaxError",[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--fa.active||fa.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=fa.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?fa(n):fa.event,p=fa.Deferred(),q=fa.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!h)for(h={};b=lb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return e&&e.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||gb)+"").replace(jb,"").replace(ob,fb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=fa.trim(m.dataType||"*").toLowerCase().match(ha)||[""],null==m.crossDomain&&(j=pb.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]===fb[1]&&j[2]===fb[2]&&(j[3]||("http:"===j[1]?"80":"443"))===(fb[3]||("http:"===fb[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=fa.param(m.data,m.traditional)),D(rb,m,c,w),2===u)return w;k=m.global,k&&0===fa.active++&&fa.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!nb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(ib.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=kb.test(f)?f.replace(kb,"$1_="+hb++):f+(ib.test(f)?"&":"?")+"_="+hb++)),m.ifModified&&(fa.lastModified[f]&&w.setRequestHeader("If-Modified-Since",fa.lastModified[f]),fa.etag[f]&&w.setRequestHeader("If-None-Match",fa.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+tb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(e=D(sb,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,e.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return fa.get(a,b,c,"json")},getScript:function(a,c){return fa.get(a,b,c,"script")}}),fa.each(["get","post"],function(a,c){fa[c]=function(a,d,e,f){return fa.isFunction(d)&&(f=f||e,e=d,d=b),fa.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),fa.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return fa.globalEval(a),a}}}),fa.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),fa.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=fa("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),T.head.appendChild(b[0])},abort:function(){c&&c()}}}});var vb=[],wb=/(=)\?(?=&|$)|\?\?/;fa.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=vb.pop()||fa.expando+"_"+hb++;return this[a]=!0,a}}),fa.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(wb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&wb.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=fa.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(wb,"$1"+f):c.jsonp!==!1&&(c.url+=(ib.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||fa.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,vb.push(f)),h&&fa.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0}),fa.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var xb=fa.ajaxSettings.xhr(),yb={0:200,1223:204},zb=0,Ab={};a.ActiveXObject&&fa(a).on("unload",function(){for(var a in Ab)Ab[a]();Ab=b}),fa.support.cors=!!xb&&"withCredentials"in xb,fa.support.ajax=xb=!!xb,fa.ajaxTransport(function(a){var c;return fa.support.cors||xb&&!a.crossDomain?{send:function(d,e){var f,g,h=a.xhr();if(h.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(f in a.xhrFields)h[f]=a.xhrFields[f];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType),a.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)h.setRequestHeader(f,d[f]);c=function(a){return function(){c&&(delete Ab[g],c=h.onload=h.onerror=null,"abort"===a?h.abort():"error"===a?e(h.status||404,h.statusText):e(yb[h.status]||h.status,h.statusText,"string"==typeof h.responseText?{text:h.responseText}:b,h.getAllResponseHeaders()))}},h.onload=c(),h.onerror=c("error"),c=Ab[g=zb++]=c("abort"),h.send(a.hasContent&&a.data||null)},abort:function(){c&&c()}}:void 0});var Bb,Cb,Db=/^(?:toggle|show|hide)$/,Eb=new RegExp("^(?:([+-])=|)("+ga+")([a-z%]*)$","i"),Fb=/queueHooks$/,Gb=[L],Hb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Eb.exec(b),f=e&&e[3]||(fa.cssNumber[a]?"":"px"),g=(fa.cssNumber[a]||"px"!==f&&+d)&&Eb.exec(fa.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,fa.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};fa.Animation=fa.extend(J,{tweener:function(a,b){fa.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Hb[c]=Hb[c]||[],Hb[c].unshift(b)},prefilter:function(a,b){b?Gb.unshift(a):Gb.push(a)}}),fa.Tween=M,M.prototype={constructor:M,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(fa.cssNumber[c]?"":"px")},cur:function(){var a=M.propHooks[this.prop];return a&&a.get?a.get(this):M.propHooks._default.get(this)},run:function(a){var b,c=M.propHooks[this.prop];return this.options.duration?this.pos=b=fa.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=fa.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){fa.fx.step[a.prop]?fa.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[fa.cssProps[a.prop]]||fa.cssHooks[a.prop])?fa.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},fa.each(["toggle","show","hide"],function(a,b){var c=fa.fn[b];fa.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(N(b,!0),a,d,e)}}),fa.fn.extend({fadeTo:function(a,b,c,d){return this.filter(t).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=fa.isEmptyObject(a),f=fa.speed(b,c,d),g=function(){var b=J(this,fa.extend({},a),f);(e||qa.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=fa.timers,g=qa.get(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Fb.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&fa.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=qa.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=fa.timers,g=d?d.length:0;for(c.finish=!0,fa.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),fa.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){fa.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),fa.speed=function(a,b,c){var d=a&&"object"==typeof a?fa.extend({},a):{complete:c||!c&&b||fa.isFunction(a)&&a,duration:a,easing:c&&b||b&&!fa.isFunction(b)&&b};return d.duration=fa.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in fa.fx.speeds?fa.fx.speeds[d.duration]:fa.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){fa.isFunction(d.old)&&d.old.call(this),d.queue&&fa.dequeue(this,d.queue)},d},fa.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},fa.timers=[],fa.fx=M.prototype.init,fa.fx.tick=function(){var a,c=fa.timers,d=0;for(Bb=fa.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||fa.fx.stop(),Bb=b},fa.fx.timer=function(a){a()&&fa.timers.push(a)&&fa.fx.start()},fa.fx.interval=13,fa.fx.start=function(){Cb||(Cb=setInterval(fa.fx.tick,fa.fx.interval))},fa.fx.stop=function(){clearInterval(Cb),Cb=null},fa.fx.speeds={slow:600,fast:200,_default:400},fa.fx.step={},fa.expr&&fa.expr.filters&&(fa.expr.filters.animated=function(a){return fa.grep(fa.timers,function(b){return a===b.elem}).length}),fa.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){fa.offset.setOffset(this,a,b)});var c,d,e=this[0],f={top:0,left:0},g=e&&e.ownerDocument;if(g)return c=g.documentElement,fa.contains(c,e)?(typeof e.getBoundingClientRect!==R&&(f=e.getBoundingClientRect()),d=O(g),{top:f.top+d.pageYOffset-c.clientTop,left:f.left+d.pageXOffset-c.clientLeft}):f},fa.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=fa.css(a,"position"),l=fa(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=fa.css(a,"top"),i=fa.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),fa.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},fa.fn.extend({position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===fa.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),fa.nodeName(a[0],"html")||(d=a.offset()),d.top+=fa.css(a[0],"borderTopWidth",!0),d.left+=fa.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-fa.css(c,"marginTop",!0),left:b.left-d.left-fa.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||U;a&&!fa.nodeName(a,"html")&&"static"===fa.css(a,"position");)a=a.offsetParent;return a||U})}}),fa.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,d){var e="pageYOffset"===d;fa.fn[c]=function(f){return fa.access(this,function(c,f,g){var h=O(c);return g===b?h?h[d]:c[f]:void(h?h.scrollTo(e?a.pageXOffset:g,e?g:a.pageYOffset):c[f]=g)},c,f,arguments.length,null)}}),fa.each({Height:"height",Width:"width"},function(a,c){fa.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){fa.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return fa.access(this,function(c,d,e){var f;return fa.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?fa.css(c,d,h):fa.style(c,d,e,h)},c,g?e:b,g,null)}})}),fa.fn.size=function(){return this.length},fa.fn.andSelf=fa.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=fa:"function"==typeof define&&define.amd&&define("jquery",[],function(){return fa}),"object"==typeof a&&"object"==typeof a.document&&(a.jQuery=a.$=fa)}(window),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-(1/0);var d={computed:-(1/0),value:-(1/0)};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";
try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var a,b=this,c=b.Backbone,d=[],e=d.push,f=d.slice,g=d.splice;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="1.0.0";var h=b._;h||"undefined"==typeof require||(h=require("underscore")),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m>l;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(a,i);var n=a.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId("c"),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&&(d=this.parse(d,b)||{}),(c=h.result(this,"defaults"))&&(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=["url","urlRoot","collection"];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),void b.trigger("sync",b,d,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,d&&(!c||!c.wait)&&!this.set(d,c))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&&(b=h.extend(d||{},b)),h.isObject(b)&&!i.set(b,c)?!1:(j&&j(i,a,c),void i.trigger("sync",i,a,c))},L(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,h.extend(b||{},{validationError:c})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=a.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&&(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,d,f,i,j,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=h.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d>c;c++)(f=this._prepareModel(a[c],b))&&((i=this.get(f))?(b.remove&&(p[i.cid]=!0),b.merge&&(i.set(f.attributes,b),l&&!j&&i.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(c=0,d=this.length;d>c;++c)p[(f=this.models[c]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?g.apply(this.models,[k,0].concat(n)):e.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d>c;c++)(f=n[c]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(t,function(a){q.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=["groupBy","countBy","sortBy"];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=a.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(v.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&&this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var b=h.extend({},h.result(this,"attributes"));this.id&&(b.id=h.result(this,"id")),this.className&&(b["class"]=h.result(this,"className"));var c=a.$("<"+h.result(this,"tagName")+">").attr(b);this.setElement(c,!1)}}}),a.sync=function(b,c,d){var e=y[b];h.defaults(d||(d={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=h.result(c,"url")||K()),null!=d.data||!c||"create"!==b&&"update"!==b&&"patch"!==b||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1),"PATCH"!==f.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=d.xhr=a.ajax(h.extend(f,d));return c.trigger("request",c,i,d),i};var y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(b,c,d){h.isRegExp(b)||(b=this._routeToRegExp(b)),h.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return a.history.route(b,function(f){var g=e._extractParameters(b,f);d&&d.apply(e,g),e.trigger.apply(e,["route:"+c].concat(g)),e.trigger("route",c,g),a.history.trigger("route",e,c,g)}),this},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(A,"(?:$1)?").replace(B,function(a,b){return b?a:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=a.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(b){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=h.extend({},{root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=H.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(G,"/"),e&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),a.history=new E;var J=function(a,b){var c,d=this;c=a&&h.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},h.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&h.extend(c.prototype,a),c.__super__=d.prototype,c};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}.call(this),!function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0],direction:h}),!f.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(j.$indicators.children()[j.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d,e=a(this),f=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),g=a.extend({},f.data(),e.data());f.carousel(g),(d=e.attr("data-slide-to"))&&f.data("carousel").pause().to(d).cycle(),b.preventDefault()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof c&&c);e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){"use strict";function b(){a(".dropdown-backdrop").remove(),a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(d){var e,f,g=a(this);if(!g.is(".disabled, :disabled"))return e=c(g),f=e.hasClass("open"),b(),f||("ontouchstart"in document.documentElement&&a('<div class="dropdown-backdrop"/>').insertBefore(a(this)).on("click",b),e.toggleClass("open")),g.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({
remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",void(this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show))):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){"use strict";function b(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),d=b.data("target")||b.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(a){this.focused=!0},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||c.typeahead(c.data())})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&h>=d?"top":!1,this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),
a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=p>=Math.abs(j-t),e=p>=Math.abs(k-s),f=p>=Math.abs(h-r),g=p>=Math.abs(i-q),d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=p>=Math.abs(j-s),e=p>=Math.abs(k-t),f=p>=Math.abs(h-q),g=p>=Math.abs(i-r),d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b=this.options,c=b.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];c.length>b;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,c,d){if(!c.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=g+a.helperProportions.width,i=(a.positionAbs||a.position.absolute).top,j=i+a.helperProportions.height,k=c.offset.left,l=k+c.proportions.width,m=c.offset.top,n=m+c.proportions.height;switch(d){case"fit":return g>=k&&l>=h&&i>=m&&n>=j;case"intersect":return g+a.helperProportions.width/2>k&&l>h-a.helperProportions.width/2&&i+a.helperProportions.height/2>m&&n>j-a.helperProportions.height/2;case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,b(f,m,c.proportions.height)&&b(e,k,c.proportions.width);case"touch":return(i>=m&&n>=i||j>=m&&n>=j||m>i&&j>n)&&(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions.height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions={width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);this.CodeMirror=a()}}(function(){"use strict";function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{},oe(Gf,d,!1),o(d);var e=d.value;"string"==typeof e&&(e=new cg(e,d.mode)),this.doc=e;var f=this.display=new b(c,e);f.wrapper.CodeMirror=this,k(this),i(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),d.autofocus&&!jf&&zb(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new he},Ze&&11>$e&&setTimeout(pe(yb,this,!0),20),Cb(this),De();var g=this;ib(this,function(){g.curOp.forceUpdate=!0,Cd(g,e),d.autofocus&&!jf||xe()==f.input?setTimeout(pe(Zb,g),20):$b(g);for(var a in Hf)Hf.hasOwnProperty(a)&&Hf[a](g,d[a],If);u(g);for(var b=0;b<Mf.length;++b)Mf[b](g)})}function b(a,b){var c=this,d=c.input=te("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");_e?d.style.width="1000px":d.setAttribute("wrap","off"),hf&&(d.style.border="1px solid black"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck","false"),c.inputDiv=te("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),c.scrollbarH=te("div",[te("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),c.scrollbarV=te("div",[te("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),c.scrollbarFiller=te("div",null,"CodeMirror-scrollbar-filler"),c.gutterFiller=te("div",null,"CodeMirror-gutter-filler"),c.lineDiv=te("div",null,"CodeMirror-code"),c.selectionDiv=te("div",null,null,"position: relative; z-index: 1"),c.cursorDiv=te("div",null,"CodeMirror-cursors"),c.measure=te("div",null,"CodeMirror-measure"),c.lineMeasure=te("div",null,"CodeMirror-measure"),c.lineSpace=te("div",[c.measure,c.lineMeasure,c.selectionDiv,c.cursorDiv,c.lineDiv],null,"position: relative; outline: none"),c.mover=te("div",[te("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative"),c.sizer=te("div",[c.mover],"CodeMirror-sizer"),c.heightForcer=te("div",null,null,"position: absolute; height: "+mg+"px; width: 1px;"),c.gutters=te("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=te("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=te("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),Ze&&8>$e&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),hf&&(d.style.width="0px"),_e||(c.scroller.draggable=!0),ef&&(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"),Ze&&8>$e&&(c.scrollbarH.style.minHeight=c.scrollbarV.style.minWidth="18px"),a.appendChild?a.appendChild(c.wrapper):a(c.wrapper),c.viewFrom=c.viewTo=b.first,c.view=[],c.externalMeasured=null,c.viewOffset=0,c.lastSizeC=0,c.updateLineNumbers=null,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.prevInput="",c.alignWidgets=!1,c.pollingFast=!1,c.poll=new he,c.cachedCharWidth=c.cachedTextHeight=c.cachedPaddingH=null,c.inaccurateSelection=!1,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c.shift=!1,c.selForContextMenu=null}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),d(b)}function d(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.frontier=a.doc.first,wa(a,100),a.state.modeGen++,a.curOp&&ob(a)}function e(a){a.options.lineWrapping?(Ae(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=""):(ze(a.display.wrapper,"CodeMirror-wrap"),n(a)),g(a),ob(a),Oa(a),setTimeout(function(){r(a)},100)}function f(a){var b=Za(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/$a(a.display)-3);return function(e){if(bd(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function g(a){var b=a.doc,c=f(a);b.iter(function(a){var b=c(a);b!=a.height&&Gd(a,b)})}function h(a){var b=Rf[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:"")}function i(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Oa(a)}function j(a){k(a),ob(a),setTimeout(function(){t(a)},20)}function k(a){var b=a.display.gutters,c=a.options.gutters;ue(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(te("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none",l(a)}function l(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px",a.display.scrollbarH.style.left=a.options.fixedGutter?b+"px":0}function m(a){if(0==a.height)return 0;for(var b,c=a.text.length,d=a;b=Wc(d);){var e=b.find(0,!0);d=e.from.line,c+=e.from.ch-e.to.ch}for(d=a;b=Xc(d);){var e=b.find(0,!0);c-=d.text.length-e.from.ch,d=e.to.line,c+=d.text.length-e.to.ch}return c}function n(a){var b=a.display,c=a.doc;b.maxLine=Dd(c,c.first),b.maxLineLength=m(b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var c=m(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function o(a){var b=le(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):b>-1&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function p(a){return a.display.scroller.clientHeight-a.display.wrapper.clientHeight<mg-3}function q(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,hScrollbarTakesSpace:p(a),barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+Ba(a.display))}}function r(a,b){b||(b=q(a));var c=a.display,d=Fe(c.measure),e=b.docHeight+mg,f=b.scrollWidth>b.clientWidth;f&&b.scrollWidth<=b.clientWidth+1&&d>0&&!b.hScrollbarTakesSpace&&(f=!1);var g=e>b.clientHeight;if(g?(c.scrollbarV.style.display="block",c.scrollbarV.style.bottom=f?d+"px":"0",c.scrollbarV.firstChild.style.height=Math.max(0,e-b.clientHeight+(b.barHeight||c.scrollbarV.clientHeight))+"px"):(c.scrollbarV.style.display="",c.scrollbarV.firstChild.style.height="0"),f?(c.scrollbarH.style.display="block",c.scrollbarH.style.right=g?d+"px":"0",c.scrollbarH.firstChild.style.width=b.scrollWidth-b.clientWidth+(b.barWidth||c.scrollbarH.clientWidth)+"px"):(c.scrollbarH.style.display="",c.scrollbarH.firstChild.style.width="0"),f&&g?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=c.scrollbarFiller.style.width=d+"px"):c.scrollbarFiller.style.display="",f&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d+"px",c.gutterFiller.style.width=c.gutters.offsetWidth+"px"):c.gutterFiller.style.display="",!a.state.checkedOverlayScrollbar&&b.clientHeight>0){if(0===d){var h=kf&&!ff?"12px":"18px";c.scrollbarV.style.minWidth=c.scrollbarH.style.minHeight=h;var i=function(b){_d(b)!=c.scrollbarV&&_d(b)!=c.scrollbarH&&jb(a,Gb)(b)};ig(c.scrollbarV,"mousedown",i),ig(c.scrollbarH,"mousedown",i)}a.state.checkedOverlayScrollbar=!0}}function s(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-Aa(a));var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,f=Id(b,d),g=Id(b,e);if(c&&c.ensure){var h=c.ensure.from.line,i=c.ensure.to.line;if(f>h)return{from:h,to:Id(b,Jd(Dd(b,h))+a.wrapper.clientHeight)};if(Math.min(i,b.lastLine())>=g)return{from:Id(b,Jd(Dd(b,i))-a.wrapper.clientHeight),to:i}}return{from:f,to:Math.max(g,f+1)}}function t(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=w(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=f);var h=c[g].alignable;if(h)for(var i=0;i<h.length;i++)h[i].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function u(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=v(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(te("div",[te("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g),d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",l(a),!0}return!1}function v(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function w(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function x(a,b,c){var d=a.display;this.viewport=b,this.visible=s(d,a.doc,b),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.oldViewFrom=d.viewFrom,this.oldViewTo=d.viewTo,this.oldScrollerWidth=d.scroller.clientWidth,this.force=c,this.dims=F(a)}function y(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return qb(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&0==ub(a))return!1;u(a)&&(qb(a),b.dims=F(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&f-c.viewFrom<20&&(f=Math.max(d.first,c.viewFrom)),c.viewTo>g&&c.viewTo-g<20&&(g=Math.min(e,c.viewTo)),qf&&(f=_c(a.doc,f),g=ad(a.doc,g));var h=f!=c.viewFrom||g!=c.viewTo||c.lastSizeC!=b.wrapperHeight;tb(a,f,g),c.viewOffset=Jd(Dd(a.doc,c.viewFrom)),a.display.mover.style.top=c.viewOffset+"px";var i=ub(a);if(!h&&0==i&&!b.force&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;var j=xe();return i>4&&(c.lineDiv.style.display="none"),G(a,c.updateLineNumbers,b.dims),i>4&&(c.lineDiv.style.display=""),j&&xe()!=j&&j.offsetHeight&&j.focus(),ue(c.cursorDiv),ue(c.selectionDiv),h&&(c.lastSizeC=b.wrapperHeight,wa(a,400)),c.updateLineNumbers=null,!0}function z(a,b){for(var c=b.force,d=b.viewport,e=!0;;e=!1){if(e&&a.options.lineWrapping&&b.oldScrollerWidth!=a.display.scroller.clientWidth)c=!0;else if(c=!1,d&&null!=d.top&&(d={top:Math.min(a.doc.height+Ba(a.display)-mg-a.display.scroller.clientHeight,d.top)}),b.visible=s(a.display,a.doc,d),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!y(a,b))break;D(a);var f=q(a);sa(a),B(a,f),r(a,f)}be(a,"update",a),(a.display.viewFrom!=b.oldViewFrom||a.display.viewTo!=b.oldViewTo)&&be(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo);
}function A(a,b){var c=new x(a,b);if(y(a,c)){D(a),z(a,c);var d=q(a);sa(a),B(a,d),r(a,d)}}function B(a,b){a.display.sizer.style.minHeight=a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=Math.max(b.docHeight,b.clientHeight-mg)+"px"}function C(a,b){a.display.sizer.offsetWidth+a.display.gutters.offsetWidth<a.display.scroller.clientWidth-1&&(a.display.sizer.style.minHeight=a.display.heightForcer.style.top="0px",a.display.gutters.style.height=b.docHeight+"px")}function D(a){for(var b=a.display,c=b.lineDiv.offsetTop,d=0;d<b.view.length;d++){var e,f=b.view[d];if(!f.hidden){if(Ze&&8>$e){var g=f.node.offsetTop+f.node.offsetHeight;e=g-c,c=g}else{var h=f.node.getBoundingClientRect();e=h.bottom-h.top}var i=f.line.height-e;if(2>e&&(e=Za(b)),(i>.001||-.001>i)&&(Gd(f.line,e),E(f.line),f.rest))for(var j=0;j<f.rest.length;j++)E(f.rest[j])}}}function E(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function F(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:w(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function G(a,b,c){function d(b){var c=b.nextSibling;return _e&&kf&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,i=e.view,j=e.viewFrom,k=0;k<i.length;k++){var l=i[k];if(l.hidden);else if(l.node){for(;h!=l.node;)h=d(h);var m=f&&null!=b&&j>=b&&l.lineNumber;l.changes&&(le(l.changes,"gutter")>-1&&(m=!1),H(a,l,j,c)),m&&(ue(l.lineNumber),l.lineNumber.appendChild(document.createTextNode(v(a.options,j)))),h=l.node.nextSibling}else{var n=P(a,l,j,c);g.insertBefore(n,h)}j+=l.size}for(;h;)h=d(h)}function H(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];"text"==f?L(a,b):"gutter"==f?N(a,b,c,d):"class"==f?M(b):"widget"==f&&O(b,d)}b.changes=null}function I(a){return a.node==a.text&&(a.node=te("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),Ze&&8>$e&&(a.node.style.zIndex=2)),a.node}function J(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=I(a);a.background=c.insertBefore(te("div",null,b),c.firstChild)}}function K(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):qd(a,b)}function L(a,b){var c=b.text.className,d=K(a,b);b.text==b.node&&(b.node=d.pre),b.text.parentNode.replaceChild(d.pre,b.text),b.text=d.pre,d.bgClass!=b.bgClass||d.textClass!=b.textClass?(b.bgClass=d.bgClass,b.textClass=d.textClass,M(b)):c&&(b.text.className=c)}function M(a){J(a),a.line.wrapClass?I(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");var b=a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass;a.text.className=b||""}function N(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);var e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var f=I(b),g=b.gutter=f.insertBefore(te("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),b.text);if(!a.options.lineNumbers||e&&e["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(te("div",v(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),e)for(var h=0;h<a.options.gutters.length;++h){var i=a.options.gutters[h],j=e.hasOwnProperty(i)&&e[i];j&&g.appendChild(te("div",[j],"CodeMirror-gutter-elt","left: "+d.gutterLeft[i]+"px; width: "+d.gutterWidth[i]+"px"))}}}function O(a,b){a.alignable&&(a.alignable=null);for(var c,d=a.node.firstChild;d;d=c){var c=d.nextSibling;"CodeMirror-linewidget"==d.className&&a.node.removeChild(d)}Q(a,b)}function P(a,b,c,d){var e=K(a,b);return b.text=b.node=e.pre,e.bgClass&&(b.bgClass=e.bgClass),e.textClass&&(b.textClass=e.textClass),M(b),N(a,b,c,d),Q(b,d),b.node}function Q(a,b){if(R(a.line,a,b,!0),a.rest)for(var c=0;c<a.rest.length;c++)R(a.rest[c],a,b,!1)}function R(a,b,c,d){if(a.widgets)for(var e=I(b),f=0,g=a.widgets;f<g.length;++f){var h=g[f],i=te("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||(i.ignoreEvents=!0),S(h,i,b,c),d&&h.above?e.insertBefore(i,b.gutter||b.text):e.appendChild(i),be(h,"redraw")}}function S(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function T(a){return rf(a.line,a.ch)}function U(a,b){return sf(a,b)<0?b:a}function V(a,b){return sf(a,b)<0?a:b}function W(a,b){this.ranges=a,this.primIndex=b}function X(a,b){this.anchor=a,this.head=b}function Y(a,b){var c=a[b];a.sort(function(a,b){return sf(a.from(),b.from())}),b=le(a,c);for(var d=1;d<a.length;d++){var e=a[d],f=a[d-1];if(sf(f.to(),e.from())>=0){var g=V(f.from(),e.from()),h=U(f.to(),e.to()),i=f.empty()?e.from()==e.head:f.from()==f.head;b>=d&&--b,a.splice(--d,2,new X(i?h:g,i?g:h))}}return new W(a,b)}function Z(a,b){return new W([new X(a,b||a)],0)}function $(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function _(a,b){if(b.line<a.first)return rf(a.first,0);var c=a.first+a.size-1;return b.line>c?rf(c,Dd(a,c).text.length):aa(b,Dd(a,b.line).text.length)}function aa(a,b){var c=a.ch;return null==c||c>b?rf(a.line,b):0>c?rf(a.line,0):a}function ba(a,b){return b>=a.first&&b<a.first+a.size}function ca(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=_(a,b[d]);return c}function da(a,b,c,d){if(a.cm&&a.cm.display.shift||a.extend){var e=b.anchor;if(d){var f=sf(c,e)<0;f!=sf(d,e)<0?(e=c,c=d):f!=sf(c,d)<0&&(c=d)}return new X(e,c)}return new X(d||c,c)}function ea(a,b,c,d){ka(a,new W([da(a,a.sel.primary(),b,c)],0),d)}function fa(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=da(a,a.sel.ranges[e],b[e],null);var f=Y(d,a.sel.primIndex);ka(a,f,c)}function ga(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c,ka(a,Y(e,a.sel.primIndex),d)}function ha(a,b,c,d){ka(a,Z(b,c),d)}function ia(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new X(_(a,b[c].anchor),_(a,b[c].head))}};return kg(a,"beforeSelectionChange",a,c),a.cm&&kg(a.cm,"beforeSelectionChange",a.cm,c),c.ranges!=b.ranges?Y(c.ranges,c.ranges.length-1):b}function ja(a,b,c){var d=a.history.done,e=ke(d);e&&e.ranges?(d[d.length-1]=b,la(a,b,c)):ka(a,b,c)}function ka(a,b,c){la(a,b,c),Rd(a,a.sel,a.cm?a.cm.curOp.id:NaN,c)}function la(a,b,c){(fe(a,"beforeSelectionChange")||a.cm&&fe(a.cm,"beforeSelectionChange"))&&(b=ia(a,b));var d=c&&c.bias||(sf(b.primary().head,a.sel.primary().head)<0?-1:1);ma(a,oa(a,b,d,!0)),c&&c.scroll===!1||!a.cm||sc(a.cm)}function ma(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,ee(a.cm)),be(a,"cursorActivity",a))}function na(a){ma(a,oa(a,a.sel,null,!1),og)}function oa(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=pa(a,g.anchor,c,d),i=pa(a,g.head,c,d);(e||h!=g.anchor||i!=g.head)&&(e||(e=b.ranges.slice(0,f)),e[f]=new X(h,i))}return e?Y(e,b.primIndex):b}function pa(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=Dd(a,f.line);if(h.markedSpans)for(var i=0;i<h.markedSpans.length;++i){var j=h.markedSpans[i],k=j.marker;if((null==j.from||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(null==j.to||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d&&(kg(k,"beforeCursorEnter"),k.explicitlyCleared)){if(h.markedSpans){--i;continue}break}if(!k.atomic)continue;var l=k.find(0>g?-1:1);if(0==sf(l,f)&&(l.ch+=g,l.ch<0?l=l.line>a.first?_(a,rf(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?rf(l.line+1,0):null),!l)){if(e)return d?(a.cantEdit=!0,rf(a.first,0)):pa(a,b,c,!0);e=!0,l=b,g=-g}f=l;continue a}}return f}}function qa(a){for(var b=a.display,c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++){var h=c.sel.ranges[g],i=h.empty();(i||a.options.showCursorWhenSelecting)&&ta(a,h,e),i||ua(a,h,f)}if(a.options.moveInputWithCursor){var j=Ua(a,c.sel.primary().head,"div"),k=b.wrapper.getBoundingClientRect(),l=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,j.top+l.top-k.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,j.left+l.left-k.left))}return d}function ra(a,b){ve(a.display.cursorDiv,b.cursors),ve(a.display.selectionDiv,b.selection),null!=b.teTop&&(a.display.inputDiv.style.top=b.teTop+"px",a.display.inputDiv.style.left=b.teLeft+"px")}function sa(a){ra(a,qa(a))}function ta(a,b,c){var d=Ua(a,b.head,"div",null,null,!a.options.singleCursorHeightPerLine),e=c.appendChild(te("div","\xa0","CodeMirror-cursor"));if(e.style.left=d.left+"px",e.style.top=d.top+"px",e.style.height=Math.max(0,d.bottom-d.top)*a.options.cursorHeight+"px",d.other){var f=c.appendChild(te("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=d.other.left+"px",f.style.top=d.other.top+"px",f.style.height=.85*(d.other.bottom-d.other.top)+"px"}}function ua(a,b,c){function d(a,b,c,d){0>b&&(b=0),b=Math.round(b),d=Math.round(d),h.appendChild(te("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?k-a:c)+"px; height: "+(d-b)+"px"))}function e(b,c,e){function f(c,d){return Ta(a,rf(b,c),"div",l,d)}var h,i,l=Dd(g,b),m=l.text.length;return Je(Kd(l),c||0,null==e?m:e,function(a,b,g){var l,n,o,p=f(a,"left");if(a==b)l=p,n=o=p.left;else{if(l=f(b-1,"right"),"rtl"==g){var q=p;p=l,l=q}n=p.left,o=l.right}null==c&&0==a&&(n=j),l.top-p.top>3&&(d(n,p.top,null,p.bottom),n=j,p.bottom<l.top&&d(n,p.bottom,null,l.top)),null==e&&b==m&&(o=k),(!h||p.top<h.top||p.top==h.top&&p.left<h.left)&&(h=p),(!i||l.bottom>i.bottom||l.bottom==i.bottom&&l.right>i.right)&&(i=l),j+1>n&&(n=j),d(n,l.top,o-n,l.bottom)}),{start:h,end:i}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),i=Ca(a.display),j=i.left,k=f.lineSpace.offsetWidth-i.right,l=b.from(),m=b.to();if(l.line==m.line)e(l.line,l.ch,m.ch);else{var n=Dd(g,l.line),o=Dd(g,m.line),p=Zc(n)==Zc(o),q=e(l.line,l.ch,p?n.text.length+1:null).end,r=e(m.line,p?0:null,m.ch).start;p&&(q.top<r.top-2?(d(q.right,q.top,null,q.bottom),d(j,r.top,r.left,r.bottom)):d(q.right,q.top,r.left-q.right,q.bottom)),q.bottom<r.top&&d(j,q.bottom,null,r.top)}c.appendChild(h)}function va(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function wa(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,pe(xa,a))}function xa(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Of(b.mode,za(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=md(a,f,d,!0);f.styles=h.styles;var i=f.styleClasses,j=h.classes;j?f.styleClasses=j:i&&(f.styleClasses=null);for(var k=!g||g.length!=f.styles.length||i!=j&&(!i||!j||i.bgClass!=j.bgClass||i.textClass!=j.textClass),l=0;!k&&l<g.length;++l)k=g[l]!=f.styles[l];k&&e.push(b.frontier),f.stateAfter=Of(b.mode,d)}else od(a,f.text,d),f.stateAfter=b.frontier%5==0?Of(b.mode,d):null;return++b.frontier,+new Date>c?(wa(a,a.options.workDelay),!0):void 0}),e.length&&ib(a,function(){for(var b=0;b<e.length;b++)pb(a,e[b],"text")})}}function ya(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=Dd(f,h-1);if(i.stateAfter&&(!c||h<=f.frontier))return h;var j=rg(i.text,null,a.options.tabSize);(null==e||d>j)&&(e=h-1,d=j)}return e}function za(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=ya(a,b,c),g=f>d.first&&Dd(d,f-1).stateAfter;return g=g?Of(d.mode,g):Pf(d.mode),d.iter(f,b,function(c){od(a,c.text,g);var h=f==b-1||f%5==0||f>=e.viewFrom&&f<e.viewTo;c.stateAfter=h?Of(d.mode,g):null,++f}),c&&(d.frontier=f),g}function Aa(a){return a.lineSpace.offsetTop}function Ba(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Ca(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=ve(a.measure,te("pre","x")),c=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,d={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return isNaN(d.left)||isNaN(d.right)||(a.cachedPaddingH=d),d}function Da(a,b,c){var d=a.options.lineWrapping,e=d&&a.display.scroller.clientWidth;if(!b.measure.heights||d&&b.measure.width!=e){var f=b.measure.heights=[];if(d){b.measure.width=e;for(var g=b.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var i=g[h],j=g[h+1];Math.abs(i.bottom-j.bottom)>2&&f.push((i.bottom+j.top)/2-c.top)}}f.push(c.bottom-c.top)}}function Ea(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var d=0;d<a.rest.length;d++)if(Hd(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function Fa(a,b){b=Zc(b);var c=Hd(b),d=a.display.externalMeasured=new mb(a.doc,b,c);d.lineN=c;var e=d.built=qd(a,d);return d.text=e.pre,ve(a.display.lineMeasure,e.pre),d}function Ga(a,b,c,d){return Ja(a,Ia(a,b),c,d)}function Ha(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[rb(a,b)];var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function Ia(a,b){var c=Hd(b),d=Ha(a,c);d&&!d.text?d=null:d&&d.changes&&H(a,d,c,F(a)),d||(d=Fa(a,b));var e=Ea(d,b,c);return{line:b,view:d,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function Ja(a,b,c,d,e){b.before&&(c=-1);var f,g=c+(d||"");return b.cache.hasOwnProperty(g)?f=b.cache[g]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(Da(a,b.view,b.rect),b.hasHeights=!0),f=Ka(a,b,c,d),f.bogus||(b.cache[g]=f)),{left:f.left,right:f.right,top:e?f.rtop:f.top,bottom:e?f.rbottom:f.bottom}}function Ka(a,b,c,d){for(var e,f,g,h,i=b.map,j=0;j<i.length;j+=3){var k=i[j],l=i[j+1];if(k>c?(f=0,g=1,h="left"):l>c?(f=c-k,g=f+1):(j==i.length-3||c==l&&i[j+3]>c)&&(g=l-k,f=g-1,c>=l&&(h="right")),null!=f){if(e=i[j+2],k==l&&d==(e.insertLeft?"left":"right")&&(h=d),"left"==d&&0==f)for(;j&&i[j-2]==i[j-3]&&i[j-1].insertLeft;)e=i[(j-=3)+2],h="left";if("right"==d&&f==l-k)for(;j<i.length-3&&i[j+3]==i[j+4]&&!i[j+5].insertLeft;)e=i[(j+=3)+2],h="right";break}}var m;if(3==e.nodeType){for(var j=0;4>j;j++){for(;f&&se(b.line.text.charAt(k+f));)--f;for(;l>k+g&&se(b.line.text.charAt(k+g));)++g;if(Ze&&9>$e&&0==f&&g==l-k)m=e.parentNode.getBoundingClientRect();else if(Ze&&a.options.lineWrapping){var n=ug(e,f,g).getClientRects();m=n.length?n["right"==d?n.length-1:0]:wf}else m=ug(e,f,g).getBoundingClientRect()||wf;if(m.left||m.right||0==f)break;g=f,f-=1,h="right"}Ze&&11>$e&&(m=La(a.display.measure,m))}else{f>0&&(h=d="right");var n;m=a.options.lineWrapping&&(n=e.getClientRects()).length>1?n["right"==d?n.length-1:0]:e.getBoundingClientRect()}if(Ze&&9>$e&&!f&&(!m||!m.left&&!m.right)){var o=e.parentNode.getClientRects()[0];m=o?{left:o.left,right:o.left+$a(a.display),top:o.top,bottom:o.bottom}:wf}for(var p=m.top-b.rect.top,q=m.bottom-b.rect.top,r=(p+q)/2,s=b.view.measure.heights,j=0;j<s.length-1&&!(r<s[j]);j++);var t=j?s[j-1]:0,u=s[j],v={left:("right"==h?m.right:m.left)-b.rect.left,right:("left"==h?m.left:m.right)-b.rect.left,top:t,bottom:u};return m.left||m.right||(v.bogus=!0),a.options.singleCursorHeightPerLine||(v.rtop=p,v.rbottom=q),v}function La(a,b){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Ie(a))return b;var c=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:b.left*c,right:b.right*c,top:b.top*d,bottom:b.bottom*d}}function Ma(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function Na(a){a.display.externalMeasure=null,ue(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Ma(a.display.view[b])}function Oa(a){Na(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function Pa(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Qa(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ra(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=ed(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=Jd(b);if("local"==d?g+=Aa(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=a.display.lineSpace.getBoundingClientRect();g+=h.top+("window"==d?0:Qa());var i=h.left+("window"==d?0:Pa());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function Sa(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=Pa(),e-=Qa();else if("local"==c||!c){var f=a.display.sizer.getBoundingClientRect();d+=f.left,e+=f.top}var g=a.display.lineSpace.getBoundingClientRect();return{left:d-g.left,top:e-g.top}}function Ta(a,b,c,d,e){return d||(d=Dd(a.doc,b.line)),Ra(a,d,Ga(a,d,b.ch,e),c)}function Ua(a,b,c,d,e,f){function g(b,g){var h=Ja(a,e,b,g?"right":"left",f);return g?h.left=h.right:h.right=h.left,Ra(a,d,h,c)}function h(a,b){var c=i[b],d=c.level%2;return a==Ke(c)&&b&&c.level<i[b-1].level?(c=i[--b],a=Le(c)-(c.level%2?0:1),d=!0):a==Le(c)&&b<i.length-1&&c.level<i[b+1].level&&(c=i[++b],a=Ke(c)-c.level%2,d=!1),d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||Dd(a.doc,b.line),e||(e=Ia(a,d));var i=Kd(d),j=b.ch;if(!i)return g(j);var k=Se(i,j),l=h(j,k);return null!=Ig&&(l.other=h(j,Ig)),l}function Va(a,b){var c=0,b=_(a.doc,b);a.options.lineWrapping||(c=$a(a.display)*b.ch);var d=Dd(a.doc,b.line),e=Jd(d)+Aa(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function Wa(a,b,c,d){var e=rf(a,b);return e.xRel=d,c&&(e.outside=!0),e}function Xa(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return Wa(d.first,0,!0,-1);var e=Id(d,c),f=d.first+d.size-1;if(e>f)return Wa(d.first+d.size-1,Dd(d,f).text.length,!0,1);0>b&&(b=0);for(var g=Dd(d,e);;){var h=Ya(a,g,e,b,c),i=Xc(g),j=i&&i.find(0,!0);if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=Hd(g=j.to.line)}}function Ya(a,b,c,d,e){function f(d){var e=Ua(a,rf(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-Jd(b),h=!1,i=2*a.display.wrapper.clientWidth,j=Ia(a,b),k=Kd(b),l=b.text.length,m=Me(b),n=Ne(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return Wa(c,n,r,1);for(;;){if(k?n==m||n==Ue(b,m,1):1>=n-m){for(var s=o>d||q-d>=d-o?m:n,t=d-(s==m?o:q);se(b.text.charAt(s));)++s;var u=Wa(c,s,s==m?p:r,-1>t?-1:t>1?1:0);return u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;v>x;++x)w=Ue(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function Za(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==tf){tf=te("pre");for(var b=0;49>b;++b)tf.appendChild(document.createTextNode("x")),tf.appendChild(te("br"));tf.appendChild(document.createTextNode("x"))}ve(a.measure,tf);var c=tf.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),ue(a.measure),c||1}function $a(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=te("span","xxxxxxxxxx"),c=te("pre",[b]);ve(a.measure,c);var d=b.getBoundingClientRect(),e=(d.right-d.left)/10;return e>2&&(a.cachedCharWidth=e),e||10}function _a(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++yf},xf?xf.ops.push(a.curOp):a.curOp.ownsGroup=xf={ops:[a.curOp],delayedCallbacks:[]}}function ab(a){var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c]();for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++](e.cm)}}while(c<b.length)}function bb(a){var b=a.curOp,c=b.ownsGroup;if(c)try{ab(c)}finally{xf=null;for(var d=0;d<c.ops.length;d++)c.ops[d].cm.curOp=null;cb(c)}}function cb(a){for(var b=a.ops,c=0;c<b.length;c++)db(b[c]);for(var c=0;c<b.length;c++)eb(b[c]);for(var c=0;c<b.length;c++)fb(b[c]);for(var c=0;c<b.length;c++)gb(b[c]);for(var c=0;c<b.length;c++)hb(b[c])}function db(a){var b=a.cm,c=b.display;a.updateMaxLine&&n(b),a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<c.viewFrom||a.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&b.options.lineWrapping,a.update=a.mustUpdate&&new x(b,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function eb(a){a.updatedDisplay=a.mustUpdate&&y(a.cm,a.update)}function fb(a){var b=a.cm,c=b.display;a.updatedDisplay&&D(b),a.barMeasure=q(b),c.maxLineChanged&&!b.options.lineWrapping&&(a.adjustWidthTo=Ga(b,c.maxLine,c.maxLine.text.length).left+3,a.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+a.adjustWidthTo+mg-c.scroller.clientWidth)),(a.updatedDisplay||a.selectionChanged)&&(a.newSelectionNodes=qa(b))}function gb(a){var b=a.cm;null!=a.adjustWidthTo&&(b.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<b.doc.scrollLeft&&Pb(b,Math.min(b.display.scroller.scrollLeft,a.maxScrollLeft),!0),b.display.maxLineChanged=!1),a.newSelectionNodes&&ra(b,a.newSelectionNodes),a.updatedDisplay&&B(b,a.barMeasure),(a.updatedDisplay||a.startHeight!=b.doc.height)&&r(b,a.barMeasure),a.selectionChanged&&va(b),b.state.focused&&a.updateInput&&yb(b,a.typing)}function hb(a){var b=a.cm,c=b.display,d=b.doc;if(null!=a.adjustWidthTo&&Math.abs(a.barMeasure.scrollWidth-b.display.scroller.scrollWidth)>1&&r(b),a.updatedDisplay&&z(b,a.update),null==c.wheelStartX||null==a.scrollTop&&null==a.scrollLeft&&!a.scrollToPos||(c.wheelStartX=c.wheelStartY=null),null!=a.scrollTop&&(c.scroller.scrollTop!=a.scrollTop||a.forceScroll)){var e=Math.max(0,Math.min(c.scroller.scrollHeight-c.scroller.clientHeight,a.scrollTop));c.scroller.scrollTop=c.scrollbarV.scrollTop=d.scrollTop=e}if(null!=a.scrollLeft&&(c.scroller.scrollLeft!=a.scrollLeft||a.forceScroll)){var f=Math.max(0,Math.min(c.scroller.scrollWidth-c.scroller.clientWidth,a.scrollLeft));c.scroller.scrollLeft=c.scrollbarH.scrollLeft=d.scrollLeft=f,t(b)}if(a.scrollToPos){var g=oc(b,_(d,a.scrollToPos.from),_(d,a.scrollToPos.to),a.scrollToPos.margin);a.scrollToPos.isCursor&&b.state.focused&&nc(b,g)}var h=a.maybeHiddenMarkers,i=a.maybeUnhiddenMarkers;if(h)for(var j=0;j<h.length;++j)h[j].lines.length||kg(h[j],"hide");if(i)for(var j=0;j<i.length;++j)i[j].lines.length&&kg(i[j],"unhide");c.wrapper.offsetHeight&&(d.scrollTop=b.display.scroller.scrollTop),a.updatedDisplay&&_e&&(b.options.lineWrapping&&C(b,a.barMeasure),a.barMeasure.scrollWidth>a.barMeasure.clientWidth&&a.barMeasure.scrollWidth<a.barMeasure.clientWidth+1&&!p(b)&&r(b)),a.changeObjs&&kg(b,"changes",b,a.changeObjs)}function ib(a,b){if(a.curOp)return b();_a(a);try{return b()}finally{bb(a)}}function jb(a,b){return function(){if(a.curOp)return b.apply(a,arguments);_a(a);try{return b.apply(a,arguments)}finally{bb(a)}}}function kb(a){return function(){if(this.curOp)return a.apply(this,arguments);_a(this);try{return a.apply(this,arguments)}finally{bb(this)}}}function lb(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);_a(b);try{return a.apply(this,arguments)}finally{bb(b)}}}function mb(a,b,c){this.line=b,this.rest=$c(b),this.size=this.rest?Hd(ke(this.rest))-c+1:1,this.node=this.text=null,this.hidden=bd(a,b)}function nb(a,b,c){for(var d,e=[],f=b;c>f;f=d){var g=new mb(a.doc,Dd(a.doc,f),f);d=f+g.size,e.push(g)}return e}function ob(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),d||(d=0);var e=a.display;if(d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=e.viewTo)qf&&_c(a.doc,b)<e.viewTo&&qb(a);else if(c<=e.viewFrom)qf&&ad(a.doc,c+d)>e.viewFrom?qb(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)qb(a);else if(b<=e.viewFrom){var f=sb(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):qb(a)}else if(c>=e.viewTo){var f=sb(a,b,b,-1);f?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):qb(a)}else{var g=sb(a,b,b,-1),h=sb(a,c,c+d,1);g&&h?(e.view=e.view.slice(0,g.index).concat(nb(a,g.lineN,h.lineN)).concat(e.view.slice(h.index)),e.viewTo+=d):qb(a)}var i=e.externalMeasured;i&&(c<i.lineN?i.lineN+=d:b<i.lineN+i.size&&(e.externalMeasured=null))}function pb(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;if(e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null),!(b<d.viewFrom||b>=d.viewTo)){var f=d.view[rb(a,b)];if(null!=f.node){var g=f.changes||(f.changes=[]);-1==le(g,c)&&g.push(c)}}}function qb(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function rb(a,b){if(b>=a.display.viewTo)return null;if(b-=a.display.viewFrom,0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function sb(a,b,c,d){var e,f=rb(a,b),g=a.display.view;if(!qf||c==a.doc.first+a.doc.size)return{index:f,lineN:c};for(var h=0,i=a.display.viewFrom;f>h;h++)i+=g[h].size;if(i!=b){if(d>0){if(f==g.length-1)return null;e=i+g[f].size-b,f++}else e=i-b;b+=e,c+=e}for(;_c(a.doc,c)!=c;){if(f==(0>d?0:g.length-1))return null;c+=d*g[f-(0>d?1:0)].size,f+=d}return{index:f,lineN:c}}function tb(a,b,c){var d=a.display,e=d.view;0==e.length||b>=d.viewTo||c<=d.viewFrom?(d.view=nb(a,b,c),d.viewFrom=b):(d.viewFrom>b?d.view=nb(a,b,d.viewFrom).concat(d.view):d.viewFrom<b&&(d.view=d.view.slice(rb(a,b))),d.viewFrom=b,d.viewTo<c?d.view=d.view.concat(nb(a,d.viewTo,c)):d.viewTo>c&&(d.view=d.view.slice(0,rb(a,c)))),d.viewTo=c}function ub(a){for(var b=a.display.view,c=0,d=0;d<b.length;d++){var e=b[d];e.hidden||e.node&&!e.changes||++c}return c}function vb(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){xb(a),a.state.focused&&vb(a)})}function wb(a){function b(){var d=xb(a);d||c?(a.display.pollingFast=!1,vb(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0,a.display.poll.set(20,b)}function xb(a){var b=a.display.input,c=a.display.prevInput,d=a.doc;if(!a.state.focused||Eg(b)&&!c||Bb(a)||a.options.disableInput)return!1;a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var e=b.value;if(e==c&&!a.somethingSelected())return!1;if(Ze&&$e>=9&&a.display.inputHasSelection===e||kf&&/[\uf700-\uf7ff]/.test(e))return yb(a),!1;var f=!a.curOp;f&&_a(a),a.display.shift=!1,8203!=e.charCodeAt(0)||d.sel!=a.display.selForContextMenu||c||(c="\u200b");for(var g=0,h=Math.min(c.length,e.length);h>g&&c.charCodeAt(g)==e.charCodeAt(g);)++g;var i=e.slice(g),j=Dg(i),k=null;a.state.pasteIncoming&&d.sel.ranges.length>1&&(zf&&zf.join("\n")==i?k=d.sel.ranges.length%zf.length==0&&me(zf,Dg):j.length==d.sel.ranges.length&&(k=me(j,function(a){return[a]})));for(var l=d.sel.ranges.length-1;l>=0;l--){var m=d.sel.ranges[l],n=m.from(),o=m.to();g<c.length?n=rf(n.line,n.ch-(c.length-g)):a.state.overwrite&&m.empty()&&!a.state.pasteIncoming&&(o=rf(o.line,Math.min(Dd(d,o.line).text.length,o.ch+ke(j).length)));var p=a.curOp.updateInput,q={from:n,to:o,text:k?k[l%k.length]:j,origin:a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input"};if(gc(a.doc,q),be(a,"inputRead",a,q),i&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&m.head.ch<100&&(!l||d.sel.ranges[l-1].head.line!=m.head.line)){var r=a.getModeAt(m.head),s=Ff(q);if(r.electricChars){for(var t=0;t<r.electricChars.length;t++)if(i.indexOf(r.electricChars.charAt(t))>-1){uc(a,s.line,"smart");break}}else r.electricInput&&r.electricInput.test(Dd(d,s.line).text.slice(0,s.ch))&&uc(a,s.line,"smart")}}return sc(a),a.curOp.updateInput=p,a.curOp.typing=!0,e.length>1e3||e.indexOf("\n")>-1?b.value=a.display.prevInput="":a.display.prevInput=e,f&&bb(a),a.state.pasteIncoming=a.state.cutIncoming=!1,!0}function yb(a,b){var c,d,e=a.doc;if(a.somethingSelected()){a.display.prevInput="";var f=e.sel.primary();c=Fg&&(f.to().line-f.from().line>100||(d=a.getSelection()).length>1e3);var g=c?"-":d||a.getSelection();a.display.input.value=g,a.state.focused&&tg(a.display.input),Ze&&$e>=9&&(a.display.inputHasSelection=g)}else b||(a.display.prevInput=a.display.input.value="",Ze&&$e>=9&&(a.display.inputHasSelection=null));a.display.inaccurateSelection=c}function zb(a){"nocursor"==a.options.readOnly||jf&&xe()==a.display.input||a.display.input.focus()}function Ab(a){a.state.focused||(zb(a),Zb(a))}function Bb(a){return a.options.readOnly||a.doc.cantEdit}function Cb(a){function b(){a.state.focused&&setTimeout(pe(zb,a),0)}function c(b){de(a,b)||hg(b)}function d(b){if(a.somethingSelected())zf=a.getSelections(),e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=!1,e.input.value=zf.join("\n"),tg(e.input));else{for(var c=[],d=[],f=0;f<a.doc.sel.ranges.length;f++){var g=a.doc.sel.ranges[f].head.line,h={anchor:rf(g,0),head:rf(g+1,0)};d.push(h),c.push(a.getRange(h.anchor,h.head))}"cut"==b.type?a.setSelections(d,null,og):(e.prevInput="",e.input.value=c.join("\n"),tg(e.input)),zf=c}"cut"==b.type&&(a.state.cutIncoming=!0)}var e=a.display;ig(e.scroller,"mousedown",jb(a,Gb)),Ze&&11>$e?ig(e.scroller,"dblclick",jb(a,function(b){if(!de(a,b)){var c=Fb(a,b);if(c&&!Lb(a,b)&&!Eb(a.display,b)){fg(b);var d=a.findWordAt(c);ea(a.doc,d.anchor,d.head)}}})):ig(e.scroller,"dblclick",function(b){de(a,b)||fg(b)}),ig(e.lineSpace,"selectstart",function(a){Eb(e,a)||fg(a)}),of||ig(e.scroller,"contextmenu",function(b){_b(a,b)}),ig(e.scroller,"scroll",function(){e.scroller.clientHeight&&(Ob(a,e.scroller.scrollTop),Pb(a,e.scroller.scrollLeft,!0),kg(a,"scroll",a))}),ig(e.scrollbarV,"scroll",function(){e.scroller.clientHeight&&Ob(a,e.scrollbarV.scrollTop)}),ig(e.scrollbarH,"scroll",function(){e.scroller.clientHeight&&Pb(a,e.scrollbarH.scrollLeft)}),ig(e.scroller,"mousewheel",function(b){Qb(a,b)}),ig(e.scroller,"DOMMouseScroll",function(b){Qb(a,b)}),ig(e.scrollbarH,"mousedown",b),ig(e.scrollbarV,"mousedown",b),ig(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),ig(e.input,"keyup",function(b){Xb.call(a,b)}),ig(e.input,"input",function(){Ze&&$e>=9&&a.display.inputHasSelection&&(a.display.inputHasSelection=null),wb(a)}),ig(e.input,"keydown",jb(a,Vb)),ig(e.input,"keypress",jb(a,Yb)),ig(e.input,"focus",pe(Zb,a)),ig(e.input,"blur",pe($b,a)),a.options.dragDrop&&(ig(e.scroller,"dragstart",function(b){Nb(a,b)}),ig(e.scroller,"dragenter",c),ig(e.scroller,"dragover",c),ig(e.scroller,"drop",jb(a,Mb))),ig(e.scroller,"paste",function(b){Eb(e,b)||(a.state.pasteIncoming=!0,zb(a),wb(a))}),ig(e.input,"paste",function(){if(_e&&!a.state.fakedLastChar&&!(new Date-a.state.lastMiddleDown<200)){var b=e.input.selectionStart,c=e.input.selectionEnd;e.input.value+="$",e.input.selectionEnd=c,e.input.selectionStart=b,a.state.fakedLastChar=!0}a.state.pasteIncoming=!0,wb(a)}),ig(e.input,"cut",d),ig(e.input,"copy",d),ef&&ig(e.sizer,"mouseup",function(){xe()==e.input&&e.input.blur(),zb(a)})}function Db(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,a.setSize()}function Eb(a,b){for(var c=_d(b);c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0;
}function Fb(a,b,c,d){var e=a.display;if(!c){var f=_d(b);if(f==e.scrollbarH||f==e.scrollbarV||f==e.scrollbarFiller||f==e.gutterFiller)return null}var g,h,i=e.lineSpace.getBoundingClientRect();try{g=b.clientX-i.left,h=b.clientY-i.top}catch(b){return null}var j,k=Xa(a,g,h);if(d&&1==k.xRel&&(j=Dd(a.doc,k.line).text).length==k.ch){var l=rg(j,j.length,a.options.tabSize)-j.length;k=rf(k.line,Math.max(0,Math.round((g-Ca(a.display).left)/$a(a.display))-l))}return k}function Gb(a){if(!de(this,a)){var b=this,c=b.display;if(c.shift=a.shiftKey,Eb(c,a))return void(_e||(c.scroller.draggable=!1,setTimeout(function(){c.scroller.draggable=!0},100)));if(!Lb(b,a)){var d=Fb(b,a);switch(window.focus(),ae(a)){case 1:d?Hb(b,a,d):_d(a)==c.scroller&&fg(a);break;case 2:_e&&(b.state.lastMiddleDown=+new Date),d&&ea(b.doc,d),setTimeout(pe(zb,b),20),fg(a);break;case 3:of&&_b(b,a)}}}}function Hb(a,b,c){setTimeout(pe(Ab,a),0);var d,e=+new Date;vf&&vf.time>e-400&&0==sf(vf.pos,c)?d="triple":uf&&uf.time>e-400&&0==sf(uf.pos,c)?(d="double",vf={time:e,pos:c}):(d="single",uf={time:e,pos:c});var f=a.doc.sel,g=kf?b.metaKey:b.ctrlKey;a.options.dragDrop&&Cg&&!Bb(a)&&"single"==d&&f.contains(c)>-1&&f.somethingSelected()?Ib(a,b,c,g):Jb(a,b,c,d,g)}function Ib(a,b,c,d){var e=a.display,f=jb(a,function(g){_e&&(e.scroller.draggable=!1),a.state.draggingText=!1,jg(document,"mouseup",f),jg(e.scroller,"drop",f),Math.abs(b.clientX-g.clientX)+Math.abs(b.clientY-g.clientY)<10&&(fg(g),d||ea(a.doc,c),zb(a),Ze&&9==$e&&setTimeout(function(){document.body.focus(),zb(a)},20))});_e&&(e.scroller.draggable=!0),a.state.draggingText=f,e.scroller.dragDrop&&e.scroller.dragDrop(),ig(document,"mouseup",f),ig(e.scroller,"drop",f)}function Jb(a,b,c,d,e){function f(b){if(0!=sf(p,b))if(p=b,"rect"==d){for(var e=[],f=a.options.tabSize,g=rg(Dd(j,c.line).text,c.ch,f),h=rg(Dd(j,b.line).text,b.ch,f),i=Math.min(g,h),n=Math.max(g,h),o=Math.min(c.line,b.line),q=Math.min(a.lastLine(),Math.max(c.line,b.line));q>=o;o++){var r=Dd(j,o).text,s=ie(r,i,f);i==n?e.push(new X(rf(o,s),rf(o,s))):r.length>s&&e.push(new X(rf(o,s),rf(o,ie(r,n,f))))}e.length||e.push(new X(c,c)),ka(j,Y(m.ranges.slice(0,l).concat(e),l),{origin:"*mouse",scroll:!1}),a.scrollIntoView(b)}else{var t=k,u=t.anchor,v=b;if("single"!=d){if("double"==d)var w=a.findWordAt(b);else var w=new X(rf(b.line,0),_(j,rf(b.line+1,0)));sf(w.anchor,u)>0?(v=w.head,u=V(t.from(),w.anchor)):(v=w.anchor,u=U(t.to(),w.head))}var e=m.ranges.slice(0);e[l]=new X(_(j,u),v),ka(j,Y(e,l),pg)}}function g(b){var c=++r,e=Fb(a,b,!0,"rect"==d);if(e)if(0!=sf(e,p)){Ab(a),f(e);var h=s(i,j);(e.line>=h.to||e.line<h.from)&&setTimeout(jb(a,function(){r==c&&g(b)}),150)}else{var k=b.clientY<q.top?-20:b.clientY>q.bottom?20:0;k&&setTimeout(jb(a,function(){r==c&&(i.scroller.scrollTop+=k,g(b))}),50)}}function h(b){r=1/0,fg(b),zb(a),jg(document,"mousemove",t),jg(document,"mouseup",u),j.history.lastSelOrigin=null}var i=a.display,j=a.doc;fg(b);var k,l,m=j.sel;if(e&&!b.shiftKey?(l=j.sel.contains(c),k=l>-1?j.sel.ranges[l]:new X(c,c)):k=j.sel.primary(),b.altKey)d="rect",e||(k=new X(c,c)),c=Fb(a,b,!0,!0),l=-1;else if("double"==d){var n=a.findWordAt(c);k=a.display.shift||j.extend?da(j,k,n.anchor,n.head):n}else if("triple"==d){var o=new X(rf(c.line,0),_(j,rf(c.line+1,0)));k=a.display.shift||j.extend?da(j,k,o.anchor,o.head):o}else k=da(j,k,c);e?l>-1?ga(j,l,k,pg):(l=j.sel.ranges.length,ka(j,Y(j.sel.ranges.concat([k]),l),{scroll:!1,origin:"*mouse"})):(l=0,ka(j,new W([k],0),pg),m=j.sel);var p=c,q=i.wrapper.getBoundingClientRect(),r=0,t=jb(a,function(a){ae(a)?g(a):h(a)}),u=jb(a,h);ig(document,"mousemove",t),ig(document,"mouseup",u)}function Kb(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(b){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&fg(b);var h=a.display,i=h.lineDiv.getBoundingClientRect();if(g>i.bottom||!fe(a,c))return $d(b);g-=i.top-h.viewOffset;for(var j=0;j<a.options.gutters.length;++j){var k=h.gutters.childNodes[j];if(k&&k.getBoundingClientRect().right>=f){var l=Id(a.doc,g),m=a.options.gutters[j];return e(a,c,a,l,m,b),$d(b)}}}function Lb(a,b){return Kb(a,b,"gutterClick",!0,be)}function Mb(a){var b=this;if(!de(b,a)&&!Eb(b.display,a)){fg(a),Ze&&(Af=+new Date);var c=Fb(b,a,!0),d=a.dataTransfer.files;if(c&&!Bb(b))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){var h=new FileReader;h.onload=jb(b,function(){if(f[d]=h.result,++g==e){c=_(b.doc,c);var a={from:c,to:c,text:Dg(f.join("\n")),origin:"paste"};gc(b.doc,a),ja(b.doc,Z(c,Ff(a)))}}),h.readAsText(a)},i=0;e>i;++i)h(d[i],i);else{if(b.state.draggingText&&b.doc.sel.contains(c)>-1)return b.state.draggingText(a),void setTimeout(pe(zb,b),20);try{var f=a.dataTransfer.getData("Text");if(f){if(b.state.draggingText&&!(kf?a.metaKey:a.ctrlKey))var j=b.listSelections();if(la(b.doc,Z(c,c)),j)for(var i=0;i<j.length;++i)mc(b.doc,"",j[i].anchor,j[i].head,"drag");b.replaceSelection(f,"around","paste"),zb(b)}}catch(a){}}}}function Nb(a,b){if(Ze&&(!a.state.draggingText||+new Date-Af<100))return void hg(b);if(!de(a,b)&&!Eb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!df)){var c=te("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",cf&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop),b.dataTransfer.setDragImage(c,0,0),cf&&c.parentNode.removeChild(c)}}function Ob(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,We||A(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),We&&A(a),wa(a,100))}function Pb(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,t(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function Qb(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail),null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&kf&&_e)a:for(var g=b.target,h=e.view;g!=f;g=g.parentNode)for(var i=0;i<h.length;i++)if(h[i].node==g){a.display.currentWheelTarget=g;break a}if(c&&!We&&!cf&&null!=Cf)return d&&Ob(a,Math.max(0,Math.min(f.scrollTop+d*Cf,f.scrollHeight-f.clientHeight))),Pb(a,Math.max(0,Math.min(f.scrollLeft+c*Cf,f.scrollWidth-f.clientWidth))),fg(b),void(e.wheelStartX=null);if(d&&null!=Cf){var j=d*Cf,k=a.doc.scrollTop,l=k+e.wrapper.clientHeight;0>j?k=Math.max(0,k+j-50):l=Math.min(a.doc.height,l+j+50),A(a,{top:k,bottom:l})}20>Bf&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,c=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null,c&&(Cf=(Cf*Bf+c)/(Bf+1),++Bf)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}}function Rb(a,b,c){if("string"==typeof b&&(b=Qf[b],!b))return!1;a.display.pollingFast&&xb(a)&&(a.display.pollingFast=!1);var d=a.display.shift,e=!1;try{Bb(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=ng}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Sb(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function Tb(a,b){var c=Ac(a.options.keyMap),d=c.auto;clearTimeout(Df),d&&!Tf(b)&&(Df=setTimeout(function(){Ac(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,h(a))},50));var e=Uf(b,!0),f=!1;if(!e)return!1;var g=Sb(a);return f=b.shiftKey?Sf("Shift-"+e,g,function(b){return Rb(a,b,!0)})||Sf(e,g,function(b){return("string"==typeof b?/^go[A-Z]/.test(b):b.motion)?Rb(a,b):void 0}):Sf(e,g,function(b){return Rb(a,b)}),f&&(fg(b),va(a),be(a,"keyHandled",a,e,b)),f}function Ub(a,b,c){var d=Sf("'"+c+"'",Sb(a),function(b){return Rb(a,b,!0)});return d&&(fg(b),va(a),be(a,"keyHandled",a,"'"+c+"'",b)),d}function Vb(a){var b=this;if(Ab(b),!de(b,a)){Ze&&11>$e&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.display.shift=16==c||a.shiftKey;var d=Tb(b,a);cf&&(Ef=d?c:null,!d&&88==c&&!Fg&&(kf?a.metaKey:a.ctrlKey)&&b.replaceSelection("",null,"cut")),18!=c||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||Wb(b)}}function Wb(a){function b(a){18!=a.keyCode&&a.altKey||(ze(c,"CodeMirror-crosshair"),jg(document,"keyup",b),jg(document,"mouseover",b))}var c=a.display.lineDiv;Ae(c,"CodeMirror-crosshair"),ig(document,"keyup",b),ig(document,"mouseover",b)}function Xb(a){16==a.keyCode&&(this.doc.sel.shift=!1),de(this,a)}function Yb(a){var b=this;if(!(de(b,a)||a.ctrlKey&&!a.altKey||kf&&a.metaKey)){var c=a.keyCode,d=a.charCode;if(cf&&c==Ef)return Ef=null,void fg(a);if(!(cf&&(!a.which||a.which<10)||ef)||!Tb(b,a)){var e=String.fromCharCode(null==d?c:d);Ub(b,a,e)||(Ze&&$e>=9&&(b.display.inputHasSelection=null),wb(b))}}}function Zb(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(kg(a,"focus",a),a.state.focused=!0,Ae(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(yb(a),_e&&setTimeout(pe(yb,a,!0),0))),vb(a),va(a))}function $b(a){a.state.focused&&(kg(a,"blur",a),a.state.focused=!1,ze(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150)}function _b(a,b){function c(){if(null!=e.input.selectionStart){var b=a.somethingSelected(),c=e.input.value="\u200b"+(b?e.input.value:"");e.prevInput=b?"":"\u200b",e.input.selectionStart=1,e.input.selectionEnd=c.length,e.selForContextMenu=a.doc.sel}}function d(){if(e.inputDiv.style.position="relative",e.input.style.cssText=i,Ze&&9>$e&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=g),vb(a),null!=e.input.selectionStart){(!Ze||Ze&&9>$e)&&c();var b=0,d=function(){e.selForContextMenu==a.doc.sel&&0==e.input.selectionStart?jb(a,Qf.selectAll)(a):b++<10?e.detectingSelectAll=setTimeout(d,500):yb(a)};e.detectingSelectAll=setTimeout(d,200)}}if(!de(a,b,"contextmenu")){var e=a.display;if(!Eb(e,b)&&!ac(a,b)){var f=Fb(a,b),g=e.scroller.scrollTop;if(f&&!cf){var h=a.options.resetSelectionOnContextMenu;h&&-1==a.doc.sel.contains(f)&&jb(a,ka)(a.doc,Z(f),og);var i=e.input.style.cssText;if(e.inputDiv.style.position="absolute",e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: "+(Ze?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",_e)var j=window.scrollY;if(zb(a),_e&&window.scrollTo(null,j),yb(a),a.somethingSelected()||(e.input.value=e.prevInput=" "),e.selForContextMenu=a.doc.sel,clearTimeout(e.detectingSelectAll),Ze&&$e>=9&&c(),of){hg(b);var k=function(){jg(window,"mouseup",k),setTimeout(d,20)};ig(window,"mouseup",k)}else setTimeout(d,50)}}}}function ac(a,b){return fe(a,"gutterContextMenu")?Kb(a,b,"gutterContextMenu",!1,kg):!1}function bc(a,b){if(sf(a,b.from)<0)return a;if(sf(a,b.to)<=0)return Ff(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=Ff(b).ch-b.to.ch),rf(c,d)}function cc(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new X(bc(e.anchor,b),bc(e.head,b)))}return Y(c,a.sel.primIndex)}function dc(a,b,c){return a.line==b.line?rf(c.line,a.ch-b.ch+c.ch):rf(c.line+(a.line-b.line),a.ch)}function ec(a,b,c){for(var d=[],e=rf(a.first,0),f=e,g=0;g<b.length;g++){var h=b[g],i=dc(h.from,e,f),j=dc(Ff(h),e,f);if(e=h.to,f=j,"around"==c){var k=a.sel.ranges[g],l=sf(k.head,k.anchor)<0;d[g]=new X(l?j:i,l?i:j)}else d[g]=new X(i,i)}return new W(d,a.sel.primIndex)}function fc(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(d.update=function(b,c,d,e){b&&(this.from=_(a,b)),c&&(this.to=_(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)}),kg(a,"beforeChange",a,d),a.cm&&kg(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function gc(a,b,c){if(a.cm){if(!a.cm.curOp)return jb(a.cm,gc)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(fe(a,"beforeChange")||a.cm&&fe(a.cm,"beforeChange"))||(b=fc(a,b,!0))){var d=pf&&!c&&Pc(a,b.from,b.to);if(d)for(var e=d.length-1;e>=0;--e)hc(a,{from:d[e].from,to:d[e].to,text:e?[""]:b.text});else hc(a,b)}}function hc(a,b){if(1!=b.text.length||""!=b.text[0]||0!=sf(b.from,b.to)){var c=cc(a,b);Pd(a,b,c,a.cm?a.cm.curOp.id:NaN),kc(a,b,c,Mc(a,b));var d=[];Bd(a,function(a,c){c||-1!=le(d,a.history)||(Zd(a.history,b),d.push(a.history)),kc(a,b,null,Mc(a,b))})}}function ic(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d,e=a.history,f=a.sel,g="undo"==b?e.done:e.undone,h="undo"==b?e.undone:e.done,i=0;i<g.length&&(d=g[i],c?!d.ranges||d.equals(a.sel):d.ranges);i++);if(i!=g.length){for(e.lastOrigin=e.lastSelOrigin=null;d=g.pop(),d.ranges;){if(Sd(d,h),c&&!d.equals(a.sel))return void ka(a,d,{clearRedo:!1});f=d}var j=[];Sd(f,h),h.push({changes:j,generation:e.generation}),e.generation=d.generation||++e.maxGeneration;for(var k=fe(a,"beforeChange")||a.cm&&fe(a.cm,"beforeChange"),i=d.changes.length-1;i>=0;--i){var l=d.changes[i];if(l.origin=b,k&&!fc(a,l,!1))return void(g.length=0);j.push(Md(a,l));var m=i?cc(a,l):ke(g);kc(a,l,m,Oc(a,l)),!i&&a.cm&&a.cm.scrollIntoView({from:l.from,to:Ff(l)});var n=[];Bd(a,function(a,b){b||-1!=le(n,a.history)||(Zd(a.history,l),n.push(a.history)),kc(a,l,null,Oc(a,l))})}}}}function jc(a,b){if(0!=b&&(a.first+=b,a.sel=new W(me(a.sel.ranges,function(a){return new X(rf(a.anchor.line+b,a.anchor.ch),rf(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){ob(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)pb(a.cm,d,"gutter")}}function kc(a,b,c,d){if(a.cm&&!a.cm.curOp)return jb(a.cm,kc)(a,b,c,d);if(b.to.line<a.first)return void jc(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);jc(a,e),b={from:rf(a.first,0),to:rf(b.to.line+e,b.to.ch),text:[ke(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:rf(f,Dd(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=Ed(a,b.from,b.to),c||(c=cc(a,b)),a.cm?lc(a.cm,b,d):yd(a,b,d),la(a,c,og)}}function lc(a,b,c){var d=a.doc,e=a.display,g=b.from,h=b.to,i=!1,j=g.line;a.options.lineWrapping||(j=Hd(Zc(Dd(d,g.line))),d.iter(j,h.line+1,function(a){return a==e.maxLine?(i=!0,!0):void 0})),d.sel.contains(b.from,b.to)>-1&&ee(a),yd(d,b,c,f(a)),a.options.lineWrapping||(d.iter(j,g.line+b.text.length,function(a){var b=m(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,i=!1)}),i&&(a.curOp.updateMaxLine=!0)),d.frontier=Math.min(d.frontier,g.line),wa(a,400);var k=b.text.length-(h.line-g.line)-1;g.line!=h.line||1!=b.text.length||xd(a.doc,b)?ob(a,g.line,h.line+1,k):pb(a,g.line,"text");var l=fe(a,"changes"),n=fe(a,"change");if(n||l){var o={from:g,to:h,text:b.text,removed:b.removed,origin:b.origin};n&&be(a,"change",a,o),l&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(o)}a.display.selForContextMenu=null}function mc(a,b,c,d,e){if(d||(d=c),sf(d,c)<0){var f=d;d=c,c=f}"string"==typeof b&&(b=Dg(b)),gc(a,{from:c,to:d,text:b,origin:e})}function nc(a,b){var c=a.display,d=c.sizer.getBoundingClientRect(),e=null;if(b.top+d.top<0?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!gf){var f=te("div","\u200b",null,"position: absolute; top: "+(b.top-c.viewOffset-Aa(a.display))+"px; height: "+(b.bottom-b.top+mg)+"px; left: "+b.left+"px; width: 2px;");a.display.lineSpace.appendChild(f),f.scrollIntoView(e),a.display.lineSpace.removeChild(f)}}function oc(a,b,c,d){for(null==d&&(d=0);;){var e=!1,f=Ua(a,b),g=c&&c!=b?Ua(a,c):f,h=qc(a,Math.min(f.left,g.left),Math.min(f.top,g.top)-d,Math.max(f.left,g.left),Math.max(f.bottom,g.bottom)+d),i=a.doc.scrollTop,j=a.doc.scrollLeft;if(null!=h.scrollTop&&(Ob(a,h.scrollTop),Math.abs(a.doc.scrollTop-i)>1&&(e=!0)),null!=h.scrollLeft&&(Pb(a,h.scrollLeft),Math.abs(a.doc.scrollLeft-j)>1&&(e=!0)),!e)return f}}function pc(a,b,c,d,e){var f=qc(a,b,c,d,e);null!=f.scrollTop&&Ob(a,f.scrollTop),null!=f.scrollLeft&&Pb(a,f.scrollLeft)}function qc(a,b,c,d,e){var f=a.display,g=Za(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,i=f.scroller.clientHeight-mg,j={};e-c>i&&(e=c+i);var k=a.doc.height+Ba(f),l=g>c,m=e>k-g;if(h>c)j.scrollTop=l?0:c;else if(e>h+i){var n=Math.min(c,(m?k:e)-i);n!=h&&(j.scrollTop=n)}var o=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft,p=f.scroller.clientWidth-mg-f.gutters.offsetWidth,q=d-b>p;return q&&(d=c+i),10>b?j.scrollLeft=0:o>b?j.scrollLeft=Math.max(0,b-(q?0:10)):d>p+o-3&&(j.scrollLeft=d+(q?0:10)-p),j}function rc(a,b,c){(null!=b||null!=c)&&tc(a),null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b),null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function sc(a){tc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?rf(b.line,b.ch-1):b,d=rf(b.line,b.ch+1)),a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function tc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Va(a,b.from),d=Va(a,b.to),e=qc(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(e.scrollLeft,e.scrollTop)}}function uc(a,b,c,d){var e,f=a.doc;null==c&&(c="add"),"smart"==c&&(f.mode.indent?e=za(a,b):c="prev");var g=a.options.tabSize,h=Dd(f,b),i=rg(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var j,k=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&(j=f.mode.indent(e,h.text.slice(k.length),h.text),j==ng||j>150)){if(!d)return;c="prev"}}else j=0,c="not";"prev"==c?j=b>f.first?rg(Dd(f,b-1).text,null,g):0:"add"==c?j=i+a.options.indentUnit:"subtract"==c?j=i-a.options.indentUnit:"number"==typeof c&&(j=i+c),j=Math.max(0,j);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(j/g);n;--n)m+=g,l+="	";if(j>m&&(l+=je(j-m)),l!=k)mc(f,l,rf(b,0),rf(b,k.length),"+input");else for(var n=0;n<f.sel.ranges.length;n++){var o=f.sel.ranges[n];if(o.head.line==b&&o.head.ch<k.length){var m=rf(b,k.length);ga(f,n,new X(m,m));break}}h.stateAfter=null}function vc(a,b,c,d){var e=b,f=b;return"number"==typeof b?f=Dd(a,$(a,b)):e=Hd(b),null==e?null:(d(f,e)&&a.cm&&pb(a.cm,e,c),f)}function wc(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&sf(f.from,ke(d).to)<=0;){var g=d.pop();if(sf(g.from,f.from)<0){f.from=g.from;break}}d.push(f)}ib(a,function(){for(var b=d.length-1;b>=0;b--)mc(a.doc,"",d[b].from,d[b].to,"+delete");sc(a)})}function xc(a,b,c,d,e){function f(){var b=h+c;return b<a.first||b>=a.first+a.size?l=!1:(h=b,k=Dd(a,b))}function g(a){var b=(e?Ue:Ve)(k,i,c,!0);if(null==b){if(a||!f())return l=!1;i=e?(0>c?Ne:Me)(k):0>c?k.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=c,k=Dd(a,h),l=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var m=null,n="group"==d,o=a.cm&&a.cm.getHelper(b,"wordChars"),p=!0;!(0>c)||g(!p);p=!1){var q=k.text.charAt(i)||"\n",r=qe(q,o)?"w":n&&"\n"==q?"n":!n||/\s/.test(q)?null:"p";if(!n||p||r||(r="s"),m&&m!=r){0>c&&(c=1,g());break}if(r&&(m=r),c>0&&!g(!p))break}var s=pa(a,rf(h,i),j,!0);return l||(s.hitSide=!0),s}function yc(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(0>c?1.5:.5)*Za(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=Xa(a,g,e);if(!i.outside)break;if(0>c?0>=e:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function zc(b,c,d,e){a.defaults[b]=c,d&&(Hf[b]=e?function(a,b,c){c!=If&&d(a,b,c)}:d)}function Ac(a){return"string"==typeof a?Rf[a]:a}function Bc(a,b,c,d,e){if(d&&d.shared)return Cc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return jb(a.cm,Bc)(a,b,c,d,e);var f=new Wf(a,e),g=sf(b,c);if(d&&oe(d,f,!1),g>0||0==g&&f.clearWhenEmpty!==!1)return f;if(f.replacedWith&&(f.collapsed=!0,f.widgetNode=te("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.widgetNode.ignoreEvents=!0),d.insertLeft&&(f.widgetNode.insertLeft=!0)),f.collapsed){if(Yc(a,b.line,b,c,f)||b.line!=c.line&&Yc(a,c.line,b,c,f))throw new Error("Inserting collapsed marker partially overlapping an existing one");qf=!0}f.addToHistory&&Pd(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var h,i=b.line,j=a.cm;if(a.iter(i,c.line+1,function(a){j&&f.collapsed&&!j.options.lineWrapping&&Zc(a)==j.display.maxLine&&(h=!0),f.collapsed&&i!=b.line&&Gd(a,0),Jc(a,new Gc(f,i==b.line?b.ch:null,i==c.line?c.ch:null)),++i}),f.collapsed&&a.iter(b.line,c.line+1,function(b){bd(a,b)&&Gd(b,0)}),f.clearOnEnter&&ig(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(pf=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed&&(f.id=++Xf,f.atomic=!0),j){if(h&&(j.curOp.updateMaxLine=!0),f.collapsed)ob(j,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle)for(var k=b.line;k<=c.line;k++)pb(j,k,"text");f.atomic&&na(j.doc),be(j,"markerAdded",j,f)}return f}function Cc(a,b,c,d,e){d=oe(d),d.shared=!1;var f=[Bc(a,b,c,d,e)],g=f[0],h=d.widgetNode;return Bd(a,function(a){h&&(d.widgetNode=h.cloneNode(!0)),f.push(Bc(a,_(a,b),_(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=ke(f)}),new Yf(f,g)}function Dc(a){return a.findMarks(rf(a.first,0),a.clipPos(rf(a.lastLine())),function(a){return a.parent})}function Ec(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.find(),f=a.clipPos(e.from),g=a.clipPos(e.to);if(sf(f,g)){var h=Bc(a,f,g,d.primary,d.primary.type);d.markers.push(h),h.parent=d}}}function Fc(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Bd(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==le(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function Gc(a,b,c){this.marker=a,this.from=b,this.to=c}function Hc(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Ic(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Jc(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Kc(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||f.from==b&&"bookmark"==g.type&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push(new Gc(g,f.from,i?null:f.to))}}return d}function Lc(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||f.from==b&&"bookmark"==g.type&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push(new Gc(g,i?null:f.from-b,null==f.to?null:f.to-b))}}return d}function Mc(a,b){var c=ba(a,b.from.line)&&Dd(a,b.from.line).markedSpans,d=ba(a,b.to.line)&&Dd(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==sf(b.from,b.to),h=Kc(c,e,g),i=Lc(d,f,g),j=1==b.text.length,k=ke(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=Hc(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=Hc(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}h&&(h=Nc(h)),i&&i!=h&&(i=Nc(i));var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push(new Gc(h[l].marker,null,null));for(var l=0;q>l;++l)o.push(p);o.push(i)}return o}function Nc(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&a.splice(b--,1)}return a.length?a:null}function Oc(a,b){var c=Vd(a,b),d=Mc(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function Pc(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=le(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(0),i=0;i<e.length;++i){var j=e[i];if(!(sf(j.to,h.from)<0||sf(j.from,h.to)>0)){var k=[i,1],l=sf(j.from,h.from),m=sf(j.to,h.to);(0>l||!g.inclusiveLeft&&!l)&&k.push({from:j.from,to:h.from}),(m>0||!g.inclusiveRight&&!m)&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function Qc(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Rc(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Sc(a){return a.inclusiveLeft?-1:0}function Tc(a){return a.inclusiveRight?1:0}function Uc(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=sf(d.from,e.from)||Sc(a)-Sc(b);if(f)return-f;var g=sf(d.to,e.to)||Tc(a)-Tc(b);return g?g:b.id-a.id}function Vc(a,b){var c,d=qf&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!c||Uc(c,e.marker)<0)&&(c=e.marker);return c}function Wc(a){return Vc(a,!0)}function Xc(a){return Vc(a,!1)}function Yc(a,b,c,d,e){var f=Dd(a,b),g=qf&&f.markedSpans;if(g)for(var h=0;h<g.length;++h){var i=g[h];if(i.marker.collapsed){var j=i.marker.find(0),k=sf(j.from,c)||Sc(i.marker)-Sc(e),l=sf(j.to,d)||Tc(i.marker)-Tc(e);if(!(k>=0&&0>=l||0>=k&&l>=0)&&(0>=k&&(sf(j.to,c)>0||i.marker.inclusiveRight&&e.inclusiveLeft)||k>=0&&(sf(j.from,d)<0||i.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function Zc(a){for(var b;b=Wc(a);)a=b.find(-1,!0).line;return a}function $c(a){for(var b,c;b=Xc(a);)a=b.find(1,!0).line,(c||(c=[])).push(a);return c}function _c(a,b){var c=Dd(a,b),d=Zc(c);return c==d?b:Hd(d)}function ad(a,b){if(b>a.lastLine())return b;var c,d=Dd(a,b);if(!bd(a,d))return b;for(;c=Xc(d);)d=c.find(1,!0).line;return Hd(d)+1}function bd(a,b){var c=qf&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&cd(a,b,d))return!0}}function cd(a,b,c){if(null==c.to){var d=c.marker.find(1,!0);return cd(a,d.line,Hc(d.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var e,f=0;f<b.markedSpans.length;++f)if(e=b.markedSpans[f],e.marker.collapsed&&!e.marker.widgetNode&&e.from==c.to&&(null==e.to||e.to!=c.from)&&(e.marker.inclusiveLeft||c.marker.inclusiveRight)&&cd(a,b,e))return!0}function dd(a,b,c){Jd(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&rc(a,null,c)}function ed(a){if(null!=a.height)return a.height;if(!we(document.body,a.node)){var b="position: relative;";a.coverGutter&&(b+="margin-left: -"+a.cm.getGutterElement().offsetWidth+"px;"),ve(a.cm.display.measure,te("div",[a.node],null,b))}return a.height=a.node.offsetHeight}function fd(a,b,c,d){var e=new Zf(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),vc(a.doc,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,!bd(a.doc,b)){var d=Jd(b)<a.doc.scrollTop;Gd(b,b.height+ed(e)),d&&rc(a,null,e.height),a.curOp.forceUpdate=!0}return!0}),e}function gd(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Qc(a),Rc(a,c);var e=d?d(a):1;e!=a.height&&Gd(a,e)}function hd(a){a.parent=null,Qc(a)}function id(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return a}function jd(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var d=a.innerMode(b,c);return d.mode.blankLine?d.mode.blankLine(d.state):void 0}}function kd(a,b,c){for(var d=0;10>d;d++){var e=a.token(b,c);if(b.pos>b.start)return e}throw new Error("Mode "+a.name+" failed to advance stream.")}function ld(b,c,d,e,f,g,h){var i=d.flattenSpans;null==i&&(i=b.options.flattenSpans);var j,k=0,l=null,m=new Vf(c,b.options.tabSize);for(""==c&&id(jd(d,e),g);!m.eol();){if(m.pos>b.options.maxHighlightLength?(i=!1,h&&od(b,c,e,m.pos),m.pos=c.length,j=null):j=id(kd(d,m,e),g),b.options.addModeClass){var n=a.innerMode(d,e).mode.name;n&&(j="m-"+(j?n+" "+j:n))}i&&l==j||(k<m.start&&f(m.start,l),k=m.start,l=j),m.start=m.pos}for(;k<m.pos;){var o=Math.min(m.pos,k+5e4);f(o,l),k=o}}function md(a,b,c,d){var e=[a.state.modeGen],f={};ld(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(var g=0;g<a.state.overlays.length;++g){var h=a.state.overlays[g],i=1,j=0;ld(a,b.text,h.mode,!0,function(a,b){for(var c=i;a>j;){var d=e[i];d>a&&e.splice(i,1,a,e[i+1],d),i+=2,j=Math.min(a,d)}if(b)if(h.opaque)e.splice(c,i-c,a,"cm-overlay "+b),i=c+2;else for(;i>c;c+=2){var f=e[c+1];e[c+1]=(f?f+" ":"")+"cm-overlay "+b}},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function nd(a,b){if(!b.styles||b.styles[0]!=a.state.modeGen){var c=md(a,b,b.stateAfter=za(a,Hd(b)));b.styles=c.styles,c.classes?b.styleClasses=c.classes:b.styleClasses&&(b.styleClasses=null)}return b.styles}function od(a,b,c,d){var e=a.doc.mode,f=new Vf(b,a.options.tabSize);for(f.start=f.pos=d||0,""==b&&jd(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)kd(e,f,c),f.start=f.pos}function pd(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?ag:_f;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function qd(a,b){var c=te("span",null,null,_e?"padding-right: .1px":null),d={pre:te("pre",[c]),content:c,col:0,pos:0,cm:a};b.measure={};for(var e=0;e<=(b.rest?b.rest.length:0);e++){var f,g=e?b.rest[e-1]:b.line;d.pos=0,d.addToken=sd,(Ze||_e)&&a.getOption("lineWrapping")&&(d.addToken=td(d.addToken)),He(a.display.measure)&&(f=Kd(g))&&(d.addToken=ud(d.addToken,f)),d.map=[],wd(g,d,nd(a,g)),g.styleClasses&&(g.styleClasses.bgClass&&(d.bgClass=Be(g.styleClasses.bgClass,d.bgClass||"")),g.styleClasses.textClass&&(d.textClass=Be(g.styleClasses.textClass,d.textClass||""))),0==d.map.length&&d.map.push(0,0,d.content.appendChild(Ge(a.display.measure))),0==e?(b.measure.map=d.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(d.map),(b.measure.caches||(b.measure.caches=[])).push({}))}return kg(a,"renderLine",a,b.line,d.pre),d.pre.className&&(d.textClass=Be(d.pre.className,d.textClass||"")),d}function rd(a){var b=te("span","\u2022","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b}function sd(a,b,c,d,e,f){if(b){var g=a.cm.options.specialChars,h=!1;if(g.test(b))for(var i=document.createDocumentFragment(),j=0;;){g.lastIndex=j;var k=g.exec(b),l=k?k.index-j:b.length-j;if(l){var m=document.createTextNode(b.slice(j,j+l));Ze&&9>$e?i.appendChild(te("span",[m])):i.appendChild(m),a.map.push(a.pos,a.pos+l,m),a.col+=l,a.pos+=l}if(!k)break;if(j+=l+1,"	"==k[0]){var n=a.cm.options.tabSize,o=n-a.col%n,m=i.appendChild(te("span",je(o),"cm-tab"));a.col+=o}else{var m=a.cm.options.specialCharPlaceholder(k[0]);Ze&&9>$e?i.appendChild(te("span",[m])):i.appendChild(m),a.col+=1}a.map.push(a.pos,a.pos+1,m),a.pos++}else{a.col+=b.length;var i=document.createTextNode(b);a.map.push(a.pos,a.pos+b.length,i),Ze&&9>$e&&(h=!0),a.pos+=b.length}if(c||d||e||h){var p=c||"";d&&(p+=d),e&&(p+=e);var q=te("span",[i],p);return f&&(q.title=f),a.content.appendChild(q)}a.content.appendChild(i)}}function td(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"\xa0";return b+=" "}return function(c,d,e,f,g,h){a(c,d.replace(/ {3,}/g,b),e,f,g,h);
}}function ud(a,b){return function(c,d,e,f,g,h){e=e?e+" cm-force-border":"cm-force-border";for(var i=c.pos,j=i+d.length;;){for(var k=0;k<b.length;k++){var l=b[k];if(l.to>i&&l.from<=i)break}if(l.to>=j)return a(c,d,e,f,g,h);a(c,d.slice(0,l.to-i),e,f,null,h),f=null,d=d.slice(l.to-i),i=l.to}}}function vd(a,b,c,d){var e=!d&&c.widgetNode;e&&(a.map.push(a.pos,a.pos+b,e),a.content.appendChild(e)),a.pos+=b}function wd(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m=e.length,n=0,o=1,p="",q=0;;){if(q==n){h=i=j=k="",l=null,q=1/0;for(var r=[],s=0;s<d.length;++s){var t=d[s],u=t.marker;t.from<=n&&(null==t.to||t.to>n)?(null!=t.to&&q>t.to&&(q=t.to,i=""),u.className&&(h+=" "+u.className),u.startStyle&&t.from==n&&(j+=" "+u.startStyle),u.endStyle&&t.to==q&&(i+=" "+u.endStyle),u.title&&!k&&(k=u.title),u.collapsed&&(!l||Uc(l.marker,u)<0)&&(l=t)):t.from>n&&q>t.from&&(q=t.from),"bookmark"==u.type&&t.from==n&&u.widgetNode&&r.push(u)}if(l&&(l.from||0)==n&&(vd(b,(null==l.to?m+1:l.to)-n,l.marker,null==l.from),null==l.to))return;if(!l&&r.length)for(var s=0;s<r.length;++s)vd(b,0,r[s])}if(n>=m)break;for(var v=Math.min(m,q);;){if(p){var w=n+p.length;if(!l){var x=w>v?p.slice(0,v-n):p;b.addToken(b,x,g?g+h:h,j,n+x.length==q?i:"",k)}if(w>=v){p=p.slice(v-n),n=v;break}n=w,j=""}p=e.slice(f,f=c[o++]),g=pd(c[o++],b.cm.options)}}else for(var o=1;o<c.length;o+=2)b.addToken(b,e.slice(f,f=c[o]),pd(c[o+1],b.cm.options))}function xd(a,b){return 0==b.from.ch&&0==b.to.ch&&""==ke(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function yd(a,b,c,d){function e(a){return c?c[a]:null}function f(a,c,e){gd(a,c,e,d),be(a,"change",a,b)}var g=b.from,h=b.to,i=b.text,j=Dd(a,g.line),k=Dd(a,h.line),l=ke(i),m=e(i.length-1),n=h.line-g.line;if(xd(a,b)){for(var o=0,p=[];o<i.length-1;++o)p.push(new $f(i[o],e(o),d));f(k,k.text,m),n&&a.remove(g.line,n),p.length&&a.insert(g.line,p)}else if(j==k)if(1==i.length)f(j,j.text.slice(0,g.ch)+l+j.text.slice(h.ch),m);else{for(var p=[],o=1;o<i.length-1;++o)p.push(new $f(i[o],e(o),d));p.push(new $f(l+j.text.slice(h.ch),m,d)),f(j,j.text.slice(0,g.ch)+i[0],e(0)),a.insert(g.line+1,p)}else if(1==i.length)f(j,j.text.slice(0,g.ch)+i[0]+k.text.slice(h.ch),e(0)),a.remove(g.line+1,n);else{f(j,j.text.slice(0,g.ch)+i[0],e(0)),f(k,l+k.text.slice(h.ch),m);for(var o=1,p=[];o<i.length-1;++o)p.push(new $f(i[o],e(o),d));n>1&&a.remove(g.line+1,n-1),a.insert(g.line+1,p)}be(a,"change",a,b)}function zd(a){this.lines=a,this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Ad(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize(),c+=e.height,e.parent=this}this.size=b,this.height=c,this.parent=null}function Bd(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function Cd(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,g(a),c(a),a.options.lineWrapping||n(a),a.options.mode=b.modeOption,ob(a)}function Dd(a,b){if(b-=a.first,0>b||b>=a.size)throw new Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(f>b){c=e;break}b-=f}return c.lines[b]}function Ed(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function Fd(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function Gd(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function Hd(a){if(null==a.parent)return null;for(var b=a.parent,c=le(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function Id(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(f>b){a=e;continue a}b-=f,c+=e.chunkSize()}return c}while(!a.lines);for(var d=0;d<a.lines.length;++d){var g=a.lines[d],h=g.height;if(h>b)break;b-=h}return c+d}function Jd(a){a=Zc(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;b+=e.height}for(var f=c.parent;f;c=f,f=c.parent)for(var d=0;d<f.children.length;++d){var g=f.children[d];if(g==c)break;b+=g.height}return b}function Kd(a){var b=a.order;return null==b&&(b=a.order=Jg(a.text)),b}function Ld(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function Md(a,b){var c={from:T(b.from),to:Ff(b),text:Ed(a,b.from,b.to)};return Td(a,c,b.from.line,b.to.line+1),Bd(a,function(a){Td(a,c,b.from.line,b.to.line+1)},!0),c}function Nd(a){for(;a.length;){var b=ke(a);if(!b.ranges)break;a.pop()}}function Od(a,b){return b?(Nd(a.done),ke(a.done)):a.done.length&&!ke(a.done).ranges?ke(a.done):a.done.length>1&&!a.done[a.done.length-2].ranges?(a.done.pop(),ke(a.done)):void 0}function Pd(a,b,c,d){var e=a.history;e.undone.length=0;var f,g=+new Date;if((e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>g-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))&&(f=Od(e,e.lastOp==d))){var h=ke(f.changes);0==sf(b.from,b.to)&&0==sf(b.from,h.to)?h.to=Ff(b):f.changes.push(Md(a,b))}else{var i=ke(e.done);for(i&&i.ranges||Sd(a.sel,e.done),f={changes:[Md(a,b)],generation:e.generation},e.done.push(f);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(c),e.generation=++e.maxGeneration,e.lastModTime=e.lastSelTime=g,e.lastOp=e.lastSelOp=d,e.lastOrigin=e.lastSelOrigin=b.origin,h||kg(a,"historyAdded")}function Qd(a,b,c,d){var e=b.charAt(0);return"*"==e||"+"==e&&c.ranges.length==d.ranges.length&&c.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function Rd(a,b,c,d){var e=a.history,f=d&&d.origin;c==e.lastSelOp||f&&e.lastSelOrigin==f&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==f||Qd(a,f,ke(e.done),b))?e.done[e.done.length-1]=b:Sd(b,e.done),e.lastSelTime=+new Date,e.lastSelOrigin=f,e.lastSelOp=c,d&&d.clearRedo!==!1&&Nd(e.undone)}function Sd(a,b){var c=ke(b);c&&c.ranges&&c.equals(a)||b.push(a)}function Td(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function Ud(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function Vd(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(Ud(c[d]));return e}function Wd(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?W.prototype.deepCopy.call(f):f);else{var g=f.changes,h=[];e.push({changes:h});for(var i=0;i<g.length;++i){var j,k=g[i];if(h.push({from:k.from,to:k.to,text:k.text}),b)for(var l in k)(j=l.match(/^spans_(\d+)$/))&&le(b,Number(j[1]))>-1&&(ke(h)[l]=k[l],delete k[l])}}}return e}function Xd(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)Xd(f.ranges[h].anchor,b,c,d),Xd(f.ranges[h].head,b,c,d)}else{for(var h=0;h<f.changes.length;++h){var i=f.changes[h];if(c<i.from.line)i.from=rf(i.from.line+d,i.from.ch),i.to=rf(i.to.line+d,i.to.ch);else if(b<=i.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Zd(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Yd(a.done,c,d,e),Yd(a.undone,c,d,e)}function $d(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function _d(a){return a.target||a.srcElement}function ae(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),kf&&a.ctrlKey&&1==b&&(b=3),b}function be(a,b){function c(a){return function(){a.apply(null,f)}}var d=a._handlers&&a._handlers[b];if(d){var e,f=Array.prototype.slice.call(arguments,2);xf?e=xf.delayedCallbacks:lg?e=lg:(e=lg=[],setTimeout(ce,0));for(var g=0;g<d.length;++g)e.push(c(d[g]))}}function ce(){var a=lg;lg=null;for(var b=0;b<a.length;++b)a[b]()}function de(a,b,c){return kg(a,c||b.type,a,b),$d(b)||b.codemirrorIgnore}function ee(a){var b=a._handlers&&a._handlers.cursorActivity;if(b)for(var c=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<b.length;++d)-1==le(c,b[d])&&c.push(b[d])}function fe(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0}function ge(a){a.prototype.on=function(a,b){ig(this,a,b)},a.prototype.off=function(a,b){jg(this,a,b)}}function he(){this.id=null}function ie(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("	",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);if(e+=f-d,e+=c-e%c,d=f+1,e>=b)return d}}function je(a){for(;sg.length<=a;)sg.push(ke(sg)+" ");return sg[a]}function ke(a){return a[a.length-1]}function le(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function me(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function ne(a,b){var c;if(Object.create)c=Object.create(a);else{var d=function(){};d.prototype=a,c=new d}return b&&oe(b,c),c}function oe(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||c===!1&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function pe(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function qe(a,b){return b?b.source.indexOf("\\w")>-1&&wg(a)?!0:b.test(a):wg(a)}function re(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function se(a){return a.charCodeAt(0)>=768&&xg.test(a)}function te(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)e.appendChild(document.createTextNode(b));else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function ue(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function ve(a,b){return ue(a).appendChild(b)}function we(a,b){if(a.contains)return a.contains(b);for(;b=b.parentNode;)if(b==a)return!0}function xe(){return document.activeElement}function ye(a){return new RegExp("\\b"+a+"\\b\\s*")}function ze(a,b){var c=ye(b);c.test(a.className)&&(a.className=a.className.replace(c,""))}function Ae(a,b){ye(b).test(a.className)||(a.className+=" "+b)}function Be(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!ye(c[d]).test(b)&&(b+=" "+c[d]);return b}function Ce(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function De(){Bg||(Ee(),Bg=!0)}function Ee(){var a;ig(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null,yg=null,Ce(Db)},100))}),ig(window,"blur",function(){Ce($b)})}function Fe(a){if(null!=yg)return yg;var b=te("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ve(a,b),b.offsetWidth&&(yg=b.offsetHeight-b.clientHeight),yg||0}function Ge(a){if(null==zg){var b=te("span","\u200b");ve(a,te("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(zg=b.offsetWidth<=1&&b.offsetHeight>2&&!(Ze&&8>$e))}return zg?te("span","\u200b"):te("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function He(a){if(null!=Ag)return Ag;var b=ve(a,document.createTextNode("A\u062eA")),c=ug(b,0,1).getBoundingClientRect();if(!c||c.left==c.right)return!1;var d=ug(b,1,2).getBoundingClientRect();return Ag=d.right-c.right<3}function Ie(a){if(null!=Gg)return Gg;var b=ve(a,te("span","x")),c=b.getBoundingClientRect(),d=ug(b,0,1).getBoundingClientRect();return Gg=Math.abs(c.left-d.left)>1}function Je(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0)}e||d(b,c,"ltr")}function Ke(a){return a.level%2?a.to:a.from}function Le(a){return a.level%2?a.from:a.to}function Me(a){var b=Kd(a);return b?Ke(b[0]):0}function Ne(a){var b=Kd(a);return b?Le(ke(b)):a.text.length}function Oe(a,b){var c=Dd(a.doc,b),d=Zc(c);d!=c&&(b=Hd(d));var e=Kd(d),f=e?e[0].level%2?Ne(d):Me(d):0;return rf(b,f)}function Pe(a,b){for(var c,d=Dd(a.doc,b);c=Xc(d);)d=c.find(1,!0).line,b=null;var e=Kd(d),f=e?e[0].level%2?Me(d):Ne(d):d.text.length;return rf(null==b?Hd(d):b,f)}function Qe(a,b){var c=Oe(a,b.line),d=Dd(a.doc,c.line),e=Kd(d);if(!e||0==e[0].level){var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;return rf(c.line,g?0:f)}return c}function Re(a,b,c){var d=a[0].level;return b==d?!0:c==d?!1:c>b}function Se(a,b){Ig=null;for(var c,d=0;d<a.length;++d){var e=a[d];if(e.from<b&&e.to>b)return d;if(e.from==b||e.to==b){if(null!=c)return Re(a,e.level,a[c].level)?(e.from!=e.to&&(Ig=c),d):(e.from!=e.to&&(Ig=d),c);c=d}}return c}function Te(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&se(a.text.charAt(b)));return b}function Ue(a,b,c,d){var e=Kd(a);if(!e)return Ve(a,b,c,d);for(var f=Se(e,b),g=e[f],h=Te(a,b,g.level%2?-c:c,d);;){if(h>g.from&&h<g.to)return h;if(h==g.from||h==g.to)return Se(e,h)==f?h:(g=e[f+=c],c>0==g.level%2?g.to:g.from);if(g=e[f+=c],!g)return null;h=c>0==g.level%2?Te(a,g.to,-1,d):Te(a,g.from,1,d)}}function Ve(a,b,c,d){var e=b+c;if(d)for(;e>0&&se(a.text.charAt(e));)e+=c;return 0>e||e>a.text.length?null:e}var We=/gecko\/\d/i.test(navigator.userAgent),Xe=/MSIE \d/.test(navigator.userAgent),Ye=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ze=Xe||Ye,$e=Ze&&(Xe?document.documentMode||6:Ye[1]),_e=/WebKit\//.test(navigator.userAgent),af=_e&&/Qt\/\d+\.\d+/.test(navigator.userAgent),bf=/Chrome\//.test(navigator.userAgent),cf=/Opera\//.test(navigator.userAgent),df=/Apple Computer/.test(navigator.vendor),ef=/KHTML\//.test(navigator.userAgent),ff=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),gf=/PhantomJS/.test(navigator.userAgent),hf=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),jf=hf||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),kf=hf||/Mac/.test(navigator.platform),lf=/win/i.test(navigator.platform),mf=cf&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);mf&&(mf=Number(mf[1])),mf&&mf>=15&&(cf=!1,_e=!0);var nf=kf&&(af||cf&&(null==mf||12.11>mf)),of=We||Ze&&$e>=9,pf=!1,qf=!1,rf=a.Pos=function(a,b){return this instanceof rf?(this.line=a,void(this.ch=b)):new rf(a,b)},sf=a.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};W.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=sf(c.anchor,d.anchor)||0!=sf(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new X(T(this.ranges[b].anchor),T(this.ranges[b].head));return new W(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(sf(b,d.from())>=0&&sf(a,d.to())<=0)return c}return-1}},X.prototype={from:function(){return V(this.anchor,this.head)},to:function(){return U(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var tf,uf,vf,wf={left:0,right:0,top:0,bottom:0},xf=null,yf=0,zf=null,Af=0,Bf=0,Cf=null;Ze?Cf=-.53:We?Cf=15:bf?Cf=-.7:df&&(Cf=-1/3);var Df,Ef=null,Ff=a.changeEnd=function(a){return a.text?rf(a.from.line+a.text.length-1,ke(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.prototype={constructor:a,focus:function(){window.focus(),zb(this),wb(this)},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,Hf.hasOwnProperty(a)&&jb(this,Hf[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:kb(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,ob(this)}),removeOverlay:kb(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,void ob(this)}}),indentLine:kb(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),ba(this.doc,a)&&uc(this,a,b,c)}),indentSelection:kb(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(uc(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&sc(this));else{var f=e.from(),g=e.to(),h=Math.max(c,f.line);c=Math.min(this.lastLine(),g.line-(g.ch?0:1))+1;for(var i=h;c>i;++i)uc(this,i,a);var j=this.doc.sel.ranges;0==f.ch&&b.length==j.length&&j[d].from().ch>0&&ga(this.doc,d,new X(f,j[d].to()),og)}}}),getTokenAt:function(a,b){var c=this.doc;a=_(c,a);for(var d=za(this,a.line,b),e=this.doc.mode,f=Dd(c,a.line),g=new Vf(f.text,this.options.tabSize);g.pos<a.ch&&!g.eol();){g.start=g.pos;var h=kd(e,g,d)}return{start:g.start,end:g.pos,string:g.current(),type:h||null,state:d}},getTokenTypeAt:function(a){a=_(this.doc,a);var b,c=nd(this,Dd(this.doc,a.line)),d=0,e=(c.length-1)/2,f=a.ch;if(0==f)b=c[2];else for(;;){var g=d+e>>1;if((g?c[2*g-1]:0)>=f)e=g;else{if(!(c[2*g+1]<f)){b=c[2*g+2];break}d=g+1}}var h=b?b.indexOf("cm-overlay "):-1;return 0>h?b:0==h?null:b.slice(0,h-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Nf.hasOwnProperty(b))return Nf;var d=Nf[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(var f=0;f<d._global.length;f++){var h=d._global[f];h.pred(e,this)&&-1==le(c,h.val)&&c.push(h.val)}return c},getStateAfter:function(a,b){var c=this.doc;return a=$(c,null==a?c.first+c.size-1:a),za(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel.primary();return c=null==a?d.head:"object"==typeof a?_(this.doc,a):a?d.from():d.to(),Ua(this,c,b||"page")},charCoords:function(a,b){return Ta(this,_(this.doc,a),b||"page")},coordsChar:function(a,b){return a=Sa(this,a,b||"page"),Xa(this,a.left,a.top)},lineAtHeight:function(a,b){return a=Sa(this,{top:a,left:0},b||"page").top,Id(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);var e=Dd(this.doc,a);return Ra(this,e,{top:0,left:0},b||"page").top+(c?this.doc.height-Jd(e):0)},defaultTextHeight:function(){return Za(this.display)},defaultCharWidth:function(){return $a(this.display)},setGutterMarker:kb(function(a,b,c){return vc(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&re(d)&&(a.gutterMarkers=null),!0})}),clearGutter:kb(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,pb(b,d,"gutter"),re(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),addLineWidget:kb(function(a,b,c){return fd(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!ba(this.doc,a))return null;var b=a;if(a=Dd(this.doc,a),!a)return null}else{var b=Hd(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=Ua(this,_(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&pc(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:kb(Vb),triggerOnKeyPress:kb(Yb),triggerOnKeyUp:Xb,execCommand:function(a){return Qf.hasOwnProperty(a)?Qf[a](this):void 0},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);for(var f=0,g=_(this.doc,a);b>f&&(g=xc(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:kb(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?xc(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},qg)}),deleteH:kb(function(a,b){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):wc(this,function(c){var e=xc(d,c.head,a,b,!1);return 0>a?{from:e,to:c.head}:{from:c.head,to:e}})}),findPosV:function(a,b,c,d){var e=1,f=d;0>b&&(e=-1,b=-b);for(var g=0,h=_(this.doc,a);b>g;++g){var i=Ua(this,h,"div");if(null==f?f=i.left:i.left=f,h=yc(this,i,e,c),h.hitSide)break}return h},moveV:kb(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=Ua(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn),e.push(h.left);var i=yc(c,h,a,b);return"page"==b&&g==d.sel.primary()&&rc(c,null,Ta(c,i,"div").top-h.top),i},qg),e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=this.doc,c=Dd(b,a.line).text,d=a.ch,e=a.ch;if(c){var f=this.getHelper(a,"wordChars");(a.xRel<0||e==c.length)&&d?--d:++e;for(var g=c.charAt(d),h=qe(g,f)?function(a){return qe(a,f)}:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!qe(a)};d>0&&h(c.charAt(d-1));)--d;for(;e<c.length&&h(c.charAt(e));)++e}return new X(rf(a.line,d),rf(a.line,e))},toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Ae(this.display.cursorDiv,"CodeMirror-overwrite"):ze(this.display.cursorDiv,"CodeMirror-overwrite"),kg(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return xe()==this.display.input},scrollTo:kb(function(a,b){(null!=a||null!=b)&&tc(this),null!=a&&(this.curOp.scrollLeft=a),null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller,b=mg;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:kb(function(a,b){if(null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:rf(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line)tc(this),this.curOp.scrollToPos=a;else{var c=qc(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:kb(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a)),null!=b&&(d.display.wrapper.style.height=c(b)),d.options.lineWrapping&&Na(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){pb(d,e,"widget");break}++e}),d.curOp.forceUpdate=!0,kg(d,"refresh",this)}),operation:function(a){return ib(this,a)},refresh:kb(function(){var a=this.display.cachedTextHeight;ob(this),this.curOp.forceUpdate=!0,Oa(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),l(this),(null==a||Math.abs(a-Za(this.display))>.5)&&g(this),kg(this,"refresh",this)}),swapDoc:kb(function(a){var b=this.doc;return b.cm=null,Cd(this,a),Oa(this),yb(this),this.scrollTo(a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,be(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ge(a);var Gf=a.defaults={},Hf=a.optionHandlers={},If=a.Init={toString:function(){return"CodeMirror.Init"}};zc("value","",function(a,b){a.setValue(b)},!0),zc("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),zc("indentUnit",2,c,!0),zc("indentWithTabs",!1),zc("smartIndent",!0),zc("tabSize",4,function(a){d(a),Oa(a),ob(a)},!0),zc("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=new RegExp(b.source+(b.test("	")?"":"|	"),"g"),a.refresh()},!0),zc("specialCharPlaceholder",rd,function(a){a.refresh()},!0),zc("electricChars",!0),zc("rtlMoveVisually",!lf),zc("wholeLineUpdateBefore",!0),zc("theme","default",function(a){i(a),j(a)},!0),zc("keyMap","default",h),zc("extraKeys",null),zc("lineWrapping",!1,e,!0),zc("gutters",[],function(a){o(a.options),j(a)},!0),zc("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?w(a.display)+"px":"0",a.refresh()},!0),zc("coverGutterNextToScrollbar",!1,r,!0),zc("lineNumbers",!1,function(a){o(a.options),j(a)},!0),zc("firstLineNumber",1,j,!0),zc("lineNumberFormatter",function(a){return a},j,!0),zc("showCursorWhenSelecting",!1,sa,!0),zc("resetSelectionOnContextMenu",!0),zc("readOnly",!1,function(a,b){"nocursor"==b?($b(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||yb(a))}),zc("disableInput",!1,function(a,b){b||yb(a)},!0),zc("dragDrop",!0),zc("cursorBlinkRate",530),zc("cursorScrollMargin",0),zc("cursorHeight",1,sa,!0),zc("singleCursorHeightPerLine",!0,sa,!0),zc("workTime",100),zc("workDelay",100),zc("flattenSpans",!0,d,!0),zc("addModeClass",!1,d,!0),zc("pollInterval",100),zc("undoDepth",200,function(a,b){a.doc.history.undoDepth=b}),zc("historyEventDelay",1250),zc("viewportMargin",10,function(a){a.refresh()},!0),zc("maxHighlightLength",1e4,d,!0),zc("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)}),zc("tabindex",null,function(a,b){a.display.input.tabIndex=b||""}),zc("autofocus",null);var Jf=a.modes={},Kf=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}Jf[b]=c},a.defineMIME=function(a,b){Kf[a]=b},a.resolveMode=function(b){if("string"==typeof b&&Kf.hasOwnProperty(b))b=Kf[b];else if(b&&"string"==typeof b.name&&Kf.hasOwnProperty(b.name)){var c=Kf[b.name];"string"==typeof c&&(c={name:c}),b=ne(c,b),b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=Jf[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(Lf.hasOwnProperty(c.name)){var f=Lf[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}if(e.name=c.name,c.helperType&&(e.helperType=c.helperType),c.modeProps)for(var g in c.modeProps)e[g]=c.modeProps[g];return e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var Lf=a.modeExtensions={};a.extendMode=function(a,b){var c=Lf.hasOwnProperty(a)?Lf[a]:Lf[a]={};oe(b,c)},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){cg.prototype[a]=b},a.defineOption=zc;var Mf=[];a.defineInitHook=function(a){Mf.push(a)};var Nf=a.helpers={};a.registerHelper=function(b,c,d){Nf.hasOwnProperty(b)||(Nf[b]=a[b]={_global:[]}),Nf[b][c]=d},a.registerGlobalHelper=function(b,c,d,e){a.registerHelper(b,c,e),Nf[b]._global.push({pred:d,val:e})};var Of=a.copyState=function(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c},Pf=a.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state,a=c.mode}return c||{mode:a,state:b}};var Qf=a.commands={selectAll:function(a){a.setSelection(rf(a.firstLine(),0),rf(a.lastLine()),og)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),og)},killLine:function(a){wc(a,function(b){if(b.empty()){var c=Dd(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:rf(b.head.line+1,0)}:{from:b.head,to:rf(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){wc(a,function(b){return{from:rf(b.from().line,0),to:_(a.doc,rf(b.to().line+1,0))}})},delLineLeft:function(a){wc(a,function(a){return{from:rf(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){wc(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return{from:d,to:b.from()}})},delWrappedLineRight:function(a){wc(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:d}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(rf(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(rf(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return Oe(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return Qe(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){return Pe(a,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},qg)},goLineLeft:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},qg)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return d.ch<a.getLine(d.line).search(/\S/)?Qe(a,b.head):d},qg)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){
var f=c[e].from(),g=rg(a.getLine(f.line),f.ch,d);b.push(new Array(d-g%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){ib(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=Dd(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new rf(e.line,e.ch-1)),e.ch>0)e=new rf(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),rf(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=Dd(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+"\n"+g.charAt(g.length-1),rf(e.line-1,g.length-1),rf(e.line,1),"+transpose")}c.push(new X(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){ib(a,function(){for(var b=a.listSelections().length,c=0;b>c;c++){var d=a.listSelections()[c];a.replaceRange("\n",d.anchor,d.head,"+input"),a.indentLine(d.from().line+1,null,!0),sc(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},Rf=a.keyMap={};Rf.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Rf.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Rf.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Rf.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Rf["default"]=kf?Rf.macDefault:Rf.pcDefault;var Sf=a.lookupKey=function(a,b,c){function d(b){b=Ac(b);var e=b[a];if(e===!1)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";var f=b.fallthrough;if(null==f)return!1;if("[object Array]"!=Object.prototype.toString.call(f))return d(f);for(var g=0;g<f.length;++g){var h=d(f[g]);if(h)return h}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}},Tf=a.isModifierKey=function(a){var b=Hg[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b},Uf=a.keyName=function(a,b){if(cf&&34==a.keyCode&&a["char"])return!1;var c=Hg[a.keyCode];return null==c||a.altGraphKey?!1:(a.altKey&&(c="Alt-"+c),(nf?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(nf?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&(c="Shift-"+c),c)};a.fromTextArea=function(b,c){function d(){b.value=j.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=xe();c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(ig(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var f=b.form,g=f.submit;try{var h=f.submit=function(){d(),f.submit=g,f.submit(),f.submit=h}}catch(i){}}b.style.display="none";var j=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return j.save=d,j.getTextArea=function(){return b},j.toTextArea=function(){d(),b.parentNode.removeChild(j.getWrapperElement()),b.style.display="",b.form&&(jg(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=g))},j};var Vf=a.StringStream=function(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Vf.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=rg(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?rg(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return rg(this.string,null,this.tabSize)-(this.lineStart?rg(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var Wf=a.TextMarker=function(a,b){this.lines=[],this.type=b,this.doc=a};ge(Wf),Wf.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&_a(a),fe(this,"clear")){var c=this.find();c&&be(this,"clear",c.from,c.to)}for(var d=null,e=null,f=0;f<this.lines.length;++f){var g=this.lines[f],h=Hc(g.markedSpans,this);a&&!this.collapsed?pb(a,Hd(g),"text"):a&&(null!=h.to&&(e=Hd(g)),null!=h.from&&(d=Hd(g))),g.markedSpans=Ic(g.markedSpans,h),null==h.from&&this.collapsed&&!bd(this.doc,g)&&a&&Gd(g,Za(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var i=Zc(this.lines[f]),j=m(i);j>a.display.maxLineLength&&(a.display.maxLine=i,a.display.maxLineLength=j,a.display.maxLineChanged=!0)}null!=d&&a&&this.collapsed&&ob(a,d,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&na(a.doc)),a&&be(a,"markerCleared",a,this),b&&bb(a),this.parent&&this.parent.clear()}},Wf.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=Hc(f.markedSpans,this);if(null!=g.from&&(c=rf(b?f:Hd(f),g.from),-1==a))return c;if(null!=g.to&&(d=rf(b?f:Hd(f),g.to),1==a))return d}return c&&{from:c,to:d}},Wf.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&ib(c,function(){var d=a.line,e=Hd(a.line),f=Ha(c,e);if(f&&(Ma(f),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!bd(b.doc,d)&&null!=b.height){var g=b.height;b.height=null;var h=ed(b)-g;h&&Gd(d,d.height+h)}})},Wf.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=le(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},Wf.prototype.detachLine=function(a){if(this.lines.splice(le(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}};var Xf=0,Yf=a.SharedTextMarker=function(a,b){this.markers=a,this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};ge(Yf),Yf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();be(this,"clear")}},Yf.prototype.find=function(a,b){return this.primary.find(a,b)};var Zf=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a,this.node=b};ge(Zf),Zf.prototype.clear=function(){var a=this.cm,b=this.line.widgets,c=this.line,d=Hd(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=ed(this);ib(a,function(){dd(a,c,-f),pb(a,d,"widget"),Gd(c,Math.max(0,c.height-f))})}},Zf.prototype.changed=function(){var a=this.height,b=this.cm,c=this.line;this.height=null;var d=ed(this)-a;d&&ib(b,function(){b.curOp.forceUpdate=!0,dd(b,c,d),Gd(c,c.height+d)})};var $f=a.Line=function(a,b,c){this.text=a,Rc(this,b),this.height=c?c(this):1};ge($f),$f.prototype.lineNo=function(){return Hd(this)};var _f={},ag={};zd.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height,hd(e),be(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0;d<b.length;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},Ad.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof zd))){var h=[];this.collapse(h),this.children=[new zd(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(f>=a){if(e.insertInner(a,b,c),e.lines&&e.lines.length>50){for(;e.lines.length>50;){var g=e.lines.splice(e.lines.length-25,25),h=new zd(g);e.height-=h.height,this.children.splice(d+1,0,h),h.parent=this}this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new Ad(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=le(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new Ad(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(f>a){var g=Math.min(b,f-a);if(e.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=f}}};var bg=0,cg=a.Doc=function(a,b,c){if(!(this instanceof cg))return new cg(a,b,c);null==c&&(c=0),Ad.call(this,[new zd([new $f("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=c;var d=rf(c,0);this.sel=Z(d),this.history=new Ld(null),this.id=++bg,this.modeOption=b,"string"==typeof a&&(a=Dg(a)),yd(this,{from:d,to:d,text:a}),ka(this,Z(d),og)};cg.prototype=ne(Ad.prototype,{constructor:cg,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Fd(this,this.first,this.first+this.size);return a===!1?b:b.join(a||"\n")},setValue:lb(function(a){var b=rf(this.first,0),c=this.first+this.size-1;gc(this,{from:b,to:rf(c,Dd(this,c).text.length),text:Dg(a),origin:"setValue"},!0),ka(this,Z(b))}),replaceRange:function(a,b,c,d){b=_(this,b),c=c?_(this,c):b,mc(this,a,b,c,d)},getRange:function(a,b,c){var d=Ed(this,_(this,a),_(this,b));return c===!1?d:d.join(c||"\n")},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){return ba(this,a)?Dd(this,a):void 0},getLineNumber:function(a){return Hd(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=Dd(this,a)),Zc(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return _(this,a)},getCursor:function(a){var b,c=this.sel.primary();return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||"to"==a||a===!1?c.to():c.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:lb(function(a,b,c){ha(this,_(this,"number"==typeof a?rf(a,b||0):a),null,c)}),setSelection:lb(function(a,b,c){ha(this,_(this,a),_(this,b||a),c)}),extendSelection:lb(function(a,b,c){ea(this,_(this,a),b&&_(this,b),c)}),extendSelections:lb(function(a,b){fa(this,ca(this,a,b))}),extendSelectionsBy:lb(function(a,b){fa(this,me(this.sel.ranges,a),b)}),setSelections:lb(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new X(_(this,a[d].anchor),_(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex)),ka(this,Y(e,b),c)}}),addSelection:lb(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new X(_(this,a),_(this,b||a))),ka(this,Y(d,d.length-1),c)}),getSelection:function(a){for(var b,c=this.sel.ranges,d=0;d<c.length;d++){var e=Ed(this,c[d].from(),c[d].to());b=b?b.concat(e):e}return a===!1?b:b.join(a||"\n")},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Ed(this,c[d].from(),c[d].to());a!==!1&&(e=e.join(a||"\n")),b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:lb(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:Dg(a[f]),origin:c}}for(var h=b&&"end"!=b&&ec(this,d,b),f=d.length-1;f>=0;f--)gc(this,d[f]);h?ja(this,h):this.cm&&sc(this.cm)}),undo:lb(function(){ic(this,"undo")}),redo:lb(function(){ic(this,"redo")}),undoSelection:lb(function(){ic(this,"undo",!0)}),redoSelection:lb(function(){ic(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(var d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new Ld(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Wd(this.history.done),undone:Wd(this.history.undone)}},setHistory:function(a){var b=this.history=new Ld(this.history.maxGeneration);b.done=Wd(a.done.slice(0),null,!0),b.undone=Wd(a.undone.slice(0),null,!0)},addLineClass:lb(function(a,b,c){return vc(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(new RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:lb(function(a,b,c){return vc(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),markText:function(a,b,c){return Bc(this,_(this,a),_(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared};return a=_(this,a),Bc(this,a,a,c,"bookmark")},findMarksAt:function(a){a=_(this,a);var b=[],c=Dd(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=_(this,a),b=_(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){var g=f.markedSpans;if(g)for(var h=0;h<g.length;h++){var i=g[h];e==a.line&&a.ch>i.to||null==i.from&&e!=a.line||e==b.line&&i.from>b.ch||c&&!c(i.marker)||d.push(i.marker.parent||i.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){var e=d.text.length+1;return e>a?(b=a,!0):(a-=e,void++c)}),_(this,rf(c,b))},indexFromPos:function(a){a=_(this,a);var b=a.ch;return a.line<this.first||a.ch<0?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){var b=new cg(Fd(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new cg(Fd(this,b,c),a.mode||this.modeOption,b);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],Ec(d,Dc(this)),d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this),Fc(Dc(this));break}}if(b.history==this.history){var e=[b.id];Bd(b,function(a){e.push(a.id)},!0),b.history=new Ld(null),b.history.done=Wd(this.history.done,e),b.history.undone=Wd(this.history.undone,e)}},iterLinkedDocs:function(a){Bd(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),cg.prototype.eachLine=cg.prototype.iter;var dg="iter insert remove copy getEditor".split(" ");for(var eg in cg.prototype)cg.prototype.hasOwnProperty(eg)&&le(dg,eg)<0&&(a.prototype[eg]=function(a){return function(){return a.apply(this.doc,arguments)}}(cg.prototype[eg]));ge(cg);var fg=a.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},gg=a.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},hg=a.e_stop=function(a){fg(a),gg(a)},ig=a.on=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}},jg=a.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers&&a._handlers[b];if(!d)return;for(var e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}}},kg=a.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},lg=null,mg=30,ng=a.Pass={toString:function(){return"CodeMirror.Pass"}},og={scroll:!1},pg={origin:"*mouse"},qg={origin:"+move"};he.prototype.set=function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)};var rg=a.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var f=d||0,g=e||0;;){var h=a.indexOf("	",f);if(0>h||h>=b)return g+(b-f);g+=h-f,g+=c-g%c,f=h+1}},sg=[""],tg=function(a){a.select()};hf?tg=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:Ze&&(tg=function(a){try{a.select()}catch(b){}}),[].indexOf&&(le=function(a,b){return a.indexOf(b)}),[].map&&(me=function(a,b){return a.map(b)});var ug,vg=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,wg=a.isWordChar=function(a){return/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||vg.test(a))},xg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;ug=document.createRange?function(a,b,c){var d=document.createRange();return d.setEnd(a,c),d.setStart(a,b),d}:function(a,b,c){var d=document.body.createTextRange();return d.moveToElementText(a.parentNode),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d},Ze&&11>$e&&(xe=function(){try{return document.activeElement}catch(a){return document.body}});var yg,zg,Ag,Bg=!1,Cg=function(){if(Ze&&9>$e)return!1;var a=te("div");return"draggable"in a||"dragDrop"in a}(),Dg=a.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},Eg=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Fg=function(){var a=te("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),Gg=null,Hg={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};a.keyNames=Hg,function(){for(var a=0;10>a;a++)Hg[a+48]=Hg[a+96]=String(a);for(var a=65;90>=a;a++)Hg[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)Hg[a+111]=Hg[a+63235]="F"+a}();var Ig,Jg=function(){function a(a){return 247>=a?c.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1773>=a?d.charAt(a-1536):a>=1774&&2220>=a?"r":a>=8192&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a,this.from=b,this.to=c}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,g=/[LRr]/,h=/[Lb1n]/,i=/[1n]/,j="L";return function(c){if(!e.test(c))return!1;for(var d,k=c.length,l=[],m=0;k>m;++m)l.push(d=a(c.charCodeAt(m)));for(var m=0,n=j;k>m;++m){var d=l[m];"m"==d?l[m]=n:n=d}for(var m=0,o=j;k>m;++m){var d=l[m];"1"==d&&"r"==o?l[m]="n":g.test(d)&&(o=d,"r"==d&&(l[m]="R"))}for(var m=1,n=l[0];k-1>m;++m){var d=l[m];"+"==d&&"1"==n&&"1"==l[m+1]?l[m]="1":","!=d||n!=l[m+1]||"1"!=n&&"n"!=n||(l[m]=n),n=d}for(var m=0;k>m;++m){var d=l[m];if(","==d)l[m]="N";else if("%"==d){for(var p=m+1;k>p&&"%"==l[p];++p);for(var q=m&&"!"==l[m-1]||k>p&&"1"==l[p]?"1":"N",r=m;p>r;++r)l[r]=q;m=p-1}}for(var m=0,o=j;k>m;++m){var d=l[m];"L"==o&&"1"==d?l[m]="L":g.test(d)&&(o=d)}for(var m=0;k>m;++m)if(f.test(l[m])){for(var p=m+1;k>p&&f.test(l[p]);++p);for(var s="L"==(m?l[m-1]:j),t="L"==(k>p?l[p]:j),q=s||t?"L":"R",r=m;p>r;++r)l[r]=q;m=p-1}for(var u,v=[],m=0;k>m;)if(h.test(l[m])){var w=m;for(++m;k>m&&h.test(l[m]);++m);v.push(new b(0,w,m))}else{var x=m,y=v.length;for(++m;k>m&&"L"!=l[m];++m);for(var r=x;m>r;)if(i.test(l[r])){r>x&&v.splice(y,0,new b(1,x,r));var z=r;for(++r;m>r&&i.test(l[r]);++r);v.splice(y,0,new b(2,z,r)),x=r}else++r;m>x&&v.splice(y,0,new b(1,x,m))}return 1==v[0].level&&(u=c.match(/^\s+/))&&(v[0].from=u[0].length,v.unshift(new b(0,0,u[0].length))),1==ke(v).level&&(u=c.match(/\s+$/))&&(ke(v).to-=u[0].length,v.push(new b(0,k-u[0].length,k))),v[0].level!=ke(v).level&&v.push(new b(v[0].level,k,k)),v}}();return a.version="4.6.1",a}),function(){function a(){this.rootNode=new b("",!0),this.insert=function(a,b){this._insertInternal(a,this.rootNode,b)},this._insertInternal=function(a,b,c){b.isStringSubNode(a)?this._addNodeOrRecurse(a,b,c):a==b.getKey()?this._makeNodeDataNode(a,b,c):b.isStringPartialMatch(a)?this._splitNode(a,b,c):this._addNodeAsChild(a,b,c)},this._addNodeOrRecurse=function(a,c,d){for(var e=!1,f=c.getMatchingPortionOfString(a),g=0;g<c.getChildren().length;g++)if(c.getChildren()[g].getKey().startsWith(f.charAt(0))){e=!0,this._insertInternal(f,c.getChildren()[g],d);break}if(e===!1){var h=new b(f);h.setReal(!0),h.setValue(d),c.addChild(h)}},this._makeNodeDataNode=function(a,b,c){if(b.getIsReal())throw"Duplicate key";b.setReal(!0),b.setValue(c)},this._addNodeAsChild=function(a,b,c){alert("This doesn't ever seem to be called. If you see this alert, you just found a case where it is. You now have reason to remove this alert.");var d=b.deepCopy();d.setKey(b.getMatchingPortionOfNodeKey(a)),b.setKey(a),b.setReal(!0),b.setValue(c),b.addChild(d)},this._splitNode=function(a,c,d){var e=c.deepCopy();if(e.setKey(c.getMatchingPortionOfNodeKey(a)),c.setKey(c.getUnmatchingPortionOfString(a)),c.setReal(!1),c.clearChildren(),c.addChild(e),c.getNumberOfMatchingCharacters(a)<a.length){var f=new b;f.setKey(c.getMatchingPortionOfString(a)),f.setReal(!0),f.setValue(d),c.addChild(f)}else c.setValue(d),c.setReal(!0)},this.search=function(a,b){var d=new c;return d.result=[],d.visit=function(a,b,c){c.getIsReal()&&this.result.push(c.value)},d.shouldVisit=function(a,c){return c.getKey().startsWith(a)&&this.result.length<b},d.shouldRecurse=function(a,c){return this.result.length<b},d.shouldVisitChild=function(a,c){return c.getKey().startsWith(a.charAt(0))&&this.result.length<b},this.visit(a,d),d.result},this.find=function(a){var b=new c;return b.visit=function(a,b,c){c.getIsReal()&&(this.result=c.value)},b.shouldVisit=function(a,b){return a==b.getKey()},b.shouldRecurse=function(a,b){return b.isStringSubNode(a)},b.shouldVisitChild=function(a,b){return b.getKey().startsWith(a.charAt(0))},this.shouldBreakAfterFindingChild=function(){return!0},this.visit(a,b),b.result},this.visit=function(a,b){this._visitInternal(a,b,null,this.rootNode)},this._visitInternal=function(a,b,c,d){if(b.shouldVisit(a,d)&&b.visit(a,c,d),b.shouldRecurse(a,d))for(var e=d.getMatchingPortionOfString(a),f=0;f<d.getChildren().length&&(!b.shouldVisitChild(e,d.getChildren()[f])||(this._visitInternal(e,b,d,d.getChildren()[f]),!b.shouldBreakAfterFindingChild()));f++);},this.getNumberOfRealNodes=function(){var a=new c;return a.result=0,a.visit=function(a,b,c){c.getIsReal()&&this.result++},a.shouldVisit=function(a,b){return!0},a.shouldRecurse=function(a,b){return!0},a.shouldVisitChild=function(a,b){return!0},this.visit("",a),a.result},this.getNumberOfNodes=function(){var a=new c;return a.result=0,a.visit=function(a,b,c){this.result++},a.shouldVisit=function(a,b){return!0},a.shouldRecurse=function(a,b){return!0},a.shouldVisitChild=function(a,b){return!0},this.visit("",a),a.result}}function b(a,c){this.children=[],this.key=a,this.isReal,this.value,this.deepCopy=function(){var a=new b;return a.setKey(this.getKey()),a.children=this.getChildren(),a.setReal(this.getIsReal()),a.setValue(this.getValue()),a},this.setReal=function(a){this.isReal=a},this.getIsReal=function(){return this.isReal},this.getValue=function(){return this.value},this.setValue=function(a){this.value=a},this.addChild=function(a){this.children.push(a)},this.getKey=function(){return this.key},this.setKey=function(a){this.key=a},this.isRoot=function(){return""===this.key},this.getChildren=function(){return this.children},this.clearChildren=function(){this.children=[]},this.getNumberOfMatchingCharacters=function(a){for(var b=0;b<a.length&&b<this.key.length&&a.charAt(b)==this.key.charAt(b);)b++;return b},this.isStringSubNode=function(a){return this.isRoot()?!0:this.getNumberOfMatchingCharacters(a)<a.length&&this.getNumberOfMatchingCharacters(a)>=this.key.length},this.isStringPartialMatch=function(a){return this.getNumberOfMatchingCharacters(a)>0&&this.getNumberOfMatchingCharacters(a)<this.key.length},this.getMatchingPortionOfString=function(a){return a.substring(this.getNumberOfMatchingCharacters(a))},this.getMatchingPortionOfNodeKey=function(a){return this.key.substring(this.getNumberOfMatchingCharacters(a))},this.getUnmatchingPortionOfString=function(a){return a.substring(0,this.getNumberOfMatchingCharacters(a))}}function c(){this.getResult=function(){return this.result},this.shouldBreakAfterFindingChild=function(){return!1}}String.prototype.startsWith=function(a){return 0===this.indexOf(a)},Array.prototype.contains=function(a){return-1!==self.indexOf(a)},window.RadixTree=a}(),function(){function a(a,b,c){var d,e=a.getWrapperElement();return d=e.appendChild(document.createElement("div")),c?d.className="CodeMirror-dialog CodeMirror-dialog-bottom":d.className="CodeMirror-dialog CodeMirror-dialog-top",d.innerHTML=b,d}CodeMirror.defineExtension("openDialog",function(b,c,d){function e(){h||(h=!0,g.parentNode.removeChild(g))}var f,g=a(this,b,d&&d.bottom),h=!1,i=this,j=g.getElementsByTagName("input")[0];
return j?(CodeMirror.on(j,"keydown",function(a){d&&d.onKeyDown&&d.onKeyDown(a,j.value,e)||(13==a.keyCode||27==a.keyCode)&&(CodeMirror.e_stop(a),e(),i.focus(),13==a.keyCode&&c(j.value))}),d&&d.onKeyUp&&CodeMirror.on(j,"keyup",function(a){d.onKeyUp(a,j.value,e)}),d&&d.value&&(j.value=d.value),j.focus(),CodeMirror.on(j,"blur",e)):(f=g.getElementsByTagName("button")[0])&&(CodeMirror.on(f,"click",function(){e(),i.focus()}),f.focus(),CodeMirror.on(f,"blur",e)),e}),CodeMirror.defineExtension("openConfirm",function(b,c,d){function e(){h||(h=!0,f.parentNode.removeChild(f),i.focus())}var f=a(this,b,d&&d.bottom),g=f.getElementsByTagName("button"),h=!1,i=this,j=1;g[0].focus();for(var k=0;k<g.length;++k){var l=g[k];!function(a){CodeMirror.on(l,"click",function(b){CodeMirror.e_preventDefault(b),e(),a&&a(i)})}(c[k]),CodeMirror.on(l,"blur",function(){--j,setTimeout(function(){0>=j&&e()},200)}),CodeMirror.on(l,"focus",function(){++j})}})}(),function(){function a(a,c,d,e){if(this.atOccurrence=!1,this.doc=a,null==e&&"string"==typeof c&&(e=!1),d=d?a.clipPos(d):b(0,0),this.pos={from:d,to:d},"string"!=typeof c)c.global||(c=new RegExp(c.source,c.ignoreCase?"ig":"g")),this.matches=function(d,e){if(d){c.lastIndex=0;for(var f,g,h=a.getLine(e.line).slice(0,e.ch),i=0;;){c.lastIndex=i;var j=c.exec(h);if(!j)break;if(f=j,g=f.index,i=f.index+(f[0].length||1),i==h.length)break}var k=f&&f[0].length||0;k||(0==g&&0==h.length?f=void 0:g!=a.getLine(e.line).length&&k++)}else{c.lastIndex=e.ch;var h=a.getLine(e.line),f=c.exec(h),k=f&&f[0].length||0,g=f&&f.index;g+k==h.length||k||(k=1)}return f&&k?{from:b(e.line,g),to:b(e.line,g+k),match:f}:void 0};else{e&&(c=c.toLowerCase());var f=e?function(a){return a.toLowerCase()}:function(a){return a},g=c.split("\n");1==g.length?c.length?this.matches=function(d,e){var g,h=f(a.getLine(e.line)),i=c.length;return(d?e.ch>=i&&-1!=(g=h.lastIndexOf(c,e.ch-i)):-1!=(g=h.indexOf(c,e.ch)))?{from:b(e.line,g),to:b(e.line,g+i)}:void 0}:this.matches=function(){}:this.matches=function(c,d){var e=d.line,h=c?g.length-1:0,i=g[h],j=f(a.getLine(e)),k=c?j.indexOf(i)+i.length:j.lastIndexOf(i);if(!(c?k>=d.ch||k!=i.length:k<=d.ch||k!=j.length-i.length))for(;;){if(c?!e:e==a.lineCount()-1)return;if(j=f(a.getLine(e+=c?-1:1)),i=g[c?--h:++h],!(h>0&&h<g.length-1)){var l=c?j.lastIndexOf(i):j.indexOf(i)+i.length;if(c?l!=j.length-i.length:l!=i.length)return;var m=b(d.line,k),n=b(e,l);return{from:c?n:m,to:c?m:n}}if(j!=i)return}}}}var b=CodeMirror.Pos;a.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(a){function c(a){var c=b(a,0);return d.pos={from:c,to:c},d.atOccurrence=!1,!1}for(var d=this,e=this.doc.clipPos(a?this.pos.from:this.pos.to);;){if(this.pos=this.matches(a,e))return this.pos.from&&this.pos.to||console.log(this.matches,this.pos),this.atOccurrence=!0,this.pos.match||!0;if(a){if(!e.line)return c(0);e=b(e.line-1,this.doc.getLine(e.line-1).length)}else{var f=this.doc.lineCount();if(e.line==f-1)return c(f);e=b(e.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(a){if(this.atOccurrence){var c=CodeMirror.splitLines(a);this.doc.replaceRange(c,this.pos.from,this.pos.to),this.pos.to=b(this.pos.from.line+c.length-1,c[c.length-1].length+(1==c.length?this.pos.from.ch:0))}}},CodeMirror.defineExtension("getSearchCursor",function(b,c,d){return new a(this.doc,b,c,d)}),CodeMirror.defineDocExtension("getSearchCursor",function(b,c,d){return new a(this,b,c,d)})}(),function(){function a(a){return"string"==typeof a?{token:function(b){return b.match(a)?"searching":(b.next(),void(b.skipTo(a.charAt(0))||b.skipToEnd()))}}:{token:function(b){if(b.match(a))return"searching";for(;!b.eol()&&(b.next(),!b.match(a,!1)););}}}function b(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function c(a){return a.state.search||(a.state.search=new b)}function d(a,b,c){return a.getSearchCursor(b,c,"string"==typeof b&&b==b.toLowerCase())}function e(a,b,c,d){a.openDialog?a.openDialog(b,d):d(prompt(c,""))}function f(a,b,c,d){a.openConfirm?a.openConfirm(b,d):confirm(c)&&d[0]()}function g(a){var b=a.match(/^\/(.*)\/([a-z]*)$/);return b?new RegExp(b[1],-1==b[2].indexOf("i")?"":"i"):a}function h(b,d){var f=c(b);return f.query?i(b,d):void e(b,l,"Search for:",function(c){b.operation(function(){c&&!f.query&&(f.query=g(c),b.removeOverlay(f.overlay),f.overlay=a(f.query),b.addOverlay(f.overlay),f.posFrom=f.posTo=b.getCursor(),i(b,d))})})}function i(a,b){a.operation(function(){var e=c(a),f=d(a,e.query,b?e.posFrom:e.posTo);(f.find(b)||(f=d(a,e.query,b?CodeMirror.Pos(a.lastLine()):CodeMirror.Pos(a.firstLine(),0)),f.find(b)))&&(a.setSelection(f.from(),f.to()),e.posFrom=f.from(),e.posTo=f.to())})}function j(a){a.operation(function(){var b=c(a);b.query&&(b.query=null,a.removeOverlay(b.overlay))})}function k(a,b){e(a,m,"Replace:",function(c){c&&(c=g(c),e(a,n,"Replace with:",function(e){if(b)a.operation(function(){for(var b=d(a,c);b.findNext();)if("string"!=typeof c){var f=a.getRange(b.from(),b.to()).match(c);b.replace(e.replace(/\$(\d)/,function(a,b){return f[b]}))}else b.replace(e)});else{j(a);var g=d(a,c,a.getCursor()),h=function(){var b,e=g.from();!(b=g.findNext())&&(g=d(a,c),!(b=g.findNext())||e&&g.from().line==e.line&&g.from().ch==e.ch)||(a.setSelection(g.from(),g.to()),f(a,o,"Replace?",[function(){i(b)},h]))},i=function(a){g.replace("string"==typeof c?e:e.replace(/\$(\d)/,function(b,c){return a[c]})),h()};h()}}))})}var l='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',m='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',n='With: <input type="text" style="width: 10em"/>',o="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";CodeMirror.commands.find=function(a){j(a),h(a)},CodeMirror.commands.findNext=h,CodeMirror.commands.findPrev=function(a){h(a,!0)},CodeMirror.commands.clearSearch=j,CodeMirror.commands.replace=k,CodeMirror.commands.replaceAll=function(a){k(a,!0)}}(),function(){function a(a){"object"==typeof a&&(this.minChars=a.minChars,this.style=a.style,this.showToken=a.showToken),null==this.style&&(this.style=g),null==this.minChars&&(this.minChars=f),this.overlay=this.timeout=null}function b(a){var b=a.state.matchHighlighter;clearTimeout(b.timeout),b.timeout=setTimeout(function(){c(a)},100)}function c(a){a.operation(function(){var b=a.state.matchHighlighter;if(b.overlay&&(a.removeOverlay(b.overlay),b.overlay=null),!a.somethingSelected()&&b.showToken){var c=a.getTokenAt(a.getCursor()).string;return void(/\w/.test(c)&&a.addOverlay(b.overlay=e(c,!0,b.style)))}if(a.getCursor("head").line==a.getCursor("anchor").line){var d=a.getSelection().replace(/^\s+|\s+$/g,"");d.length>=b.minChars&&a.addOverlay(b.overlay=e(d,!1,b.style))}})}function d(a){return(a.start||/.\b./.test(a.string.slice(a.start-1,a.start+1)))&&(a.pos==a.string.length||/.\b./.test(a.string.slice(a.pos-1,a.pos+1)))}function e(a,b,c){return{token:function(e){return!e.match(a)||b&&!d(e)?(e.next(),void(e.skipTo(a.charAt(0))||e.skipToEnd())):c}}}var f=2,g="matchhighlight";CodeMirror.defineOption("highlightSelectionMatches",!1,function(d,e,f){if(f&&f!=CodeMirror.Init){var g=d.state.matchHighlighter.overlay;g&&d.removeOverlay(g),clearTimeout(d.state.matchHighlighter.timeout),d.state.matchHighlighter=null,d.off("cursorActivity",b)}e&&(d.state.matchHighlighter=new a(e),c(d),d.on("cursorActivity",b))})}(),function(){function a(a,b,c){function d(b,c,d){if(b.text){var g=m?0:b.text.length-1,i=m?b.text.length:-1;if(b.text.length>h)return null;for(null!=d&&(g=d+n);g!=i;g+=n){var j=b.text.charAt(g);if(r.test(j)&&a.getTokenTypeAt(e(c,g+1))==p){var k=f[j];if(">"==k.charAt(1)==m)q.push(j);else{if(q.pop()!=k.charAt(0))return{pos:g,match:!1};if(!q.length)return{pos:g,match:!0}}}}}}var g=a.state.matchBrackets,h=g&&g.maxScanLineLength||1e4,i=b||a.getCursor(),j=a.getLineHandle(i.line),k=i.ch-1,l=k>=0&&f[j.text.charAt(k)]||f[j.text.charAt(++k)];if(!l)return null;var m=">"==l.charAt(1),n=m?1:-1;if(c&&m!=(k==i.ch))return null;for(var o,p=a.getTokenTypeAt(e(i.line,k+1)),q=[j.text.charAt(k)],r=/[(){}[\]]/,s=i.line,t=m?Math.min(s+100,a.lineCount()):Math.max(-1,s-100);s!=t&&!(o=s==i.line?d(j,s,k):d(a.getLineHandle(s),s));s+=n);return{from:e(i.line,k),to:o&&e(s,o.pos),match:o&&o.match,forward:m}}function b(b,c){var f=b.state.matchBrackets.maxHighlightLineLength||1e3,g=a(b);if(!(!g||b.getLine(g.from.line).length>f||g.to&&b.getLine(g.to.line).length>f)){var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",i=b.markText(g.from,e(g.from.line,g.from.ch+1),{className:h}),j=g.to&&b.markText(g.to,e(g.to.line,g.to.ch+1),{className:h});d&&b.state.focused&&b.display.input.focus();var k=function(){b.operation(function(){i.clear(),j&&j.clear()})};return c?void setTimeout(k,800):k}}function c(a){a.operation(function(){g&&(g(),g=null),a.somethingSelected()||(g=b(a,!1))})}var d=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),e=CodeMirror.Pos,f={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},g=null;CodeMirror.defineOption("matchBrackets",!1,function(a,b,d){d&&d!=CodeMirror.Init&&a.off("cursorActivity",c),b&&(a.state.matchBrackets="object"==typeof b?b:{},a.on("cursorActivity",c))}),CodeMirror.defineExtension("matchBrackets",function(){b(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(b,c){return a(this,b,c)})}(),function(){function a(a,b){var c=a.getRange(CodeMirror.Pos(b.line,b.ch-1),CodeMirror.Pos(b.line,b.ch+1));return 2==c.length?c:null}function b(b){for(var c={name:"autoCloseBrackets",Backspace:function(c){if(c.somethingSelected())return CodeMirror.Pass;var d=c.getCursor(),e=a(c,d);return e&&b.indexOf(e)%2==0?void c.replaceRange("",CodeMirror.Pos(d.line,d.ch-1),CodeMirror.Pos(d.line,d.ch+1)):CodeMirror.Pass}},d="",e=0;e<b.length;e+=2)(function(a,b){function e(c){var d=c.getSelection();c.replaceSelection(a+d+b)}function g(a){var c=a.getCursor(),d=a.getRange(c,CodeMirror.Pos(c.line,c.ch+1));return d!=b||a.somethingSelected()?CodeMirror.Pass:void a.execCommand("goCharRight")}a!=b&&(d+=b),c["'"+a+"'"]=function(c){if("'"==a&&"comment"==c.getTokenAt(c.getCursor()).type)return CodeMirror.Pass;if(c.somethingSelected())return e(c);if(a!=b||g(c)==CodeMirror.Pass){var h=c.getCursor(),i=CodeMirror.Pos(h.line,h.ch+1),j=c.getLine(h.line),k=j.charAt(h.ch);return j.length==h.ch||d.indexOf(k)>=0||f.test(k)?void c.replaceSelection(a+b,{head:i,anchor:i}):CodeMirror.Pass}},a!=b&&(c["'"+b+"'"]=g)})(b.charAt(e),b.charAt(e+1));return c}function c(b){return function(c){var d=c.getCursor(),e=a(c,d);return e&&b.indexOf(e)%2==0?void c.operation(function(){var a=CodeMirror.Pos(d.line+1,0);c.replaceSelection("\n\n",{anchor:a,head:a},"+input"),c.indentLine(d.line+1,null,!0),c.indentLine(d.line+2,null,!0)}):CodeMirror.Pass}}var d="()[]{}''\"\"",e="[]{}",f=/\s/;CodeMirror.defineOption("autoCloseBrackets",!1,function(a,f,g){if(g!=CodeMirror.Init&&g&&a.removeKeyMap("autoCloseBrackets"),f){var h=d,i=e;"string"==typeof f?h=f:"object"==typeof f&&(null!=f.pairs&&(h=f.pairs),null!=f.explode&&(i=f.explode));var j=b(h);i&&(j.Enter=c(i)),a.addKeyMap(j)}})}(),CodeMirror.defineOption("showTrailingSpace",!1,function(a,b,c){c==CodeMirror.Init&&(c=!1),c&&!b?a.removeOverlay("trailingspace"):!c&&b&&a.addOverlay({token:function(a){for(var b=a.string.length,c=b;c&&/\s/.test(a.string.charAt(c-1));--c);return c>a.pos?(a.pos=c,null):(a.pos=b,"trailingspace")},name:"trailingspace"})}),function(){"use strict";function a(a){var b=a.search(c);return-1==b?0:b}var b={},c=/[^\s\u00a0]/,d=CodeMirror.Pos;CodeMirror.commands.toggleComment=function(a){var b=a.getCursor("start"),c=a.getCursor("end");a.uncomment(b,c)||a.lineComment(b,c)},CodeMirror.defineExtension("lineComment",function(e,f,g){g||(g=b);var h=this,i=CodeMirror.innerMode(h.getMode(),h.getTokenAt(e).state).mode,j=g.lineComment||i.lineComment;if(!j)return void((g.blockCommentStart||i.blockCommentStart)&&(g.fullLines=!0,h.blockComment(e,f,g)));var k=h.getLine(e.line);if(null!=k){var l=Math.min(0!=f.ch||f.line==e.line?f.line+1:f.line,h.lastLine()+1),m=null==g.padding?" ":g.padding,n=g.commentBlankLines||e.line==f.line;h.operation(function(){if(g.indent)for(var b=k.slice(0,a(k)),f=e.line;l>f;++f){var i=h.getLine(f),o=b.length;(n||c.test(i))&&(i.slice(0,o)!=b&&(o=a(i)),h.replaceRange(b+j+m,d(f,0),d(f,o)))}else for(var f=e.line;l>f;++f)(n||c.test(h.getLine(f)))&&h.replaceRange(j+m,d(f,0))})}}),CodeMirror.defineExtension("blockComment",function(a,e,f){f||(f=b);var g=this,h=CodeMirror.innerMode(g.getMode(),g.getTokenAt(a).state).mode,i=f.blockCommentStart||h.blockCommentStart,j=f.blockCommentEnd||h.blockCommentEnd;if(!i||!j)return void((f.lineComment||h.lineComment)&&0!=f.fullLines&&g.lineComment(a,e,f));var k=Math.min(e.line,g.lastLine());k!=a.line&&0==e.ch&&c.test(g.getLine(k))&&--k;var l=null==f.padding?" ":f.padding;a.line>k||g.operation(function(){if(0!=f.fullLines){var b=c.test(g.getLine(k));g.replaceRange(l+j,d(k)),g.replaceRange(i+l,d(a.line,0));var m=f.blockCommentLead||h.blockCommentLead;if(null!=m)for(var n=a.line+1;k>=n;++n)(n!=k||b)&&g.replaceRange(m+l,d(n,0))}else g.replaceRange(j,e),g.replaceRange(i,a)})}),CodeMirror.defineExtension("uncomment",function(a,e,f){f||(f=b);var g,h=this,i=CodeMirror.innerMode(h.getMode(),h.getTokenAt(a).state).mode,j=Math.min(e.line,h.lastLine()),k=Math.min(a.line,j),l=f.lineComment||i.lineComment,m=[],n=null==f.padding?" ":f.padding;a:if(l){for(var o=k;j>=o;++o){var p=h.getLine(o),q=p.indexOf(l);if(-1==q&&(o!=j||o==k)&&c.test(p))break a;if(o!=k&&q>-1&&c.test(p.slice(0,q)))break a;m.push(p)}if(h.operation(function(){for(var a=k;j>=a;++a){var b=m[a-k],c=b.indexOf(l),e=c+l.length;0>c||(b.slice(e,e+n.length)==n&&(e+=n.length),g=!0,h.replaceRange("",d(a,c),d(a,e)))}}),g)return!0}var r=f.blockCommentStart||i.blockCommentStart,s=f.blockCommentEnd||i.blockCommentEnd;if(!r||!s)return!1;var t=f.blockCommentLead||i.blockCommentLead,u=h.getLine(k),v=j==k?u:h.getLine(j),w=u.indexOf(r),x=v.lastIndexOf(s);return-1==x&&k!=j&&(v=h.getLine(--j),x=v.lastIndexOf(s)),-1==w||-1==x?!1:(h.operation(function(){h.replaceRange("",d(j,x-(n&&v.slice(x-n.length,x)==n?n.length:0)),d(j,x+s.length));var a=w+r.length;if(n&&u.slice(a,a+n.length)==n&&(a+=n.length),h.replaceRange("",d(k,w),d(k,a)),t)for(var b=k+1;j>=b;++b){var e=h.getLine(b),f=e.indexOf(t);if(-1!=f&&!c.test(e.slice(0,f))){var g=f+t.length;n&&e.slice(g,g+n.length)==n&&(g+=n.length),h.replaceRange("",d(b,f),d(b,g))}}}),!0)})}(),function(){"use strict";function a(a){"activeLine"in a.state&&(a.removeLineClass(a.state.activeLine,"wrap",c),a.removeLineClass(a.state.activeLine,"background",d))}function b(b){var e=b.getLineHandle(b.getCursor().line);b.state.activeLine!=e&&(a(b),b.addLineClass(e,"wrap",c),b.addLineClass(e,"background",d),b.state.activeLine=e)}var c="CodeMirror-activeline",d="CodeMirror-activeline-background";CodeMirror.defineOption("styleActiveLine",!1,function(c,d,e){var f=e&&e!=CodeMirror.Init;d&&!f?(b(c),c.on("cursorActivity",b)):!d&&f&&(c.off("cursorActivity",b),a(c),delete c.state.activeLine)})}(),function(){"use strict";function a(a){a.operation(function(){g(a)})}function b(a){a.state.markedSelection.length&&a.operation(function(){e(a)})}function c(a,b){return a.line-b.line||a.ch-b.ch}function d(a,b,d,e){if(0!=c(b,d))for(var f=a.state.markedSelection,g=a.state.markedSelectionStyle,j=b.line;;){var k=j==b.line?b:i(j,0),l=j+h,m=l>=d.line,n=m?d:i(l,0),o=a.markText(k,n,{className:g});if(null==e?f.push(o):f.splice(e++,0,o),m)break;j=l}}function e(a){for(var b=a.state.markedSelection,c=0;c<b.length;++c)b[c].clear();b.length=0}function f(a){e(a);var b=a.getCursor("start"),c=a.getCursor("end");d(a,b,c)}function g(a){var b=a.getCursor("start"),g=a.getCursor("end");if(0==c(b,g))return e(a);var i=a.state.markedSelection;if(!i.length)return d(a,b,g);var j=i[0].find(),k=i[i.length-1].find();if(!j||!k||g.line-b.line<h||c(b,k.to)>=0||c(g,j.from)<=0)return f(a);for(;c(b,j.from)>0;)i.shift().clear(),j=i[0].find();for(c(b,j.from)<0&&(j.to.line-b.line<h?(i.shift().clear(),d(a,b,j.to,0)):d(a,b,j.from,0));c(g,k.to)<0;)i.pop().clear(),k=i[i.length-1].find();c(g,k.to)>0&&(g.line-k.from.line<h?(i.pop().clear(),d(a,k.from,g)):d(a,k.to,g))}CodeMirror.defineOption("styleSelectedText",!1,function(c,d,g){var h=g&&g!=CodeMirror.Init;d&&!h?(c.state.markedSelection=[],c.state.markedSelectionStyle="string"==typeof d?d:"CodeMirror-selectedtext",f(c),c.on("cursorActivity",a),c.on("change",b)):!d&&h&&(c.off("cursorActivity",a),c.off("change",b),e(c),c.state.markedSelection=c.state.markedSelectionStyle=null)});var h=8,i=CodeMirror.Pos}(),function(){"use strict";function a(a,b,c){this.cm=a,this.getHints=b,this.options=c,this.widget=this.onClose=null}function b(a){return"string"==typeof a?a:a.text}function c(a,b){function c(a,c){var f;f="string"!=typeof c?function(a){return c(a,b)}:d.hasOwnProperty(c)?d[c]:c,e[a]=f}var d={Up:function(){b.moveFocus(-1)},Down:function(){b.moveFocus(1)},PageUp:function(){b.moveFocus(-b.menuSize())},PageDown:function(){b.moveFocus(b.menuSize())},Home:function(){b.setFocus(0)},End:function(){b.setFocus(b.length)},Enter:b.pick,Tab:b.pick,Esc:b.close},e=a.customKeys?{}:d;if(a.customKeys)for(var f in a.customKeys)a.customKeys.hasOwnProperty(f)&&c(f,a.customKeys[f]);if(a.extraKeys)for(var f in a.extraKeys)a.extraKeys.hasOwnProperty(f)&&c(f,a.extraKeys[f]);return e}function d(a,d){this.completion=a,this.data=d;var e=this,f=a.cm,g=a.options,h=this.hints=document.createElement("ul");h.className="CodeMirror-hints",this.selectedHint=0;for(var i=d.list,j=0;j<i.length;++j){var k=h.appendChild(document.createElement("li")),l=i[j],m="CodeMirror-hint"+(j?"":" CodeMirror-hint-active");null!=l.className&&(m=l.className+" "+m),k.className=m,l.render?l.render(k,d,l):k.appendChild(document.createTextNode(l.displayText||b(l))),k.hintId=j}var n=f.cursorCoords(g.alignWithWord!==!1?d.from:null),o=n.left,p=n.bottom,q=!0;h.style.left=o+"px",h.style.top=p+"px";var r=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),s=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),t=h.getBoundingClientRect(),u=t.right-r,v=t.bottom-s;if(u>0&&(t.right-t.left>r&&(h.style.width=r-5+"px",u-=t.right-t.left-r),h.style.left=(o=n.left-u)+"px"),v>0){var w=t.bottom-t.top;t.top-(n.bottom-n.top)-w>0?(v=w+(n.bottom-n.top),q=!1):w>s&&(h.style.height=s-5+"px",v-=w-s),h.style.top=(p=n.bottom-v)+"px"}if((g.container||document.body).appendChild(h),f.addKeyMap(this.keyMap=c(g,{moveFocus:function(a){e.changeActive(e.selectedHint+a)},setFocus:function(a){e.changeActive(a)},menuSize:function(){return e.screenAmount()},length:i.length,close:function(){a.close()},pick:function(){e.pick()}})),g.closeOnUnfocus!==!1){var x;f.on("blur",this.onBlur=function(){x=setTimeout(function(){a.close()},100)}),f.on("focus",this.onFocus=function(){clearTimeout(x)})}var y=f.getScrollInfo();return f.on("scroll",this.onScroll=function(){var b=f.getScrollInfo(),c=f.getWrapperElement().getBoundingClientRect(),d=p+y.top-b.top,e=d-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return q||(e+=h.offsetHeight),e<=c.top||e>=c.bottom?a.close():(h.style.top=d+"px",void(h.style.left=o+y.left-b.left+"px"))}),CodeMirror.on(h,"dblclick",function(a){var b=a.target||a.srcElement;null!=b.hintId&&(e.changeActive(b.hintId),e.pick())}),CodeMirror.on(h,"click",function(a){var b=a.target||a.srcElement;null!=b.hintId&&e.changeActive(b.hintId)}),CodeMirror.on(h,"mousedown",function(){setTimeout(function(){f.focus()},20)}),CodeMirror.signal(d,"select",i[0],h.firstChild),!0}CodeMirror.showHint=function(b,c,d){if(!b.somethingSelected()&&(null==c&&(c=b.getHelper(b.getCursor(),"hint")),null!=c)){b.state.completionActive&&b.state.completionActive.close();var e=b.state.completionActive=new a(b,c,d||{});return CodeMirror.signal(b,"startCompletion",b),e.options.async?void c(b,function(a){e.showHints(a)},e.options):e.showHints(c(b,e.options))}},a.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.widget&&this.widget.close(),this.onClose&&this.onClose(),CodeMirror.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(a,c){var d=a.list[c];d.hint?d.hint(this.cm,a,d):this.cm.replaceRange(b(d),a.from,a.to),this.close()},showHints:function(a){return a&&a.list.length&&this.active()?void(0!=this.options.completeSingle&&1==a.list.length?this.pick(a,0):this.showWidget(a)):this.close()},showWidget:function(a){function b(){h||(h=!0,j.close(),j.cm.off("cursorActivity",g),CodeMirror.signal(a,"close"))}function c(){return h?!0:j.widget?void 0:(b(),!0)}function e(){c()||(CodeMirror.signal(a,"update"),j.options.async?j.getHints(j.cm,f,j.options):f(j.getHints(j.cm,j.options)))}function f(e){if(a=e,!c()){if(!a||!a.list.length)return b();j.widget.close(),j.widget=new d(j,a)}}function g(){clearTimeout(i);var a=j.cm.getCursor(),b=j.cm.getLine(a.line);a.line!=l.line||b.length-a.ch!=m-l.ch||a.ch<l.ch||j.cm.somethingSelected()||a.ch&&k.test(b.charAt(a.ch-1))?j.close():i=setTimeout(e,170)}this.widget=new d(this,a),CodeMirror.signal(a,"shown");var h,i=null,j=this,k=this.options.closeCharacters||/[\s()\[\]{};:>,]/,l=this.cm.getCursor(),m=this.cm.getLine(l.line).length;this.cm.on("cursorActivity",g),this.onClose=b}},d.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var a=this.completion.cm;this.completion.options.closeOnUnfocus!==!1&&(a.off("blur",this.onBlur),a.off("focus",this.onFocus)),a.off("scroll",this.onScroll)}},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(a){if(a=Math.max(0,Math.min(a,this.data.list.length-1)),this.selectedHint!=a){var b=this.hints.childNodes[this.selectedHint];b.className=b.className.replace(" CodeMirror-hint-active",""),b=this.hints.childNodes[this.selectedHint=a],b.className+=" CodeMirror-hint-active",b.offsetTop<this.hints.scrollTop?this.hints.scrollTop=b.offsetTop-3:b.offsetTop+b.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=b.offsetTop+b.offsetHeight-this.hints.clientHeight+3),CodeMirror.signal(this.data,"select",this.data.list[this.selectedHint],b)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}}}();var Toolbar=function(a){var b=$(a),c=$('<div class="btn-toolbar">');this.addButtonGroup=function(a){var b=$('<div class="btn-group">');return _.each(a,function(a){a.render(b)}),c.append(b),b};var d=function(){b.append(c)};d()},ToolbarButton=function(a,b,c,d){var e=this,f=c,g=a,h=b,i=null;e.render=function(a){i&&(i.remove(),i.data("button",null),i=null),i=$('<button class="btn">'),d&&i.addClass(d),e.setLabel(g),f&&i.tooltip({title:f,placement:"top",delay:100,container:"body"}),h&&i.click(function(){i.tooltip("hide"),h()}),i.data("button",e),a.append(i)},e.disable=function(){i.attr("disabled","disabled"),i.tooltip("hide")},e.enable=function(){i.removeAttr("disabled")},e.setLabel=function(a){g=a,/^icon-/.test(a)&&(a=$("<i>").addClass(a)),i.empty().append(a)},e.setID=function(a){i.attr("id",a)}},Editor=function(a,b,c){this.AUTOSAVE_TRIGGER_EVENTS=30;var d,e,f,g=this,h=$(a),i=null,j=b,k=null,l=0,m=new Editor.Autocomplete(this,b),n=null,o=null,p=!1,q=null,r={},s=[];_.extend(this,Backbone.Events),this.addButtonGroup=function(a){return e.addButtonGroup(a)},this.focusTab=function(a){t(r[a])},this.unfocusTab=function(a){u(r[a])},this.closeTab=function(a){v(r[a])},this.closeAllTabs=function(a){_.each(r,function(b){v(b,a)})},this.metadata_count=function(a,b){var c=F(b);c&&(c.metadata[a]=(c.metadata[a]||0)+1)},this.content=function(a,b){var c=F(b);return c?(a&&this.metadata_count(a),I(c),c.cm.getValue()):null},this.metadata=function(a){var b=F(a);return b?b.metadata:null},this.markErrorLine=function(a,b,c,d){var e=F(a);if(!e)return!1;var f=e.cm;f.addLineClass(c,"background","cm-error-line"),f.addLineWidget(c,w(b),{noHScroll:!0,handleMouseEvents:!0}),t(e),f.scrollIntoView({line:c,ch:d},40),f.setCursor({line:c,ch:d});var g=f.lineInfo(c).handle;s.push({filename:a,handle:g})},this.clearErrors=function(){_.each(s,function(a){if(r[a.filename]){var b=r[a.filename].cm,c=b.lineInfo(a.handle);if(!c)return;b.removeLineClass(c.handle,"background","cm-error-line"),_.each(c.widgets,function(a){a.clear()})}}),s=[]},this.addLineClass=function(a,b,c){var d=F(a);if(!d)return!1;var e=d.cm.addLineClass(b,"background",c);return{clear:function(){d.cm.removeLineClass(e,"background",c)}}},this.showLine=function(a,b,c){var d=F(a);return d?(d.cm.scrollIntoView({line:b,chr:0|c}),!0):!1},this.redraw=function(){i&&i.cm.refresh()},this.getFile=function(a,b,c){_.has(r,a)?b({name:a,data:r[a].cm.getValue(),metadata:r[a].metadata,autosave:void 0,shared:!1}):"undefined"!=typeof FileSystem?FileSystem.getFile(a,b,c):c()},this.openFile=function(a,b,c){return _.has(r,a)?void t(r[a]):"undefined"==typeof FileSystem?void PassiveAlert("Failed to open "+a):void FileSystem.getFile(a,function(a){g.openTab(a.name,a.data,b,a.autosave,a.shared,a.metadata),c&&c(a.name,a.data)},function(){PassiveAlert("Failed to open "+a)})},this.openTab=function(a,b,c,d,e,j){var m;if(_.has(r,a))return m=r[a],t(m),m;var n=!0;a||(n=!1,a="*untitled "+ ++l);var o=_.uniqueId("edit_tab"),p=$("<div>",{"class":"tab-pane",id:o}).hide(),q=x(p,b,!!e),s=$("<li>");m={el:p,tab:s,cm:q,hasLocation:n,name:a,generation:q.changeGeneration(),autosaveGeneration:q.changeGeneration(),isAutosaving:!1,n:0,autosaved:d||null,metadata:j||{},readonly:e};var w=a,A=$("<a>",{href:"#"+o}).text(w).click(function(a){a.preventDefault(),t(m)});s.append(A),e&&A.append('<span class="icon-ban-circle"></span>');var B=$('<button class="close">&times;</button>').click(function(a){a.preventDefault(),a.stopPropagation(),v(m)}).css({"margin-top":-2,"margin-left":5,"margin-right":-7}).on("mouseenter",z).on("mouseleave",function(){y(m)});return q.on("change",function(b,c){m.metadata.changes=(m.metadata.changes||0)+1,y(m),g.trigger("change",a,c)}),q.on("cursorActivity",function(){m.n++,m.n>=g.AUTOSAVE_TRIGGER_EVENTS&&(m.n=0,I(m))}),A.append(B),f.prepend(s),N(),h.append(p),(!_.size(r)||c)&&(u(i),t(m)),r[a]=m,K(),k&&g.setHeight(k),$(window).resize(),m},this.load_initial_contents=function(a,b){a.cm.setValue(b),a.generation=a.cm.changeGeneration(),a.autosaveGeneration=a.cm.changeGeneration()},this.currentFilename=function(){return i?i.name:null},this.currentTab=this.currentFilename,this.filenames=function(){return _.pluck(r,"name")},this.setHeight=function(a){if(i){k=a,h.height(a);var b=i.el.position().top;_.each(r,function(c){c.cm.getWrapperElement().style.height=a-b+"px",c.cm.refresh()})}},this.blur=function(){i&&i.cm.getInputField().blur()};var t=function(a){a.tab.find("a").tab("show"),i&&i.el.hide(),a.el.show().addClass("active"),a.cm.refresh(),a.cm.focus(),i=a,c||(a.autosaved&&a.autosaved.contents?o.show():o.hide(),a.readonly?n.hide():n.show())},u=function(a){a&&(a.el.removeClass("active").hide(),a.tab.removeClass("active"))},v=function(a,b){if(a){if(!a.cm.isClean(a.generation)&&!b){var d=new ModalDialog;return d.setTitle("Unsaved document"),d.setContent("<p><strong>Do you want to save the changes you made to "+a.name+"?</strong></p><p>Your changes will be lost if you don't save them.</p>"),d.addButton("Don't save",function(){v(a,!0),d.dismiss()},"btn-danger"),d.addButton("Cancel","dismiss"),d.addButton("Save",function(){H(),v(a,!0),d.dismiss()},"btn-primary"),void d.show()}var e=a.tab.prev();if(e.length||(e=a.tab.next()),e.length){var f=_.find(_.values(r),function(a){return a.tab[0]==e[0]});f?t(f):c||o.hide()}else c||o.hide();delete r[a.name],a.el.remove(),a.tab.remove(),K()}},w=function(a){var b=$('<div class="cm-error-widget">'),c=$("<span>");return c.text(a).appendTo(b),b[0]},x=function(a,b,c){var d=new CodeMirror(a[0],{indentUint:4,lineNumbers:!0,electricChars:!0,matchBrackets:!0,autoCloseBrackets:!1,smartIndent:!0,indentWithTabs:!0,styleActiveLine:!0,value:b,tabindex:-1,mode:j,readOnly:c,extraKeys:{Tab:function(){for(var a=d.getAllMarks(),b=d.getCursor(),c=null,e=null,f=1/0,g=a.length-1;g>=0;g--){var h=a[g],i=h.find();if(void 0!==i&&b.line>=i.from.line-5&&(b.line<i.from.line||b.ch<=i.from.ch)){var j=1e4*(i.from.line-b.line)+(i.from.ch-b.ch);f>j&&(c=i,e=h,f=j)}}return null===c?CodeMirror.Pass:void e.clear()}}});return d},y=function(a){var b=a.tab.find(".close");a.cm.isClean(a.generation)?b.text("\xd7"):b.text("\u25cf")},z=function(){$(this).text("\xd7")},A=function(){i&&H()},B=function(){_.each(r,function(a){a.cm.isClean(a.generation)||H(a)})};this.get_all_documents=function(a){var b={};for(var c in r)if(_.has(r,c)){var d=r[c];a&&d.readonly||(b[c]=d.cm.getValue(),d.generation=d.cm.changeGeneration(),d.autosaveGeneration=d.generation,E(d),y(d))}return b};var C=function(){if(i){var a=i;return"undefined"==typeof FileSystem?void PassiveAlert("Revert failed; unable to load old version.","error"):void FileSystem.getBackup(a.name,function(b){a.cm.setValue(b.data),a.metadata=b.metadata},function(a){PassiveAlert("Revert failed; unable to load old version.","error")})}},D=function(){i&&(i.cm.setValue(i.autosaved.contents),i.metadata=i.autosaved.metadata,E(i))},E=function(a){a.autosaved=null,i==a&&(c||o.hide())},F=function(a){var b;return b=a?r[a]:i,b?b:!1},G=function(){d=$("<div>"),e=new Toolbar(d),c||(n=g.addButtonGroup([new ToolbarButton("Save",A,"Save current file"),new ToolbarButton("Save All",B,"Save all open buffers"),new ToolbarButton("Revert",C,"Revert the current buffer to an earlier state.")]),o=g.addButtonGroup([new ToolbarButton("Restore Autosave",D,"There is an autosaved document more recent than your last save.","btn-warning")]).hide()),h.append(d),h.css("position","relative"),f=$('<ul class="nav nav-tabs">'),h.append(f),$(window).on("beforeunload",J),Editor.IsSetUp||(CodeMirror.commands.save=function(){H()},CodeMirror.commands.autocomplete=function(a){CodeMirror.showHint(a,m.complete,{completeSingle:!1})},CodeMirror.keyMap.macDefault["Cmd-/"]="toggleComment",CodeMirror.keyMap.pcDefault["Ctrl-/"]="toggleComment",CodeMirror.keyMap.macDefault["Ctrl-Space"]="autocomplete",CodeMirror.keyMap.pcDefault["Ctrl-Space"]="autocomplete",Editor.IsSetUp=!0),L()||M()},H=function(a){return a||(a=i),a?"undefined"==typeof FileSystem?void(g.save_to_server&&g.save_to_server()):void FileSystem.saveFile(a.name,a.cm.getValue(),function(){a.generation=a.cm.changeGeneration(),a.autosaveGeneration=a.generation,E(a),y(a)},void 0,a.metadata):!1},I=function(a){if("undefined"!=typeof FileSystem){if(a.cm.isClean(a.autosaveGeneration)||a.isAutosaving)return;a.isAutosaving=!0,E(a);var b=a.cm.changeGeneration();return void FileSystem.makeAutoSave(a.name,a.cm.getValue(),function(){a.isAutosaving=!1,a.autosaveGeneration=b},function(){a.isAutosaving=!1,console.warn("Autosave failed.")},a.metadata)}return g.save_to_server?void g.save_to_server():void 0},J=function(){for(var a in r)if(_.has(r,a)){var b=r[a];if(!b.cm.isClean(b.generation))return"You have unsaved files. If you leave the page you will lose your unsaved work."}},K=function(){},L=function(){return!1},M=function(){if(_.isEmpty(r)){var a="To create a file or folder, hover over the desired parent folder on the left and click the new file or new folder icons. To open a file or folder, single click it in the list on the left. You can move files by dragging them from their existing location to the desired one.";q=$('<div class="editor-tips">').html(a),h.append(q),p=!0}},N=function(){p&&(p=!1,q.remove())};G()};Editor.Completions={},Editor.IsSetUp=!1;var ModalDialog=function(){var a=this,b=null,c=null,d=null,e=null,f=null,g=null;this.setTitle=function(a){return c.text(a),this},this.setContent=function(a){
return d.html(a),this},this.setText=function(a){var b=$("<p>").text(a);return d.empty().append(b),this},this.addButton=function(b,c,d){var e=$('<a href="#" class="btn">').text(b);if("dismiss"===c)e.attr("data-dismiss","modal");else{if(!_.isFunction(c))throw new Error("Button added with illegal callback!");e.click(function(){c(a)})}return d&&e.addClass(d),g.append(e),this},this.inputBox=function(c){var d=$("<div>").appendTo(e);c.label&&(e.addClass("form-horizontal"),d.addClass("control-group"));var f=$('<input type="text">').appendTo(d);if(c.label){$("<label>").addClass("control-label").text(c.label).appendTo(d);$("<div>").addClass("controls").appendTo(d).append(f)}if(c.placeholder&&f.attr("placeholder",c.placeholder),c.type&&f.attr("type",c.type),c.prefix&&(d.addClass("input-prepend"),$('<span class="add-on">').text(c.prefix).prependTo(d)),c.suffix&&(d.addClass("input-append"),$('<span class="add-on">').text(c.suffix).appendTo(d)),c.callback&&f.keypress(function(b){var d=b.which||b.keyCode;13==d&&(c.callback(a),b.preventDefault())}),c.typeahead){var g=c.typeahead;_.isFunction(g)?g={source:g}:_.isArray(g)&&(g={source:g}),b.find(".modal-body").css("overflow-y","visible"),f.typeahead(g)}},this.inputContent=function(a){return a||(a=0),e.find("input").eq(a)?e.find("input").eq(a).val():null},this.clearInput=function(){e.clear()},this.showError=function(a,b,c){c||(c="alert-error"),f.empty();var d=$('<div class="alert">').addClass(c);b?d.html(a):d.text(a),d.appendTo(f)},this.show=function(){return ModalDialog.LastModal&&ModalDialog.LastModal.remove(),ModalDialog.LastModal=b.appendTo("body").modal("show"),this},this.dismiss=function(){return b.modal("hide"),this},this.setWidth=function(a){b.css("width",a)},this.noFocus=function(){b.off("shown")},this.find=function(a){return b.find(a)};var h=function(){b=$('            <div class="modal hide fade">                <div class="modal-header">                    <button class="close" data-dismiss="modal">&times;</button>                    <h3>Title</h3>                </div>                <div class="modal-body">                    <div class="modal-error">                    </div>                    <div class="body-holder"></div>                    <form class="modal-input">                    </form>                </div>                <div class="modal-footer">                </div>            </div>'),c=b.find("h3"),d=b.find(".body-holder"),e=b.find(".modal-input"),g=b.find(".modal-footer"),f=b.find(".modal-error"),b.on("shown",function(){e.find("input").first().focus()})};h()};ModalDialog.LastModal=null;var PassiveAlert=function(a,b){var c=$("#header-alert-holder"),d=$("<div>").addClass("alert fade in").text(a);b&&d.addClass("alert-"+b),d.append('<a class="close" data-dismiss="alert" href="#">&times;</a>'),c.empty().append(d),d.alert(),setTimeout(function(){d.alert("close")},1e4)};!function(){var a=this,b=function(a,b){var c,d=this,e=($(a),[]),f=[],g=0,h=0;_.extend(this,Backbone.Events),this.addPane=function(a){if(e.length){var b=$("<div>").addClass("split-splitter").css({height:g}).appendTo(c).append("<div>");f.push(b),i(f.length-1)}var d=$("<div>").addClass("split-holder").css({height:g,width:0}).append($(a)).appendTo(c);e.push(d)},this.setPaneWidth=function(a,b){var c=e[a].width();b=Math.floor(b),e[a].css({width:b}),a+1<e.length&&e[a+1].css({width:e[a+1].width()+(c-b)}),d.trigger("resize",d.currentState())};var i=function(a){var b=f[a];b.mousedown(function(b){var c=b.clientX,f=e[a].width(),g=e[a+1].width();$("body").mousemove(function(b){$("body").css({cursor:"col-resize"});var h=b.clientX-c,i=Math.min(Math.max(0,f+h),g+f),j=Math.min(Math.max(0,g-h),g+f);30>i?(j+=i,i=0):30>j&&(i+=j,j=0),e[a].css({width:i}),e[a+1].css({width:j}),b.preventDefault(),d.trigger("resize",_.map(e,function(a){return a.width()}))}),$("body").mouseup(function(){$("body").off("mouseup"),$("body").off("mousemove"),$("body").css({cursor:"auto"}),b.preventDefault()}),b.preventDefault()})};this.currentState=function(){return _.map(e,function(a){return a.width()})};var j=function(){var a=5,b=11,c=$(".xblock-6004").innerWidth()-b*(e.length-1)-a;return 2*Math.floor(c/2)};this.window_width=j;var k=function(a){c=$("#split-container");var b=$(".xblock-6004").innerHeight()-c.offset().top-10;g=b,c.css("height",b),_.each(a,function(a){d.addPane(a)});var i=j(),k=e.length?Math.floor(i/e.length):0;h=e.length*k,_.each(_.range(e.length),function(a){d.setPaneWidth(a,k)}),$(window).resize(function(){for(var a=j(),b=e.length-1;b>=0;b--)if(e[b].width()>0){var d=h-a,g=Math.max(0,e[b].width()-d);if(h-=Math.min(e[b].width(),d),e[b].css({width:g}),j>=h)break}var i=$(".xblock-6004").innerHeight()-c.offset().top;_.each(e,function(a){a.css({height:i-10})}),_.each(f,function(a){a.css({height:i})}),c.css({height:i})})};k(b)};a.SplitPane=b}(),Editor.Autocomplete=function(a,b){var c=null,d=null,e=null,f=CodeMirror.Pos,g=function(){return Editor.Completions[b]?(d=Editor.Completions[b].Settings,c=new RadixTree,void _.each(Editor.Completions[b].Terms,function(a){var b;b=_.isString(a)?a.toLowerCase():a.term?a.term[0].toLowerCase():a[0].toLowerCase(),c.insert(b,a)})):void console.warn("No autocomplete available for "+b)},h=function(a,b,c,d){c.off("beforeSelectionChange",e);var f=c.getRange(d.anchor,d.head),g=c.getRange(a.from,a.to);g==b?j(c,a.from,a.to):("'"==f[0]&&"'"==f[f.length-1]||'"'==f[0]&&'"'==f[f.length-1])&&(d.anchor.ch+=1,d.head.ch-=1)},i=function(a,b,c){var c=a.getRange(b.from,b.to);a.setSelection(b.from,b.to),e=_.partial(h,b,c),a.on("beforeSelectionChange",e)},j=function(a,b,c){var d=a.markText(b,c,{className:"cm-autofilled",inclusiveLeft:!1,inclusiveRight:!1,atomic:!0,startStyle:"cm-autofilled-start",endStyle:"cm-autofilled-end"});return CodeMirror.on(d,"beforeCursorEnter",function(){var b=d.find();d.clear(),setTimeout(function(){i(a,b)},50)}),d},k=function(a,b,c){a.replaceRange(c.text,b.from,b.to);var d=b.from.ch+c.name.length+c.settings.paramListStart.length,e=d,f=null,g=null;_.each(c.params,function(e){var h=[{line:b.from.line,ch:d},{line:b.from.line,ch:d+e.length}],i=j(a,h[0],h[1]);null===f&&(f=h),null===g&&(g=i),d+=e.length+c.settings.paramSpacer.length}),null===f?a.setSelection({ch:e,line:b.from.line}):(g.clear(),i(a,{from:f[0],to:f[1]}))},l=function(a,b,c){var d=$("<span>");d.append(document.createTextNode(c.name)),d.append($('<span class="muted">').append(c.settings.paramListStart+c.params.join(c.settings.paramSpacer)+c.settings.paramListEnd)),a.appendChild(d[0])},m=function(a){for(var b=c.search(a.string.toLowerCase(),15),e=[],f=b.length-1;f>=0;f--){var g=b[f],h=g.settings?g.settings:d;if(!h.filter||(g=h.filter(g,a),g!==!1))if(g.term&&(g=g.term),_.isString(b[f]))e.push({text:b[f]});else for(var i=g[0],j=g.length-1;j>=1;j--){var m=g[j];e.push({text:i+h.paramListStart+m.join(h.paramSpacer)+h.paramListEnd,params:m,name:i,hint:k,render:l,settings:h})}}return e};this.complete=function(a){var b=a.getTokenAt(a.getCursor()),c=[];return""!==b.string&&(c=m(b)),{list:c,from:f(a.getCursor().line,b.start),to:f(a.getCursor().line,b.end)}},this.selectPlaceholder=function(a,b){i(a,b)},g()},$(function(){var a=function(a){var b=a.match(/(Chrome|Version|Firefox)\/([0-9]+)/);if(!b)return!1;var c=b[1],d=parseInt(b[2],10);return"Chrome"===c&&d>=28||"Version"==c&&d>=6||"Firefox"==c&&d>=23},b=function(){$('            <div class="modal hide fade">                <div class="modal-header">                    <button class="close" data-dismiss="modal">&times;</button>                    <h3>Unsupported Browser</h3>                </div>                <div class="modal-body">                    <p>You are attempting to use an unsupported web browser.  We recommend                    using Chrome, but the latest versions of Firefox or Safari should also                    work.<p>You can simply close this window if you want to try the tools                    on your current browser.                </div>            </div>').modal()},c=function(){var c=a(navigator.userAgent);c||b()};c()}),function(){var a=function(){var a=function(a,b){for(var c=a.local_functions;c;c=c.next)if(c.name==b)return!0};return{startState:function(){return{local_functions:{},labels:{},block_comment:!1}},token:function(b,c){if(c.block_comment)return b.match(/^.*\*\//)?c.block_comment=!1:b.skipToEnd(),"comment";if(c.is_include)return b.eatSpace(),b.eatWhile(/^[^|]/),c.is_include=!1,"string";if(!b.eatSpace()){if(c.is_macro_def){b.eatSpace();var d=b.match(/^([^\s()]+)/);return d&&(c.local_functions={name:d[0],next:c.local_functions}),c.is_macro_def=!1,c.is_macro_value=!0,c.macro_ends_at_end_of_line=!0,"def"}if(c.is_macro_value){if(b.eatSpace(),"{"==b.peek())return b.next(),c.macro_ends_at_end_of_line?(c.macro_ends_at_end_of_line=!1,"bracket"):"error";if("}"==b.peek()&&(b.next(),!c.macro_ends_at_end_of_line))return c.is_macro_value=!1,"bracket"}if(b.match(/^\s*[\{\}]/))return b.eatSpace(),b.next(),"error";if(c.is_options){b.eatSpace();var e=b.match(/^[\w\d]+/),f="error";if(e){var g=["clock","noclock","div","nodiv","mul","nomul","kalways","nokalways","tty","notty","annotate","noannotate"];_.contains(g,e[0])&&(f="keyword")}else b.eatWhile(/^\s/)||b.skipToEnd();return b.eatSpace(),b.eol()&&(c.is_options=!1),f}var h=b.sol();h&&c.macro_ends_at_end_of_line&&(c.is_macro_value=!1);var i=b.match(/^\s*([a-zA-Z0-9_]+):/);if(i)return c.labels[i[1]]=!0,"def";if(b.eatSpace(),!b.eol()){if('"'==b.peek()||"'"==b.peek())for(var j=b.next(),k=!1;;)if(k)b.next(),k=!1;else{var l=b.next();if("\\"==l)k=!0;else{if(l==j)return"string";if(!l)return"error"}}if(b.match(/^\/\//))return b.skipToEnd(),"comment";if(b.match("/*"))return c.block_comment=!0,"comment";if("("==b.peek()||")"==b.peek())return b.next(),"bracket";var m=b.match(/^\b(?:add|addc|and|andc|mul|mulc|div|divc|or|orc|shl|shlc|shr|shrc|sra|srac|sub|subc|xor|xorc|xnor|xnorc|cmpeq|cmpeqc|cmple|cmplec|cmplt|cmpltc|br|beq|bf|bne|bt|jmp|ld|st|ldr|move|cmove|halt|push|pop|allocate|deallocate|call|rtn|xrtn|word|long|storage|getframe|putframe|svc|rdchar|wrchar|cycle|time|click|random|seed|server)\b/i);if(m)return"builtin";var n=b.match(/^\b(?:[rR](?:[0-9]|[12][0-9]|3[0-2])|bp|lp|sp|xp)\b/i);if(n)return"variable-3";var o=b.match(/^-?(0x[0-9a-f]+|0b[01]+|[0-9]+)/i);if(o)return"number";var p=b.match(/^[\+\-\*\/~%=]|<<|>>/);if(p)return"operator";var q=b.match(/^\.(macro|options|include|align|text|ascii|breakpoint|protect|unprotect|options|pcheckoff|tcheckoff|verify)/i);if(q)return"include"==q[1]?c.is_include=!0:"macro"==q[1]?c.is_macro_def=!0:"options"==q[1]&&(c.is_options=!0),"keyword";if(b.match(/^\.[a-z]+/i))return"error";if(b.match(/^\.\b/))return"keyword";var r=b.match(/^[a-zA-Z0-9_]+/);return r?a(c,r)?"variable-2":c.labels[r]?"variable-2":"variable":(b.next(),null)}}},lineComment:"//",blockCommentStart:"/*",blockCommentEnd:" */",blockCommentLead:"  *"}};CodeMirror.defineMode("uasm",a);var b=["reg a","reg b","reg destination"],c=["reg a","literal b","reg destination"],d={paramListStart:" ",paramListEnd:"",paramSpacer:" "};Editor.Completions.uasm={Settings:{paramListStart:"(",paramListEnd:")",paramSpacer:", "},Terms:[["ADD",b],["SUB",b],["MUL",b],["DIV",b],["AND",b],["OR",b],["XOR",b],["XNOR",b],["CMPEQ",b],["CMPLT",b],["CMPLE",b],["SHL",b],["SHR",b],["SRA",b],["ADDC",c],["SUBC",c],["MULC",c],["DIVC",c],["ANDC",c],["ORC",c],["XORC",c],["XNORC",c],["CMPEQC",c],["CMPLTC",c],["CMPLEC",c],["SHLC",c],["SHRC",c],["SRAC",c],["LD",["reg address","literal offset","reg destination"],["literal address","reg destination"]],["ST",["reg value","literal address","reg offset"],["reg value","literal address"]],["JMP",["reg target","reg old_pc_destination"]],["BEQ",["reg test","literal branch_target","reg old_pc_destination"]],["BF",["reg test","literal branch_target","reg old_pc_destination"]],["BNE",["reg test","literal branch_target","reg old_pc_destination"]],["BT",["reg test","literal branch_target","reg old_pc_destination"]],["BR",["literal target","reg old_pc_destination"],["literal target"]],["LDR",["label address","reg destination"]],["MOVE",["reg from","reg to"]],["CMOVE",["literal value","reg to"]],["HALT",[]],["PUSH",["reg value"]],["POP",["reg destination"]],["ALLOCATE",["literal words"]],["DEALLOCATE",["literal words"]],["CALL",["label"],["label","literal arg_count"]],["RTN",[]],["XRTN",[]],["WORD",["literal value"]],["LONG",["literal value"]],["STORAGE",["literal nwords"]],["GETFRAME",["literal frame","reg target"]],["PUTFRAME",["reg value","literal frame"]],{settings:d,term:[".include",["filename"]]},{settings:d,term:[".align",["alignment"]]},{settings:d,term:[".ascii",["string"]]},{settings:d,term:[".text",["string"]]},{settings:d,term:[".breakpoint",[]]},{settings:d,term:[".protect",[]]},{settings:d,term:[".unprotect",[]]},{settings:d,term:[".options",["options..."]]},{settings:d,term:[".tcheckoff",["url","name","checksum"]]},{settings:d,term:[".pcheckoff",["url","name","checksum"]]},{settings:d,term:[".verify",["address","words","word..."]]}]}}(),StringStream.prototype={next_line:function(){return this.pos=this.start=0,this.string=this.fstream.line(),void 0===this.string?(this.string="",!1):!0},line_number:function(){return this.fstream.line_number},file:function(){return this.fstream.file},eol:function(){return this.pos>=this.string.length},sol:function(){return 0===this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b,c=this.string.charAt(this.pos);return b="string"==typeof a?c==a:c&&(a.test?a.test(c):a(c)),b?(++this.pos,c):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},column:function(){return this.pos+1}},FileStream.prototype={line:function(){return this.lines[this.line_number++]},eof:function(){return this.line_number>=this.lines.length}};var Dequeue=function(){this._head=new Dequeue.Node,this._tail=new Dequeue.Node,this._head._next=this._tail,this._tail._prev=this._head,this._length=0};Dequeue.Node=function(a){this._data=a,this._prev=null,this._next=null},Dequeue.prototype.empty=function(){return this._head._next===this._tail},Dequeue.prototype.push=function(a){var b=new Dequeue.Node(a);b._prev=this._tail._prev,b._prev._next=b,b._next=this._tail,this._tail._prev=b,++this._length},Dequeue.prototype.pop=function(){if(this.empty())throw new Error("pop() called on empty dequeue");var a=this._tail._prev;return this._tail._prev=a._prev,a._prev._next=this._tail,--this._length,a._data},Dequeue.prototype.unshift=function(a){var b=new Dequeue.Node(a);b._next=this._head._next,b._next._prev=b,b._prev=this._head,this._head._next=b,++this._length},Dequeue.prototype.shift=function(){if(this.empty())throw new Error("shift() called on empty dequeue");var a=this._head._next;return this._head._next=a._next,a._next._prev=this._head,--this._length,a._data},Dequeue.prototype.length=function(){return this._length},function(){function a(a,b,c,d){this.name=a,this.value=b,this.file=c,this.line=d}function b(a,b,c){this.name=a,this.file=b,this.line=c}function c(a,b,c,d){this.macro=a,this.args=b,this.file=c,this.line=d}function d(a,b,c){this.op=a,this.file=b,this.line=c}function e(a,b,c,d){this.op=a,this.value=b,this.file=c,this.line=d}function f(a,b,c){this.expression=a,this.file=b,this.line=c}function g(a,b,c,d,e){this.name=a,this.parameters=b,this.instructions=c,this.file=d,this.line=e}function h(a,b,c){this.filename=a,this.file=b,this.line=c,this.instructions=null}function i(a,b,c){this.expression=a,this.file=b,this.line=c}function j(a,b,c){this.segname=a,this.file=b,this.line=c}function k(a,b,c,d){this.text=a,this.null_terminated=b,this.file=c,this.line=d}function l(a,b){this.file=a,this.line=b}var m=this,n=function(a,b,c){if(b instanceof StringStream)this.file=b.file(),this.line=b.line_number(),this.column=b.column();else{if(void 0===b||void 0===c)throw new Error("It is mandatory to provide either a stream or a file/line pair to SyntaxError.");this.file=b,this.line=c,this.column=0}this.message=a};n.prototype=new Error,n.prototype.toString=function(){return this.file+":"+this.line+":"+this.column+": "+this.message};var o=function(a){for(var b="";!a.eol()&&b.length<3&&_.contains("01234567",a.peek());)b+=a.next();var c=parseInt(b,8);if(c>255)throw new n("Octal escape sequence \\"+b+" is larger than one byte (max is \\377)",a);return String.fromCharCode(c)},p=function(a,b){var c=a.next();switch(c){case b:return!1;case"\\":switch(c=a.next()){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"	";case'"':return'"';case"'":return"'";case"\\":return"\\";case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":return a.backUp(1),o(a);default:throw new n("Unknown escape sequence \\"+c+". (if you want a literal backslash, try \\\\)",a)}break;default:return c}},q=function(a){if('"'!=a.next())throw new n("Expected a string here.",a);for(var b="";!a.eol();){var c=p(a,'"');if(c===!1)return b;b+=c}throw new n("Unterminated string constant",a)},r=function(a){return/^0x[0-9a-f]+$/i.test(a)?parseInt(a,16):/^0b[10]+$/i.test(a)?parseInt(a.slice(2),2):/^0[0-7]+$/.test(a)?parseInt(a,8):/^[1-9][0-9]*$|^0$/.test(a)?parseInt(a,10):NaN},s=function(a,b){var c=a.match(/^[0-9][\$\.@A-Z0-9_]*/i);if(!c)return null;c=c[0];var d=r(c);if(isNaN(d)&&!b)throw new n("Incomprehensible number "+c+". Acceptable bases are hex (0x...), octal (0...), binary (0b...) and decimal.",a);return d},t=function(a){v(a);var b=a.match(/^[\$\.@A-Z_][\$\.@A-Z0-9_]*/i);return b?b[0]:null},u=function(a){v(a);var b=s(a);if(null!==b)return b;var c=t(a);if(null!==c)return c;if("-"==a.peek()||"~"==a.peek()||"+"==a.peek()){var d=a.next(),g=u(a);if(g)return new e(d,g,a.file(),a.line_number());throw new n("Expected value after unary '"+d+"' operator.",a)}if("("==a.peek()){a.next();var h=f.parse(a);if(")"!=a.next())throw new n("Expected closing parenthesis.",a);if(null===h)throw new n("Expected expression between grouping parentheses.",a);return h}if("'"==a.peek()){a.next();var i=p(a,"'");if(i===!1)throw new n("Zero-character char constant; char constants must have exactly one character.",a);if("'"!=a.next())throw new n("Multi-character char constant; char constants must have exactly one character (for more, try .ascii or .text)",a);return i.charCodeAt(0)}return null},v=function(a){if(a.eatSpace(),a.match(/^\/\//)&&a.skipToEnd(),a.match(/^\/\*/))for(var b=a.line_number();;){if(a.match(/^.*\*\//))break;if(a.skipToEnd(),!a.next_line())throw new n("Unclosed block comment (starts here)",a.file(),b)}};a.prototype.assemble=function(a,b,c){if("."===this.name){var d=this.value.evaluate(a,!0);if(b&&d<a.vdot)throw new n("It is illegal to set . to a value lower than its current value (current value: "+a.vdot+"; new value: "+d+")",this.file,this.line);a.pdot+=d-a.vdot,a.vdot=d}else a.symbols[this.name]=this.value.evaluate(a,!!b);return null},b.prototype.assemble=function(a,b,c){a.symbols[this.name]=a.vdot,a.labels[this.name]=a.pdot},c.parse=function(a,b){var d=a,e=[];if("("!=b.next())throw new n("Expected macro argument list; this is probably an internal error.",b);if(")"==b.peek())return b.next(),new c(d,[],b.file(),b.line_number());for(;!b.eol();){var g=f.parse(b);if(null===g)throw new n("Missing expression in macro argument list.",b);e.push(g);var h=b.next();if(","!=h){if(")"==h)return new c(d,e,b.file(),b.line_number());throw void 0===h&&(h="end of line"),new n("Unexpected '"+h+"'; expecting ',' or ')'",b)}}throw new n("Expected ')' at end of macro argument list; got end of line.",b)},c.prototype.assemble=function(a,b,c){if(!_.has(a.macros,this.macro))throw new n("Macro '"+this.macro+"' has not been defined.",this.file,this.line);if(!_.has(a.macros[this.macro],this.args.length))throw new n("Macro '"+this.macro+"' not defined for "+this.args.length+" arguments.",this.file,this.line);var d=[];_.each(this.args,function(c){d.push(c.evaluate(a,!!b))});var e=a.pdot;if(a.macros[this.macro][this.args.length].transclude(a,d,b,c),c)for(;e<a.pdot;)c[e++]=this},d.prototype.operate=function(a,b){var c={"+":function(a,b){return a+b|0},"-":function(a,b){return a-b|0},"/":function(a,b){return a/b|0},"*":function(a,b){return a*b|0},">>":function(a,b){return a>>>b},"<<":function(a,b){return a<<b},"%":function(a,b){return a%b},"&":function(a,b){return a&b},"|":function(a,b){return a|b}};if(!_.has(c,this.op))throw new n("Cannot perform operation '"+this.op+"'; no function defined.",this.file,this.line);0>a&&(a=4294967295+a+1),0>b&&(b=4294967295+b+1);var d=c[this.op](a,b);return d},e.prototype.evaluate=function(a,b){var c={"-":function(a){return-a},"~":function(a){return~a},"+":function(a){return+a}};if("function"==typeof this.value.evaluate&&(this.value=this.value.evaluate(a,b)),!_.has(c,this.op))throw new n("Cannot perform unary operation '"+this.op+"'; no function defined.",this.file,this.line);return c[this.op](this.value)},f.parse=function(a){for(var b=[],c=!1;;){if(v(a),c){var e=a.match(/^(?:[\+\-\/\*%&|]|<<|>>)/);if(e){b.push(new d(e[0],a.file(),a.line_number())),c=!1;continue}break}var g=u(a);if(null===g){if(b.length>0)throw new n("Expected operand after operator '"+_.last(b).op+"'",a);return null}b.push(g),c=!0}return new f(b,a.file(),a.line_number())},f.prototype.evaluate=function(a,b){var c=this,e=function(d){if(_.isNumber(d))return d;if(_.isString(d)){if("."===d)return a.vdot;var e=a.symbols[d];if(void 0===e&&(e=a.segments.kernel[d]),void 0===e&&b)throw new n("Symbol '"+d+"' is undefined.",c.file,c.line);return e}if("function"==typeof d.evaluate)return d.evaluate(a,b);throw console.log(d),"Unknown term type during expression evaluation."},f=0,g=e(this.expression[f++]);if(void 0===g)return void 0;for(;f<this.expression.length;){var h=this.expression[f++],i=e(this.expression[f++]);if(void 0===i)return void 0;if(!(h instanceof d))throw new n("Internal error evaluating expression: expected operation but didn't get one!",this.file,this.line);g=h.operate(g,i)}return g},f.prototype.assemble=function(a,b,c){var d=this.evaluate(a,!!b);if(b){if(d>255)throw new n("Expression results must fit within one byte; "+d+" is too large.",this.file,this.line);if(-128>d)throw new n("Expression results must fit within one byte; interpreted as a signed integer, "+d+" is too negative.",this.file,this.line);b[a.pdot]=d,c[a.pdot]=this}a.pdot+=1,a.vdot+=1},g.prototype.assemble=function(a,b,c){if(!b){if(_.has(a.macros,this.name)||(a.macros[this.name]={}),_.has(a.macros[this.name],this.parameters.length)){var d=a.macros[this.name][this.parameters.length];throw new n("Redefinition of "+this.parameters.length+"-argument macro "+this.name+". (Original at "+d.file+":"+d.line+")",this.file,this.line)}a.macros[this.name][this.parameters.length]=this}},g.prototype.transclude=function(a,b,c,d){if(b.length!=this.parameters.length)throw"Wrong number of parameters in Macro transclude (MacroInvocation should not permit this!)";var e=a.symbols,f=_.extend({},a.symbols,_.object(this.parameters,b));a.symbols=f,_.each(this.instructions,function(b){b.assemble(a,c,d)}),a.symbols=e},h.parse=function(a){var b=q(a);return new h(b,a.file(),a.line_number())},h.prototype.assemble=function(a,b,c){if(!this.instructions)throw"Attempting to assemble Include without parsing file contents.";_.each(this.instructions,function(d){d.assemble(a,b,c)})},i.parse=function(a){var b=f.parse(a);return new i(b,a.file(),a.line_number())},i.prototype.assemble=function(a,b,c){var d=this.expression?this.expression.evaluate(a,!0):4;a.vdot%d!==0&&(a.vdot=a.vdot+(d-a.vdot%d),a.pdot=a.pdot+(d-a.pdot%d))},j.parse=function(a){var b=t(a);if(null==b)throw new n("Missing segment name",this.file,this.line);return new j(b,a.file(),a.line_number())},j.prototype.assemble=function(a,b,c){a.vdot%4!==0&&(a.vdot=a.vdot+(4-a.vdot%4),a.pdot=a.pdot+(4-a.pdot%4)),b?(a.symbols=a.segments[this.segname],a.current_segment=this.segname):(a.segments.kernel[a.current_segment+"_bounds"]=a.vdot,a.current_segment=this.segname,a.segments.kernel[this.segname+"_base"]=a.pdot,a.symbols={},a.segments[this.segname]=a.symbols),a.vdot=0},k.prototype.assemble=function(a,b,c){if(b){for(var d=0;d<this.text.length;++d)b[a.pdot]=this.text.charCodeAt(d),c[a.pdot]=this,a.pdot+=1,a.vdot+=1;this.null_terminated&&(b[a.pdot++]=0,a.vdot+=1)}else a.pdot+=this.text.length,a.vdot+=this.text.length,this.null_terminated&&(a.pdot+=1,a.vdot+=1);this.null_terminated&&a.vdot%4!==0&&(a.vdot+=4-a.vdot%4,a.pdot+=4-a.pdot%4)},l.prototype.assemble=function(a,b,c){b&&a.breakpoints.push(a.pdot)};var w=function(a,b){this.file=a,this.line=b};w.prototype.assemble=function(a,b,c){if(b){var d=_.last(a.protection);d&&d.end==1/0||a.protection.push({start:a.pdot,end:1/0})}};var x=function(a,b){this.file=a,this.line=b};x.prototype.assemble=function(a,b,c){if(b){var d=_.last(a.protection);d&&d.end==1/0&&(d.end=a.pdot)}};var y=function(a,b,c){this.options=a,this.file=b,this.line=c};y.parse=function(a){for(var b={};!a.eol();){v(a);var c=t(a);switch(c){case"notty":b.tty=!1;break;case"tty":b.tty=!0;break;case"clock":case"clk":b.clock=!0;break;case"noclock":case"noclk":b.clock=!1;break;case"annotate":b.annotate=!0;break;case"noannotate":b.annotate=!1;break;case"kalways":b.kalways=!0;break;case"nokalways":b.kalways=!1;break;case"segmentation":b.segmentation=!0;break;case"nosegmentation":b.segmentation=!1;break;case"div":b.div=!0;break;case"nodiv":b.div=!1;break;case"mul":b.mul=!0;break;case"nomul":b.mul=!1;break;default:throw new n("Unrecognised option '"+c+"'",a)}}return new y(b,a.file(),a.line_number())},y.prototype.assemble=function(a,b,c){b&&_.extend(a.options,this.options)};var z=function(a,b,c,d,e){this.url=a,this.name=b,this.checksum=c,this.file=d,this.line=e};z.parse=function(a){v(a);var b=q(a);v(a);var c=q(a);v(a);var d=f.parse(a);if(null===d)throw new n("Expected checkoff checksum.",a);return new this.prototype.constructor(b,c,d,a.file(),a.line_number())},z.prototype.assemble=function(a,b,c){if(b){if(a.checkoff)throw new n("Multiple checkoffs found! Only one checkoff statement is accepted per program.",this.file,this.line);a.checkoff={kind:this.kind,url:this.url,name:this.name,checksum:this.checksum.evaluate(a,!0)}}};var A=function(a,b,c,d,e){z.call(this,a,b,c,d,e),this.kind="tty"};A.prototype=Object.create(z.prototype,{constructor:{value:A}}),A.parse=z.parse;var B=function(a,b,c,d,e){z.call(this,a,b,c,d,e),this.kind="memory"};B.prototype=Object.create(z.prototype,{constructor:{value:B}}),B.parse=z.parse,B.prototype.assemble=function(a,b,c){z.prototype.assemble.call(this,a,b,c),b&&(a.checkoff.running_checksum=36036,a.checkoff.addresses={})};var C=function(a,b,c,d,e){this.address=a,this.words=b,this.file=d,this.line=e,this.checksum_contribution=c};C.parse=function(a){v(a);var b=s(a,!1);if(null===b)throw new n("Expected address",a);v(a);var c=s(a,!1);if(null===c)throw new n("Expected number of words",a);for(var d=[],e=0,f=0;c>f;++f){v(a);var g=s(a,!1);if(null===g)throw new n("Expected "+c+" words; only got "+d.length+".",a);d.push(g);var h=new Int32Array(1);h[0]=g,h[0]+=b+4*f,h[0]*=f+1,h[0]+=e,e=h[0]}return new C(b,d,e,a.file(),a.line_number())},C.prototype.assemble=function(a,b,c){if(b){if(!a.checkoff||"memory"!=a.checkoff.kind)throw new n(".verify statements are only legal after a .pcheckoff statement.",this.file,this.line);var d=new Int32Array(1);d[0]=a.checkoff.running_checksum+this.checksum_contribution,a.checkoff.running_checksum=d[0],_.extend(a.checkoff.addresses,_.object(_.range(this.address,this.address+4*this.words.length,4),this.words))}};var D=function(d){var e,m=function(a){var b=t(a);if(null===b)throw new n("Macro definitions must include a name.",a);var c=[];if(v(a),"("!=a.next())throw new n("Macro definitions must include a parenthesised argument list.",a);for(;;){if(")"==a.peek()){a.next();break}var d=t(a);if(null===d)throw new n("Macro arguments must be valid symbol names",a);c.push(d),v(a);var e=a.next();if(")"==e)break;if(","!=e)throw new n("Expected comma ',' or close parenthesis ')' after macro argument.",a)}var f=a.line_number(),h=p(a,!0),i=new g(b,c,h,a.file(),f);return i},o=function(a,b,c,f,g){var h=new StringStream(new FileStream(b,a)),i=[],j=0,k=!1;e.push({file:a,content:b,metadata:g});var l,m=function(a){++j,d.getFile(a.filename,function(b){o(b.name,b.data,function(b){--j,a.instructions=b,0===i.length&&0===j&&k&&c(l)},f,g)},function(){f([new n("File not found: "+a.filename,a.file,a.line)])})};do try{l=p(h,!1,m)}catch(q){if(!(q instanceof n))throw q;i.push(q)}while(h.next_line());i.length>0?f(i):(k=!0,0===j&&c(l))},p=function(d,e,g){var o=[],p=!e,r=!1,s=!1;v(d),e&&"{"==d.peek()&&(d.next(),p=!0,r=!0);a:do for(;!d.eol();)if(s)d.match(/^.*\*/)?s=!1:d.skipToEnd();else if(!v(d)){if(d.eol())break;if(e&&p&&"}"==d.peek()){r=!1,d.next();break a}if(d.match("//"))d.skipToEnd();else if(d.match("/*"))d.match(/^.*\*\//)||(d.skipToEnd(),s=!0);else{var u=d.pos,z=t(d);if(v(d),z){if("."==z[0]&&z.length>1){var D=z.slice(1);switch(D){case"include":var E=h.parse(d);if(!g)throw new n(".include statement in illegal context.",d);g(E),o.push(E);break;case"macro":o.push(m(d));break;case"align":o.push(i.parse(d));break;case"segment":o.push(j.parse(d));break;case"ascii":case"text":var F=q(d);o.push(new k(F,"text"==D,d.file(),d.line_number()));break;case"breakpoint":o.push(new l(d.file(),d.line_number()));break;case"options":o.push(y.parse(d));break;case"protect":o.push(new w(d.file(),d.line_number()));break;case"unprotect":o.push(new x(d.file(),d.line_number()));break;case"tcheckoff":o.push(A.parse(d));break;case"pcheckoff":o.push(B.parse(d));break;case"verify":o.push(C.parse(d));break;default:throw d.skipToEnd(),new n("Unrecognised directive '."+D+"'",d)}continue}if(":"==d.peek()){d.next();var G=new b(z,d.file(),d.line_number());o.push(G);continue}if("="==d.peek()){d.next();var H=f.parse(d),I=new a(z,H,d.file(),d.line_number());o.push(I);continue}if("("==d.peek()){var J=c.parse(z,d,d);o.push(J);continue}d.pos=u}var K=f.parse(d);if(o.push(K),null===K){if(")"==d.peek())throw new n("Unexpected closing parenthesis.",d);if("="==d.peek())throw new n("Cannot assign to integer literals or expressions.",d);if("{"==d.peek())throw new n("An opening brace '{' is only permitted at the beginning of a macro definition.",d);if("}"==d.peek())throw new n("Unexpected closing brace '}' without matching open brace '{'",d);var L=d.match(/^[^\s]+/)||d.match(/^[^\b]+/)||d.peek();throw new n("Unexpected '"+L+"'; giving up.",d)}}}while(p&&d.next_line());if(r)throw new n("Expected closing brace to end block macro declaration.",d);return o},r=function(a,b){var c={segments:{},current_segment:"kernel",symbols:{},macros:{},pdot:0,vdot:0,breakpoints:[],labels:{},options:{},protection:[],checkoff:null};c.segments.kernel=c.symbols,_.each(a,function(a){a.assemble(c)}),c.segments.kernel[c.current_segment+"_bounds"]=c.vdot;var d=c.pdot;c.pdot=0,c.vdot=0,c.symbols=c.segments.kernel,c.current_segment="kernel";var e=new Uint8Array(d),f=new Array(d);return _.each(a,function(a){a.assemble(c,e,f)}),{image:e,source_map:f,breakpoints:c.breakpoints,labels:c.labels,options:c.options,protection:c.protection,checkoff:c.checkoff,sources:b}};this.assemble=function(a,b,c,d){var f=[];e=[],o(a,b,function(a){var b;try{b=r(a,e)}catch(c){if(!(c instanceof n))throw c;f.push(c)}f.length?d(!1,f):d(!0,b)},function(a){d(!1,a)},c)}};m.BetaAssembler=D}(),BSim={},$(function(){
function a(){return $(".xblock-6004").innerHeight()}function b(){try{var a=l.get_checkoff();void 0!==a&&$.each(a,function(a,b){m.tests={test:"passed"==b?a:b}})}catch(b){}}function c(a,b,c,d){var e=0===b.lastIndexOf("url:",0),g=f.openTab(a,e?"Loading "+b:b,c,null,d);e&&$.ajax(b.substr(4),{dataType:"text",error:function(a,c,d){f.load_initial_contents(g,"Oops, error loading "+b)},success:function(a,b,c,d){f.load_initial_contents(g,a)}})}var d='    <div class="xblock-6004" style="width: 100%; height: 99%; margin:5px;">      <div class="masthead">        <ul class="pull-left nav nav-pills split-controls">          <li class="active" id="maximise_editor"><a>Editor</a></li>          <li id="split_pane"><a>Split</a></li>          <li id="maximise_simulation"><a>Simulation</a></li>        </ul>        <div id="header-alert-holder"></div>        <ul class="pull-right nav nav-pills global-controls"></ul>      </div>      <div id="split-container">        <div id="filetree"></div>        <div id="editor-pane">          <div id="editor"></div>        </div>        <div id="simulation-pane">          <div id="programmer-view">            <div class="program-controls"></div>            <div class="cache-wrapper"><div class="cache-information">              <table style="border-collapse: separate; border-spacing: 3px 0px;">                <tr>                  <td align="right">Cache:</td>                  <td>                    <select class="cache-select" id="cache-status">                      <option>on</option>                      <option selected>off</option>                    </select>                  </td>                  <td class="cache-column cache-sep">&nbsp;</td>                  <td class="cache-column">tag</td>                  <td class="cache-column">index</td>                  <td class="cache-column">offset</td>                  <td class="cache-column cache-sep"><i>event</i></td>                  <td class="cache-column"><i>Ifetch</i></td>                  <td class="cache-column"><i>Dread</i></td>                  <td class="cache-column"><i>Dwrite</i></td>                  <td class="cache-column"><i>total</i></td>                </tr>                <tr>                  <td align="right">Total words:</td>                  <td>                    <select class="cache-select" id="total-words" disabled>                      <option >4</option>                      <option>8</option>                      <option>16</option>                      <option>32</option>                      <option selected>64</option>                      <option>128</option>                      <option>256</option>                      <option>512</option>                      <option>1024</option>                      <option>2048</option>                      <option>4096</option>                      <option>8192</option>                      <option>16384</option>                    </select>                  </td>                  <td class="cache-column cache-sep">Address bits:</td>                  <td class="cache-stats"><span class="cache-num" id="tag-bits"></span></td>                  <td class="cache-stats"><span class="cache-num" id="index-bits"></span></td>                  <td class="cache-stats"><span class="cache-num" id="offset-bits"></span></td>                  <td class="cache-column cache-sep">hits</td>                  <td class="cache-stats"><span class="cache-num" id="fetch-hits"></span></td>                  <td class="cache-stats"><span class="cache-num" id="read-hits"></span></td>                  <td class="cache-stats"><span class="cache-num" id="write-hits"></span></td>                  <td class="cache-stats"><span class="cache-num" id="total-hits"></span></td>                </tr>                <tr>                  <td align="right">Words/line:</td>                  <td>                    <select class="cache-select" id="line-size" disabled>                      <option selected>1</option>                      <option>2</option>                      <option>4</option>                      <option>8</option>                      <option>16</option>                      <option>32</option>                    </select>                  </td>                  <td class="cache-column cache-sep">Mem size:</td>                  <td class="cache-stats" colspan="3"><span class="cache-val" id="mem-size"></span></td>                  <td class="cache-column cache-sep">misses</td>                  <td class="cache-stats"><span class="cache-num" id="fetch-misses"></span></td>                  <td class="cache-stats"><span class="cache-num" id="read-misses"></span></td>                  <td class="cache-stats"><span class="cache-num" id="write-misses"></span></td>                  <td class="cache-stats"><span class="cache-num" id="total-misses"></span></td>                </tr>                <tr>                  <td align="right">Associativity:</td>                  <td>                    <select class="cache-select" id="associativity" disabled>                      <option selected>direct mapped</option>                      <option>2-way</option>                      <option>4-way</option>                      <option>8-way</option>                      <option>fully associative</option>                    </select>                  </td>                  <td class="cache-column cache-sep">Comparator bits:</td>                  <td class="cache-stats" colspan="3"><span class="cache-val" id="comparator-bits"></span></td>                  <td class="cache-column cache-sep">totals</td>                  <td class="cache-stats"><span class="cache-num" id="fetch-total"></span></td>                  <td class="cache-stats"><span class="cache-num" id="read-total"></span></td>                  <td class="cache-stats"><span class="cache-num" id="write-total"></span></td>                  <td class="cache-stats"><span class="cache-num" id="total-total"></span></td>                </tr>                <tr>                  <td align="right">Replacement:</td>                  <td>                    <select class="cache-select" id="replacement-strategy" disabled>                      <option selected>LRU</option>                      <option>FIFO</option>                      <option>Random</option>                      <option>Cycle</option>                    </select>                  </td>                  <td class="cache-column cache-sep">2-to-1 MUX bits:</td>                  <td class="cache-stats" colspan="3"><span class="cache-val" id="mux-bits"></span></td>                  <td class="cache-column cache-sep">hit ratio</td>                  <td class="cache-stats"><span class="cache-num" id="fetch-ratio"></span></td>                  <td class="cache-stats"><span class="cache-num" id="read-ratio"></span></td>                  <td class="cache-stats"><span class="cache-num" id="write-ratio"></span></td>                  <td class="cache-stats"><span class="cache-num" id="total-ratio"></span></td>                </tr>                <tr>                  <td align="right">Write strategy:</td>                  <td>                    <select class="cache-select" id="write-strategy" disabled>                      <option selected>write-back</option>                      <option>write-through</option>                    </select>                  </td>                  <td class="cache-column cache-sep">Total cost:</td>                  <td class="cache-stats" colspan="3"><span class="cache-val" id="total-cost"></span></td>                  <td class="cache-column cache-sep">cycles</td>                  <td class="cache-column">&nbsp;</td>                  <td class="cache-column">&nbsp;</td>                  <td class="cache-column">&nbsp;</td>                  <td class="cache-stats"><span class="cache-num" id="total-cycles"></span></td>                </tr>              </table>            </div></div>            <div class="content">              Registers <span class="segmentation">[<span class="segreg">base:</span> <span class="segreg base">xxx</span>, <span class="segreg">bounds:</span> <span class="segreg bounds">yyy</span>]</span>              <div class="regfile"></div>              Disassembly [cycle: <span id="cycle_count">0</span>]              <div class="disassembly"></div>              <div class="memory-holder">                Memory                <div class="memory" data-height="398"></div>                <div class="memory-key">                  <ul>                    <li><span class="read"></span> Recent reads</li>                  </ul>                </div>              </div>              <div class="stack-holder">                Stack                <div class="stack" data-height="398"></div>                <div class="memory-key">                  <ul>                    <li><span class="write"></span> Recent writes</li>                  </ul>                </div>              </div>              Console              <div class="tty"></div>              <div id="checkoff-failure"></div>            </div>          </div>          <div id="schematic-view" style="display: none;">            <div class="program-controls"></div>            <div style="position: relative" id="schematic-holder">              <svg height="600" width="940" class="schematic">                <g class="mux pcsel permanent" transform="translate(10, 25)">                  <g class="mux-selector">                    <text style="text-anchor: end;" x="50" y="11">PCSEL=<tspan id="pcsel-value">3</tspan></text>                    <polyline points="50,7 60,7" />                    <polyline points="53,3 60,7 53,11" />                  </g>                  <polygon points="60,0 180,0 175,15 65,15" />                </g>                <g class="pcsel4 path" transform="translate(15)">                  <text x="65" y="10" class="path-target">8</text>                  <polyline points="65,10 65,25" />                  <polyline points="61,18 65,25 69,18" />                  <text x="65" y="37" class="path-target">4</text>                </g>                <g class="pcsel3 path" transform="translate(40)">                  <text x="65" y="10" class="path-target">4</text>                  <polyline points="65,10 65,25" />                  <polyline points="61,18 65,25 69,18" />                  <text x="65" y="37" class="path-target">3</text>                </g>                <g class="pcsel2 path" transform="translate(65)">                  <text x="65" y="10" class="path-target">JT</text>                  <polyline points="65,10 65,25" />                  <polyline points="61,18 65,25 69,18" />                  <text x="65" y="37" class="path-target">2</text>                </g>                <g class="pcsel1 path" transform="translate(90)">                  <polyline points="140,86 140,1 65,1 65,25" />                  <polyline points="140,91 140,148" />                  <polyline points="140,152 140,195" />                  <polyline points="61,18 65,25 69,18" />                  <text x="65" y="37" class="path-target">1</text>                </g>                <g class="pcsel0 path" transform="translate(115)">                  <polyline points="100,86 100,10 65,10 65,25" />                  <polyline points="100,91, 100,150" />                  <polyline points="61,18 65,25 69,18" />                  <text x="65" y="37" class="path-target">0</text>                </g>                <g class="pc permanent" transform="translate(90, 40)">                  <polyline points="45,0 45,15" />                  <polyline points="41,8 45,15 49,8" />                  <rect x="-5" y="15" width="100" height="20" class="border" />                  <foreignObject x="-5" y="15" width="100" height="20">                    <p style="text-align: center;"><span class="pc-label">PC:</span><span class="pc-value">00000000</span></p>                  </foreignObject>                  <text x="50" y="12" class="path-value pcsel-out-value">80000010</text>                </g>                <g class="instructions permanent" transform="translate(135,55)">                  <!-- HTML is absolutely positioned over this. -->                  <polyline points="0,33 115,33" />                  <polyline points="108,29 115,33 108,37" />                  <rect x="115" y="0" height="66" width="320" class="border" />                  <polyline points="235,66 235,86" />                  <text x="238" y="80" class="path-value instruction-value">73FF0003</text>                  <polyline points="235,86 435,86 445,96 445,133" />                  <polyline points="441,126 445,133 449,126" />                  <text x="435" y="100" style="text-anchor: end;">RA:[20:16]</text>                  <text x="450" y="133" style="text-anchor: start;" class="path-value raa-value">1F</text>                </g>                <g class="path asel1 pcsel1 bsel1 wasel0" transform="translate(135,55)">                  <polyline points="235,86 235,140" />                </g>                <g class="path asel1 bsel1 wasel0" transform="translate(135,55)">                  <polyline points="235,140 235,150" />                </g>                <g class="mux ra2sel1 ra2sel0 ra2sel" transform="translate(710, 160)">                  <g class="mux-selector">                    <text style="text-anchor: end;" x="0" y="11">RA2SEL=<tspan id="ra2sel-value">-</tspan></text>                    <polyline points="0,7 10,7" />                    <polyline points="4,3 10,7 4,11" />                  </g>                  <polygon points="10,0 70,0 65,15 15,15" />                  <polyline points="40,15 40,30" />                  <polyline points="36,23 40,30 44,23" />                  <text x="45" y="28" class="path-value rab-value" style="text-anchor: start;">1F</text>                </g>                <g class="path ra2sel0" transform="translate(570,141)">                  <text x="150" y="12" style="text-anchor: end;">RB:[15:11]</text>                  <polyline points="150,0 160,10 160,17" />                  <polyline points="156,10 160,17 164,10" />                  <text x="160" y="31">0</text>                </g>                <g class="path ra2sel1" transform="translate(570,141)">                  <text x="204" y="12" style="text-anchor: start;">RC:[25:21]</text>                  <polyline points="150,0 190,0 200,10 200,17" />                  <polyline points="196,10 200,17 204,10" />                  <text x="200" y="31">1</text>                </g>                <g class="path ra2sel0 ra2sel1" transform="translate(570,141)">                  <polyline points="0,0 150,0" />                </g>                <g class="mux wasel werf1" transform="translate(435,200)">                  <polygon points="0,0 20,10 20,50 0,60" />                  <g class="mux-selector">                    <text x="10" y="77" style="text-anchor: middle;">WASEL=<tspan id="wasel-value">1</tspan></text>                    <polyline points="10,56 10,66" />                    <polyline points="6,63 10,56 14,63" />                  </g>                  <polyline points="20,30 45,30" />                  <polyline points="37,26 45,30 37,34" />                  <text x="21" y="28" class="path-value raw-value">1F</text>                </g>                <g class="path wasel0" transform="translate(370,205)">                  <polyline points="0,0 10,10 65,10" />                  <polyline points="58,6 65,10 58,14" />                  <text x="8" y="6" style="text-anchor: start;">[25:21]</text>                  <text x="72" y="15">0</text>                </g>                <g class="path wasel1" transform="translate(410,237)">                  <text x="15" y="12" style="text-anchor: end;">XP</text>                  <polyline points="15,8 25,8" />                  <polyline points="18,4 25,8 18,12" />                  <text x="32" y="12">1</text>                </g>                <g class="address-adder asel1 pcsel1 process" transform="translate(250, 150)">                  <polyline points="-35,0 55,0 55,37 36,37" />                  <polyline points="43,33 36,37 43,41" />                  <polyline points="-21,45 0,45" />                  <polyline points="36,54 110,54 120,44" />                  <polyline points="43,50 36,54 43,58" />                  <text x="80" y="50">[15:0]*4</text>                  <rect x="0" y="30" width="36" height="30" />                  <text x="18" y="51" class="process-label">+</text>                  <text class="path-value address-adder-value" x="-25" y="48" style="text-anchor: end;">hello</text>                </g>                <g class="plus4 process permanent" transform="translate(117, 75)">                  <polyline class="permanent" points="18,0 18,30" />                  <polyline class="permanent" points="14,23 18,30 22,23" />                  <rect x="0" y="30" width="36" height="30" />                  <text x="18" y="51" class="process-label">+4</text>                  <text x="23" y="73" class="path-value pc-plus4-value">80000004</text>                </g>                <g class="path pcsel0 pcsel1 asel1 wdsel0" transform="translate(135,150)">                  <polyline points="0,-14 0,0" />                </g>                <g class="path pcsel0 pcsel1 asel1" transform="translate(135,150)">                  <polyline points="0,0 80,0" />                </g>                <g class="mux wdsel werf1" transform="translate(585,561)">                  <g class="mux-selector">                    <text style="text-anchor: end;" x="0" y="11">WDSEL=<tspan id="wdsel-value">0</tspan></text>                    <polyline points="0,7 10,7" />                    <polyline points="4,3 10,7 4,11" />                  </g>                  <polygon points="10,0 90,0 85,15 15,15" />                </g>                <g class="wdsel0 path" transform="translate(135,235)">                  <polyline points="0,-86 0,310 470,310 470,325" />                  <polyline points="466,318 470,325 474,318" />                  <text x="468" y="306" class="path-value pc-plus4-value" style="text-anchor: end;">80000004</text>                  <text x="470" y="338" class="path-target">0</text>                </g>                <g class="regfile permanent" transform="translate(481,190)">                  <rect x="0" y="0" width="358" height="178" />                  <foreignObject x="0" y="0" width="358" height="178">                    <div class="regfile"></div>                  </foreignObject>                  <!-- WERF input -->                  <g class="mux-selector">                    <polyline points="359,100 370,100" />                    <polyline points="366,96 359,100 366,104" />                    <text x="371" y="104" style="text-anchor: start;">WERF=<tspan id="werf-value">1</tspan></text>                  </g>                </g>                <g class="alu wdsel1 wdsel2 wr1" transform="translate(545,480)">                  <polygon points="0,0 80,0 90,10 100,0 180,0 160,30 20,30" />                  <text x="90" y="25">ALU</text>                  <text x="85" y="42" class="path-value alu-out-value" style="text-anchor: end;">hello</text>                  <polyline points="90,30 90,40" />                  <g class="mux-selector">                    <text x="7" y="20" style="text-anchor: end;">ALUFN="<tspan id="alufn-value"></tspan>"</text>                  </g>                </g>                <!-- Regfile output B -->                <g class="mux wdsel1 wdsel2 wr1 bsel" transform="translate(685, 430)">                  <g class="mux-selector">                    <text style="text-anchor: end;" x="0" y="11">BSEL=<tspan id="bsel-value">1</tspan></text>                    <polyline points="0,7 10,7" />                    <polyline points="4,3 10,7 4,11" />                  </g>                  <polygon points="10,0 70,0 65,15 15,15" />                  <polyline points="40,15 40,30 0,30 0,50" />                  <polyline points="-4,43 0,50 4,43" />                  <text x="5" y="47" class="path-value alub-value" style="text-anchor: start;">hello</text>                  <text x="0" y="62">B</text>                </g>                <g class="path bsel1" transform="translate(135,55)">                  <polyline points="235,150 235,352 442,352" />                  <polyline points="448,352 570,352 570,374" />                  <polyline points="566,367 570,374 574,367" />                  <text x="570" y="387">1</text>                  <text x="565" y="347" class="path-value bsel1-value" style="text-anchor: end;">hello</text>                  <text x="240" y="348" style="text-anchor: start;">C:[15:0]</text>                </g>                <g class="path bsel0 wr1" transform="translate(745, 369)">                  <polyline points="0,0 0,38" />                  <text class="path-value rdb-value" x="2" y="12" style="text-anchor: start;">hello</text>                </g>                <g class="path bsel0" transform="translate(745, 369)">                  <polyline points="0,38 0,60" />                  <polyline points="-4,53 0,60 4,53" />                  <text x="0" y="73">0</text>                </g>                <g class="path wr1" transform="translate(745, 369)">                  <polyline points="0,38 90,38 90,90" />                  <polyline points="86,83 90,90 94,83" />                  <text x="85" y="88" style="text-anchor: end;">MWD</text>                </g>                <!-- Regfile output A -->                <g class="mux wdsel1 wdsel2 wr1 asel" transform="translate(520, 430)">                  <g class="mux-selector">                    <text style="text-anchor: end;" x="0" y="11">ASEL=<tspan id="asel-value">0</tspan></text>                    <polyline points="0,7 10,7" />                    <polyline points="4,3 10,7 4,11" />                  </g>                  <polygon points="10,0 70,0 65,15 15,15" />                  <polyline points="40,15 40,30 65,30 65,50" />                  <polyline points="61,43 65,50 69,43" />                  <text x="60" y="47" class="path-value alua-value" style="text-anchor: end;">hello</text>                  <text x="65" y="62">A</text>                </g>                <g class="path pcsel2 z asel0" transform="translate(580, 369)">                  <polyline points="0,0 0,8" />                  <text class="path-value rda-value" x="2" y="12" style="text-anchor: start;">hello</text>                </g>                <g class="path pcsel2" transform="translate(580, 369)">                  <polyline points="0,7 -45,7" />                  <polyline points="-38,3 -45,7 -38,11" />                  <text x="-47" y="11" style="text-anchor: end;">JT</text>                </g>                <g class="path z asel0" transform="translate(580, 369)">                  <polyline points="0,8 0,21" />                </g>                <g class="path z process" transform="translate(580, 370)">                  <polyline points="0,19 -10,19" />                  <polyline points="-3,15 -10,19 -3,23" />                  <rect x="-35" y="12" height="15" width="25" />                  <text x="-22.5" y="24">0?</text>                  <g class="mux-selector">                    <polyline points="-35,19 -45,19" />                    <polyline points="-38,15 -45,19 -38,23" />                    <text x="-47" y="23" style="text-anchor: end;">Z=<tspan id="z-value">0</tspan></text>                  </g>                </g>                <g class="path asel0" transform="translate(580,369)">                  <polyline points="0,21 0,60" />                  <text x="0" y="73">0</text>                </g>                <g class="asel1 path" transform="translate(130,45)">                  <polyline points="100,150 100,375 410,375 410,384" />                  <polyline points="406,377 410,384 414,377" />                  <text x="410" y="397">1</text>                </g>                <g class="alu wdsel1" transform="translate(545,480)">                  <polyline points="90,40 90,80" />                  <polyline points="86,73 90,80 94,73" />                  <text x="90" y="93">1</text>                </g>                <g class="alu wdsel2 wr1" transform="translate(545,480)">                  <polyline points="90,40 215,40" />                  <polyline points="208,36 215,40 208,44" />                  <text x="214" y="35" style="text-anchor: end;">MA</text>                </g>                <g class="memory-group permanent" transform="translate(760,460)">                  <!-- HTML is absolutely positioned over this. -->                  <rect x="0" y="0" width="140" height="110" />                  <!-- WR -->                  <g class="mux-selector">                    <polyline points="110,-20 110,0" />                    <polyline points="106,-7 110,0 114,-7" />                    <text x="110" y="-21">WR=<tspan id="wr-value">1</tspan></text>                  </g>                </g>                <g class="path wdsel2" transform="translate(760,460)">                  <text x="-1" y="97" style="text-anchor: end;">MRD</text>                  <polyline points="0,85 -95,85 -95,100" />                  <polyline points="-99,93 -95,100 -91,93" />                  <text x="-95" y="113">2</text>                </g>                <g class="path werf1" transform="translate(585,561)">                  <polyline points="50,15 50,30 350,30 350,-300 254,-300" />                  <polyline points="261,-304 254,-300 261,-296" />                  <text x="255" y="-305" class="path-value rdw-value">80000CF4</text>                </g>              </svg>              <!-- These had to be moved out here because SVG <foreignObject> is very broken in WebKit -->              <!-- Memory -->              <div style="position: absolute; top: 460px; left: 760px; width: 140px; height: 110px; overflow: hidden;">                <div class="memory" data-height="110"></div>              </div>              <!-- Instructions -->              <div style="position: absolute; top: 55px; left: 250px; width: 320px; height: 66px; overflow: hidden;">                <div class="disassembly" data-height="66" data-width="320"></div>              </div>            </div>          </div>        </div>      </div>';$("body").css("height","100%"),$(".bsim").css("height","100%");$(".bsim").html();$(".bsim").empty(),$(".bsim").html(d);var e=new SplitPane("#split-container",["#editor-pane","#simulation-pane"]);$(".global-controls").append('<span style="margin-right:10px;">'+$("title").text()+"</span>"),e.setPaneWidth(0,e.window_width()),e.setPaneWidth(1,0),$("#maximise_editor").click(function(){e.setPaneWidth(0,e.window_width()),e.setPaneWidth(1,0)}),$("#split_pane").click(function(){var a=e.window_width();e.setPaneWidth(0,a/2),e.setPaneWidth(1,a/2)}),$("#maximise_simulation").click(function(){e.setPaneWidth(0,0),e.setPaneWidth(1,e.window_width())}),e.on("resize",function(a){0===a[1]?$("#maximise_editor").addClass("active").siblings().removeClass("active"):0===a[0]?$("#maximise_simulation").addClass("active").siblings().removeClass("active"):$("#split_pane").addClass("active").siblings().removeClass("active"),0===a[0]&&f.blur()});var f=new Editor("#editor","uasm",!0);f.openTab("Untitled","Now is the time...",!0),$(".editor-file-control").hide(),$("#editor .nav-tabs .close").hide();var g=function(){var a=f.currentTab(),b=f.content("assemble"),c=f.metadata(),d=new BetaAssembler(f);f.clearErrors(),f.save_to_server&&f.save_to_server(),d.assemble(a,b,c,function(a,b){a?(PassiveAlert("Assembled successfully","success"),j.setSources(b.sources),j.loadBytes(b.image,b.source_map),j.setBreakpoints(b.breakpoints),j.setLabels(b.labels),_.each(b.options,function(a,b){j.setOption(b,a)}),j.getMemory().setProtectedRegions(b.protection),b.checkoff?"tty"==b.checkoff.kind?j.setVerifier(new BSim.TextVerifier(j,b.checkoff)):"memory"==b.checkoff.kind&&j.setVerifier(new BSim.MemoryVerifier(j,b.checkoff)):j.setVerifier(null),0===e.currentState()[1]&&$("#maximise_simulation").click()):(PassiveAlert("Assembly failed.","error"),_.each(b,function(a){_.contains(f.filenames(),a.file)?f.markErrorLine(a.file,a.message,a.line-1,a.column):f.openFile(a.file,!0,function(b,c){f.markErrorLine(b,a.message,a.line-1,a.column)})}))})};f.addButtonGroup([new ToolbarButton("Assemble",g,"Runs your program!")]);var h=function(){f.setHeight(a()-$(".btn-toolbar").height()-$(".nav-tabs").height())};h(),$(window).resize(h),e.on("resize",_.throttle(f.redraw,50));var i=function(b,c,d){if(b.parents("#programmer-view").length){var e=$(".cache-information");$(window).on("resize cache-resize",function(){var f=a()-d;e.is(":visible")&&(f-=e.outerHeight()),c.resize(f),b.css({height:f})})}},j=new BSim.Beta(80);$(".regfile").each(function(){new BSim.RegfileView(this,j)}),$(".tty").each(function(){new BSim.TTY(this,j)}),$(".disassembly").each(function(){var a=new BSim.DisassembledView(this,j);i($(this),a,470)}),$(".memory").each(function(){var a=new BSim.MemoryView(this,j);i($(this),a,272)}),$(".stack").each(function(){var a=new BSim.StackView(this,j);i($(this),a,272)}),new BSim.Beta.ErrorHandler(j);var k=new BSim.SchematicView($("svg.schematic"),j);e.on("resize",BSim.SchematicView.Scale),$(window).resize(BSim.SchematicView.Scale),$(".program-controls").each(function(){l=new BSim.Controls(this,j,f,k)}),_.delay(function(){$(window).resize()},10),window.beta=j,window.editor=f;var l,m={};if(window.location.search){var n={};$.each(window.location.search.substr(1).split("&"),function(a,b){b=b.split("="),n[b[0]]=b[1]}),f.closeAllTabs();var o=!0;$.each(n,function(a,b){var d=!1;"*"==a[0]&&(d=!0,a=a.substr(1)),c(a,"url:"+b,o,d),o=!1})}if($(window).on("message",function(a){if(a=a.originalEvent,a.origin==window.location.origin){var d=a.source,e=JSON.parse(a.data);if(e.id&&(f.save_to_server=function(a){var c={tests:m.tests,required_tests:m.required_tests,state:f.get_all_documents(!0)};e.value=JSON.stringify(c),e.message=void 0,e.check=void 0,b();var g=c.tests;if(g){e.check="right";var h=m.tests.test;$.each(c.required_tests||[],function(a,b){b!=h&&(e.message="Test failed",e.check="wrong")})}d.postMessage(JSON.stringify(e),window.location.origin),a&&a()}),e.value){m=JSON.parse(e.value),f.closeAllTabs();var g=!0;$.each(m.initial_state||{},function(a,b){c(a,b,!1,!0)}),$.each(m.state||{},function(a,b){c(a,b,g,!1),g=!1}),$(".editor-file-control").hide(),$("#editor .nav-tabs .close").hide()}}}),window.parent!==window)try{$("iframe",window.parent.document).each(function(){this.contentWindow==window&&$(this).css({resize:"both",overflow:"auto"})})}catch(p){}}),BSim.Common={RegisterName:function(a){var b={27:"BP",28:"LP",29:"SP",30:"XP"};return b[a]?b[a]:"R"+a},FormatWord:function(a,b){a=BSim.Common.FixUint(0|a),b||(b=8);var c=a.toString(16);for(c=c.substr(Math.max(0,c.length-b),b);c.length<b;)c="0"+c;return c},FixUint:function(a){return 0>a&&(a=4294967295+a+1),a}};var BigTable=function(a,b,c,d,e){var f=$(a),g=d,h=Math.floor(c/d),i=b,j=h*g,k=e,l=[],m=0,n=[],o=[],p=null,q=null,r=null,s=0;this.insertRow=function(a){a.cls="",n.push(a),q.css({height:g*n.length}),u(n.length-1)},this.updateRow=function(a,b){n[a]&&(n[a]=b,u(a))},this.updateCell=function(a,b,c){n[a]&&(n[a][b]=c,u(a))},this.empty=function(){n=[],m=0,u()},this.addRowClass=function(a,b){n[a]&&(~n[a].cls.indexOf(" "+b+" ")||(n[a].cls+=" "+b+" ",u(a)))},this.removeRowClass=function(a,b){n[a]&&(n[a].cls=n[a].cls.replace(" "+b+" ",""),u(a))},this.scrollTo=function(a,b){b||(b="middle");var c=a*g;"middle"==b?c-=j/2-g:"bottom"==b&&(c-=j-g),p[0].scrollTop=c,v(c)},this.rowCount=function(){return n.length},this.startBatch=function(){s++},this.endBatch=function(){s--,s||u()},this.resize=function(a){h=Math.floor(a/g),j=h*g,r.css({height:j}),p.css({height:j}),t(),u()};var t=function(){r.empty(),o=[];for(var a=0;h>a;++a){for(var b=$("<tr>").css({height:g}),c=[],d=0;k>d;++d){var e=$("<td>");
b.append(e),c.push(e[0])}c.row=b[0],o.push(c),r.append(b)}},u=function(a){if(!s)if(void 0!==a){if(a>=m&&m+h>a){for(var b=a-m,c=n[a]||l,d=c.length-1;d>=0;d--)o[b][d].textContent=c[d];o[b].row.className=c.cls}}else for(var e=m;m+h>e;++e)u(e)},v=function(a){var b=_.isNumber(a)?a:p[0].scrollTop;0>b&&(b=0);var c=b/g|0;c!=m&&(m=c,u())},w=function(){p=$("<div>").css({width:i,height:j,position:"absolute",top:0,left:0,"overflow-y":"scroll"}),r=$("<table>").css({width:i,height:j,position:"absolute",top:0,left:0}),q=$("<div>"),f.css({position:"relative"}).append(r,p),p.append(q),p.scroll(v);for(var a=0;k>a;++a)l.push("");l.cls="",t()};w()};BSim.Beta=function(){"use strict";var a=this;_.extend(this,Backbone.Events);var b=new BSim.Beta.Memory(this);this.memory=b;var c=[],d=new Int32Array(32),e=!1,f=2147483648,g=0,h=4294967295,i=0,j=0,k=0,l=1e4;this.mMouseCoords=-1,this.mKeyboardInput=null,this.mServerInfo=[];var m={},n={},o=[],p=[],q=[],r=[],s=new Dequeue,t={},u={},v=[],w={},x={},y={},z="";this.mSources=[];var A=2147483648,B=30,C=0,D=4,E=8,F=12,G=16,H=20,I=2,J=4,K=8,L=function(a,b){this.registers={},this.words={},this.pc=a,this.tty=null,this.cycle=b},M=function(){y={clock:!1,div:!0,mul:!0,kalways:!1,tty:!1,annotate:!1,segmentation:!1}};M(),this.setSources=function(a){this.mSources=a},this.loadBytes=function(a,d){this.stop(),this.reset(),b.loadBytes(a),c=d,M(),this.trigger("resize:memory",a.length);var e=_.range(0,b.size(),4);this.trigger("change:bulk:word",_.object(e,_.map(e,function(a){return b.readWord(a)}))),this.clearBreakpoints(),this.setLabels({}),this.setPC(A)},this.setOption=function(a,b){y[a]=b,"segmentation"==a&&$(".segmentation").toggle(b)},this.isOptionSet=function(a){return!!y[a]},this.setBreakpoints=function(a){w=_.object(_.map(a,function(a){return[a,!0]})),this.trigger("add:bulk:breakpoint",a)},this.clearBreakpoints=function(){this.trigger("delete:bulk:breakpoint",_.map(_.keys(w),function(a){return parseInt(a,10)})),w={}},this.addBreakpoint=function(a){w[a]=!0,this.trigger("add:breakpoint",a)},this.removeBreakpoint=function(a){delete w[a],this.trigger("delete:breakpoint",a)},this.getBreakpoints=function(){return _.map(_.keys(w),function(a){return parseInt(a,10)})},this.setLabels=function(a){x=_.invert(a),this.trigger("change:bulk:labels",x)},this.getLabel=function(b){var c=a.physicalAddr(b);return x[c]||null},this.setVerifier=function(a){this.mVerifier=a},this.verifier=function(){return this.mVerifier},this.physicalAddr=function(b){var c=b&~A&4294967292;if(a.isOptionSet("segmentation")&&!a.inSupervisorMode()){if(c>=h)throw new BSim.Beta.SegmentationFault("Address exceeds segment bounds: "+BSim.Common.FormatWord(c));c=c+g&~A&4294967292}return c},this.readWord=function(c,d,f){var i=a.physicalAddr(c);if(a.isOptionSet("segmentation")&&a.inSupervisorMode()){if(-4==c)return g;if(-8==c)return h}return d&&(e?(o.push(i),o.length>5&&o.shift()):a.trigger("read:word",i)),b.readWordCached(i,f)},this.writeWord=function(c,d,f){d|=0;var i=a.physicalAddr(c);if(a.isOptionSet("segmentation")&&a.inSupervisorMode()){if(-4==c)return a.trackRegisterChanges("base",g,d),void(g=d);if(-8==c)return a.trackRegisterChanges("bounds",h,d),void(h=d)}v.push([i,b.readWord(i)]),b.writeWordCached(i,d),e||a.trigger("change:word",i,d),f&&(e?(p.push(i),p.length>5&&p.shift()):a.trigger("write:word",i)),n[i]=d},this.readRegister=function(a){if(0>a||a>31)throw new BSim.Beta.RuntimeError("Attempted to read invalid register r"+a);return 31==a?0:d[a]},this.trackRegisterChanges=function(b,c,d){_.has(u,b)||(u[b]=c),e?m[b]=d:a.trigger("change:register",b,d)},this.writeRegister=function(a,b){if(b|=0,31!=a){if(0>a||a>31)throw new BSim.Beta.RuntimeError("Attempted to write invalid register r"+a);var c=d[a];d[a]=b,this.trackRegisterChanges(a,c,b)}},this.realReadRegister=function(b){return q.push(b),a.readRegister(b)},this.realWriteRegister=function(b,c){return r.push(b),a.writeRegister(b,c)},this.setPC=function(a,b){f&A||b||(a&=~A),this.isOptionSet("kalways")&&(a|=A),f=4294967292&a,e||this.trigger("change:pc",a)},this.getPC=function(){return f},this.signExtend16=function(a){return a&=65535,32768&a&&(a-=65536),a},this.decodeInstruction=function(a){var b=a>>26&63,c=a>>21&31,d=a>>16&31,e=a>>11&31,f=this.signExtend16(65535&a);return{opcode:b,ra:d,rb:e,rc:c,literal:f}},this.reset=function(a){if(this.setPC(A|C,!0),d=new Int32Array(32),g=0,h=4294967295,i=0,j=0,this.trigger("change:cycle_count",0),k=0,this.mServerInfo=[],a||b.reset(),this.mMouseCoords=-1,this.mKeyboardInput=null,z="",this.trigger("text:clear"),this.trigger("change:bulk:register",_.object(_.range(32),d)),this.trigger("change:register","base",g),this.trigger("change:register","bounds",h),!a){var c=_.range(0,b.size(),4);this.trigger("change:bulk:word",_.object(c,_.map(c,function(a){return b.readWord(a)})))}},this.ttyOut=function(a){t.tty=z,z+=a,this.trigger("text:out",a)},this.ttyContent=function(){return z},this.inSupervisorMode=function(){return!!(f&A)},this.handleIllegalInstruction=function(a){this.writeRegister(B,f),this.setPC(A|D,!0)},this.clockInterrupt=function(){this.isOptionSet("clock")&&(i|=I)};var N=function(){a.writeRegister(B,f+4),a.setPC(A|F,!0),i&=~I};this.keyboardInterrupt=function(a){this.isOptionSet("tty")&&(this.mKeyboardInput=a,i|=J)};var O=function(){a.writeRegister(B,f+4),a.setPC(A|G,!0),i&=~J};this.mouseInterrupt=function(a,b){this.isOptionSet("tty")&&(this.mMouseCoords=(65535&a)<<16|65535&b,i|=K)};var P=function(){a.writeRegister(B,f+4),a.setPC(A|H,!0),i&=~K};this.getCycleCount=function(){return j},this.executeCycle=function(){var b=a.physicalAddr(f);if(w[b]===!1&&(w[b]=!0),q=[],r=[],++k%l===0&&(k=0,this.clockInterrupt()),!this.inSupervisorMode()){if(i&I)return void N();if(i&J)return void O();if(i&K)return void P()}t=new L(f,j),v=[],u={};try{j=(j+1)%2147483647,e||this.trigger("change:cycle_count",j);var c=this.readWord(f,!1,!0),d=f;if(f+=4,0===c)return f-=4,!1;var g=this.decodeInstruction(c),h=BSim.Beta.Opcodes[g.opcode];if(!h)return this.handleIllegalInstruction(g);if(h.privileged&&!(f&A))return this.handleIllegalInstruction(g);e||this.trigger("change:pc",f);var m=null;return m=h.has_literal?h.exec.call(this,g.ra,g.literal,g.rc):h.exec.call(this,g.ra,g.rb,g.rc),m===!1&&this.setPC(d,!0),e||(this.trigger("read:register",q),this.trigger("write:register",r)),t.registers=u,t.words=v,s.push(t),s.length()>50&&s.shift(),m}catch(n){if(n instanceof BSim.Beta.SegmentationFault)return this.writeRegister(B,f),void this.setPC(A|E,!0);if(n instanceof BSim.Beta.RuntimeError)return n.message+=" [PC = 0x"+BSim.Common.FormatWord(f)+"]",this.trigger("error",n),this.setPC(d,!0),!1;throw n}return!1},this.undoCycle=function(){if(!s.length)return!1;var c=s.pop();_.each(c.registers,function(b,c){a.writeRegister(c,b)});var d={};return _.each(c.words,function(c){var e=c[0],f=c[1];d[e]||(d[e]=!0,b.writeWord(e,f),a.trigger("change:word",e,f))}),a.setPC(c.pc,!0),c.tty&&(z=c.tty,a.trigger("text:replace",z)),j=c.cycle,e||this.trigger("change:cycle_count",j),!0},this.undoLength=function(){return s.length()},this.run=function(b){this.trigger("run:start"),e=!0,_.defer(function c(){if(!e)return void a.trigger("run:stop");for(var d=b;d--;){var g=a.physicalAddr(f);if(w[g]===!0){w[g]=!1,e=!1;break}if(a.executeCycle()===!1){e=!1;break}}a.trigger("change:bulk:word",n),a.trigger("change:bulk:register",m),a.trigger("read:bulk:word",o),a.trigger("write:bulk:word",p),a.trigger("read:register",q),a.trigger("write:register",r),a.trigger("change:pc",f),a.trigger("change:cycle_count",j),m={},n={},o=[],p=[],_.defer(c)})},this.stop=function(){e=!1},this.isRunning=function(){return e},this.memorySize=function(){return b.size()},this.getMemory=function(){return b};var Q;return this.highlightSource=function(a){if(!(0==$("#editor").width()||a>=c.length)){var b=c[a];void 0!==b&&(Q&&Q.clear(),Q=editor.addLineClass(b.file,b.line-1,"highlight-line"),editor.showLine(b.file,b.line-1))}},this},BSim.Beta.RuntimeError=function(a){this.message=a},BSim.Beta.RuntimeError.prototype.toString=function(){return this.message},BSim.Beta.SegmentationFault=function(a){this.message=a},BSim.Beta.Memory=function(a){function b(){if(u){var a=I+J,b=K+L,c=M+N,d=b+c+a,e=K+M+I,f=L+N+J;$("#fetch-hits").text(I.toString()),$("#read-hits").text(K.toString()),$("#write-hits").text(M.toString()),$("#total-hits").text(e.toString()),$("#fetch-misses").text(J.toString()),$("#read-misses").text(L.toString()),$("#write-misses").text(N.toString()),$("#total-misses").text(f.toString()),$("#fetch-total").text(a.toString()),$("#read-total").text(b.toString()),$("#write-total").text(c.toString()),$("#total-total").text(d.toString()),$("#fetch-ratio").text(a?(I/a).toFixed(3):" "),$("#read-ratio").text(b?(K/b).toFixed(3):" "),$("#write-ratio").text(c?(M/c).toFixed(3):" "),$("#total-ratio").text(d?(e/d).toFixed(3):" "),$("#total-cycles").text(H.toString())}else $(".cache-span").text(" ")}function c(){H=0,J=0,L=0,N=0,I=0,K=0,M=0,O=0,P=0,Q=0,h=0;for(var a=0;a<D.length;a+=1)D[a]=0,E[a]=0,F[a]=0,G[a]=0;b()}function d(a){for(var b=0,c=1;32>b&&!(c>=a);)c<<=1,b+=1;return b}function e(a){var b=d(a);return 32==b?4294967295:(1<<b)-1}function f(){if(u){D=new Uint8Array(x),E=new Uint8Array(x),F=new Uint32Array(x),G=new Uint32Array(x),i=x/y,j=d(w)+2,k=e(i),l=j+d(i),m=(1<<32-l)-1;var a=32-l,b=32*w+a+1+(A?1:0),f=1==i?x*b*50:x*b*6+20*(l-j)+20*i+b*y*30,g=y*(32-l),h=20*g,n=32*y*(w-1),o=8*n,p="[31:"+l.toString()+"]";$("#tag-bits").text(p),p=i>1?"["+(l-1).toString()+":"+j.toString()+"]":"N/A",$("#index-bits").text(p),p="["+(j-1).toString()+":0]",$("#offset-bits").text(p),p=y>1?y.toString()+"x(":"",p+=i.toString()+"x"+b.toString(),y>1&&(p+=")"),$("#mem-size").text(p),p=g.toString(),$("#comparator-bits").text(p),p=n.toString(),$("#mux-bits").text(p),p=f+h+o,$("#total-cost").text(p),$("#total-words").prop("disabled",!1),$("#line-size").prop("disabled",!1),$("#associativity").prop("disabled",!1),$("#replacement-strategy").prop("disabled",1==y),$("#write-strategy").prop("disabled",!1)}else $("#total-words").prop("disabled",!0),$("#line-size").prop("disabled",!0),$("#associativity").prop("disabled",!0),$("#replacement-strategy").prop("disabled",!0),$("#write-strategy").prop("disabled",!0);c()}function g(a,b,c){if(y>1)switch(z){case q:case r:var d=G[a],e=a+i;h=0;for(var f=1;y>f;f+=1)G[e]<d&&(h=f,d=G[e]),e+=i;break;case s:break;case t:h=(h+1)%y}a+=h*i,Q+=1,E[a]&&(P+=1,D[a]&&(D[a]=0,O+=1,H+=C+w-1)),E[a]=1,D[a]=c?1:0,F[a]=b,H+=B+w-1,G[a]=H}var h,i,j,k,l,m,n=new Uint32Array(0),o=new Uint8Array(0),p=new Uint32Array(0),q=0,r=1,s=2,t=3,u=!1,v=64,w=1,x=64,y=1,z=q,A=!0,B=10,C=10,D=new Uint8Array(0),E=new Uint8Array(0),F=new Uint32Array(0),G=new Uint32Array(0),H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0;this.loadBytes=function(a){var b=Math.ceil(a.length/4);n=new Uint32Array(b),p=new Uint32Array(b),o=new Uint8Array(b);for(var c=0;c<a.length;c+=4)n[c/4]=a[c+3]<<24|a[c+2]<<16|a[c+1]<<8|a[c+0];p=new Uint32Array(n)},this.reset=function(){n=new Uint32Array(p),c()},this.contents=function(){return n},this.readWord=function(a){var b=a>>2;if(0>b||b>=n.length)throw new BSim.Beta.RuntimeError("Attempted to read out of bounds address 0x"+BSim.Common.FormatWord(a));return n[b]},this.readWordCached=function(a,b){var c=this.readWord(a);if(u){H+=1;for(var d=a>>j&k,e=a>>l&m,f=d,h=0;y>h;h+=1){if(E[f]&&F[f]==e)return b?I+=1:K+=1,z==q&&(G[f]=H),c;f+=i}g(d,e,!1)}else H+=B;return b?J+=1:L+=1,c},this.writeWord=function(a,b){b|=0;var c=a>>2;if(0>c||c>=n.length)throw new BSim.Beta.RuntimeError("Attempted to write out of bounds address 0x"+BSim.Common.FormatWord(a));if(o[c])throw new BSim.Beta.RuntimeError("Attempted write to protected memory at 0x"+BSim.Common.FormatWord(a));n[c]=b},this.writeWordCached=function(a,b){if(this.writeWord(a,b),u){H+=1;for(var c=a>>j&k,d=a>>l&m,e=c,f=0;y>f;f+=1){if(E[e]&&F[e]==d)return M+=1,A?D[e]=1:H+=C,void(z==q&&(G[e]=H));e+=i}g(c,d,A),A||(H+=C)}else H+=C;N+=1},this.size=function(){return 4*n.length},this.setProtectedRegions=function(a){_.each(a,function(a){for(var b=a.start/4,c=a.end/4,d=b;c>d&&d<o.length;++d)o[d]=!0})},this.isProtected=function(a){return!!o[a>>2]},$("#cache-status").on("change",function(a){u="on"==$(this).val(),f()}),$("#total-words").on("change",function(a){v=parseInt($(this).val()),w=Math.min(v,w),$("select#line-size option").each(function(){var a=parseInt($(this).text());$(this).prop("disabled",a>v),$(this).prop("selected",a==w)}),x=v/w,y>x&&(y=1),$("select#associativity option").each(function(){var a;switch($(this).text()){case"direct mapped":a=1;break;case"2-way":a=2;break;case"4-way":a=4;break;case"8-way":a=8;break;case"fully associative":a=x}$(this).prop("disabled",a>x),$(this).prop("selected",a==y)}),"fully associative"==$("#associativity").val()&&(y=x),f()}),$("#line-size").on("change",function(a){w=parseInt($(this).val()),x=v/w,y>x&&(y=1),$("select#associativity option").each(function(){var a;switch($(this).text()){case"direct mapped":a=1;break;case"2-way":a=2;break;case"4-way":a=4;break;case"8-way":a=8;break;case"fully associative":a=x}$(this).prop("disabled",a>x),$(this).prop("selected",a==y)}),"fully associative"==$("#associativity").val()&&(y=x),f()}),$("#associativity").on("change",function(a){switch($(this).val()){case"direct mapped":y=1;break;case"2-way":y=2;break;case"4-way":y=4;break;case"8-way":y=8;break;case"fully associative":y=x}f()}),$("#replacement-strategy").on("change",function(a){switch($(this).val()){case"LRU":z=q;break;case"FIFO":z=r;break;case"Random":z=s;break;case"Cycle":z=Cycle}f()}),$("#write-strategy").on("change",function(a){switch($(this).val()){case"write-through":A=!1;break;case"write-back":A=!0}f()}),f(),a.on("read:register",b)},BSim.Beta.Opcodes={},function(){var a=BSim.Common.RegisterName,b=function(b,c,d,e){return b.name+"("+a(c)+", "+a(d)+", "+a(e)+")"},c=function(b,c,d,e){return b.name+"("+a(c)+", "+d+", "+a(e)+")"},d=function(a){if(a.privileged||(a.privileged=!1),a.has_literal||(a.has_literal=!1),a.disassemble||(a.has_literal?a.disassemble=function(b){return c(a,b.ra,b.literal,b.rc)}:a.disassemble=function(c){return b(a,c.ra,c.rb,c.rc)}),!a.paths){var d=a.alufn||null;a.has_literal?a.paths={alufn:d,werf:1,bsel:1,wdsel:1,wr:0,pcsel:0,asel:0,wasel:0}:a.paths={alufn:d,werf:1,bsel:0,wdsel:1,wr:0,ra2sel:0,pcsel:0,asel:0,wasel:0}}var e=["alufn","werf","bsel","wdsel","wr","ra2sel","pcsel","asel","wasel"];_.each(e,function(b){void 0===a.paths[b]&&(a.paths[b]=null)}),BSim.Beta.Opcodes[a.opcode]=a};d({opcode:32,name:"ADD",alufn:"+",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)+this.realReadRegister(b))},disassemble:function(b){return 31==b.rb?"MOVE("+a(b.ra)+", "+a(b.rc)+")":"ADD("+a(b.ra)+", "+a(b.rb)+", "+a(b.rc)+")"}}),d({opcode:48,name:"ADDC",has_literal:!0,alufn:"+",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)+b)},disassemble:function(b){return 31==b.ra?"CMOVE("+b.literal+", "+a(b.rc)+")":"ADDC("+a(b.ra)+", "+b.literal+", "+a(b.rc)+")"}}),d({opcode:40,name:"AND",alufn:"&",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)&this.realReadRegister(b))}}),d({opcode:56,name:"ANDC",alufn:"&",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)&b)}}),d({opcode:28,name:"BEQ",paths:{werf:1,wdsel:0,wr:0,pcsel:"z",wasel:0,z:!0},has_literal:!0,exec:function(a,b,c){var d=this.getPC();0===this.realReadRegister(a)&&this.setPC(d+4*b,!1),this.realWriteRegister(c,d)},disassemble:function(b,c){var d=4*b.literal,e=4*b.literal+(c+4)&2147483647,f=this.getLabel(e)||(0>d?".-"+(-d).toString():".+"+d.toString());return 31==b.ra?31==b.rc?"BR("+f+")":"BR("+f+", "+a(b.rc)+")":"BEQ("+a(b.ra)+", "+f+", "+a(b.rc)+")"}}),d({opcode:29,name:"BNE",has_literal:!0,paths:{werf:1,wdsel:0,wr:0,pcsel:"~z",wasel:0,z:!0},exec:function(a,b,c){var d=this.getPC();0!==this.realReadRegister(a)&&this.setPC(d+4*b,!1),this.realWriteRegister(c,d)},disassemble:function(b,c){var d=4*b.literal,e=4*b.literal+(c+4)&2147483647,f=this.getLabel(e)||(0>d?".-"+(-d).toString():".+"+d.toString());return"BNE("+a(b.ra)+", "+f+", "+a(b.rc)+")"}}),d({opcode:36,name:"CMPEQ",alufn:"=",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)==this.realReadRegister(b))}}),d({opcode:52,name:"CMPEQC",has_literal:!0,alufn:"=",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)==b)}}),d({opcode:38,name:"CMPLE",alufn:"<=",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)<=this.realReadRegister(b))}}),d({opcode:54,name:"CMPLEC",alufn:"<=",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)<=b)}}),d({opcode:37,name:"CMPLT",alufn:"<",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)<this.realReadRegister(b))}}),d({opcode:53,name:"CMPLTC",alufn:"<",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)<b)}}),d({opcode:35,name:"DIV",alufn:"/",exec:function(a,b,c){if(!this.isOptionSet("div"))return this.handleIllegalInstruction();if(0===this.readRegister(b))throw new BSim.Beta.RuntimeError("Division of "+this.readRegister(a)+" by zero");this.realWriteRegister(c,this.realReadRegister(a)/this.realReadRegister(b)|0)}}),d({opcode:51,name:"DIVC",alufn:"/",has_literal:!0,exec:function(a,b,c){if(!this.isOptionSet("div"))return this.handleIllegalInstruction();if(0===b)throw new BSim.Beta.RuntimeError("Division of "+this.readRegister(a)+" by zero");this.realWriteRegister(c,this.realReadRegister(a)/b|0)}}),d({opcode:27,name:"JMP",paths:{werf:1,wdsel:0,wr:0,pcsel:2,wasel:0},exec:function(a,b,c){this.realWriteRegister(c,this.getPC()),this.setPC(this.realReadRegister(a))},disassemble:function(b){return 31==b.rc?"JMP("+a(b.ra)+")":"JMP("+a(b.ra)+", "+a(b.rc)+")"}}),d({opcode:24,name:"LD",paths:{alufn:"+",werf:1,bsel:1,wdsel:2,wr:0,pcsel:0,asel:0,wasel:0},has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.readWord(this.realReadRegister(a)+b,!0))}}),d({opcode:31,name:"LDR",paths:{alufn:"A",werf:1,wdsel:2,wr:0,pcsel:0,asel:1,wasel:0},has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.readWord(this.getPC()+4*b,!0))},disassemble:function(b,c){var d=4*b.literal,e=4*b.literal+(c+4)&2147483647,f=this.getLabel(e)||(0>d?".-"+(-d).toString():".+"+d.toString());return"LDR("+f+", "+a(b.rc)+")"}}),d({opcode:34,name:"MUL",alufn:"*",exec:function(a,b,c){return this.isOptionSet("mul")?void this.realWriteRegister(c,this.realReadRegister(a)*this.realReadRegister(b)):this.handleIllegalInstruction()}}),d({opcode:50,name:"MULC",alufn:"*",has_literal:!0,exec:function(a,b,c){return this.isOptionSet("mul")?void this.realWriteRegister(c,this.realReadRegister(a)*b):this.handleIllegalInstruction()}}),d({opcode:41,name:"OR",alufn:"|",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)|this.realReadRegister(b))}}),d({opcode:57,name:"ORC",alufn:"|",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)|b)}}),d({opcode:44,name:"SHL",alufn:"<<",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)<<this.realReadRegister(b))}}),d({opcode:60,name:"SHLC",alufn:"<<",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)<<b)}}),d({opcode:45,name:"SHR",alufn:">>>",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)>>>this.realReadRegister(b))}}),d({opcode:61,name:"SHRC",alufn:">>>",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)>>>b)}}),d({opcode:46,name:"SRA",alufn:">>",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)>>this.realReadRegister(b))}}),d({opcode:62,name:"SRAC",alufn:">>",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)>>b)}}),d({opcode:33,name:"SUB",alufn:"-",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)-this.realReadRegister(b))}}),d({opcode:49,name:"SUBC",alufn:"-",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)-b)}}),d({opcode:25,name:"ST",paths:{alufn:"+",werf:0,bsel:1,wr:1,ra2sel:1,pcsel:0,asel:0},has_literal:!0,exec:function(a,b,c){this.writeWord(this.realReadRegister(a)+b,this.realReadRegister(c),!0)},disassemble:function(b){return"ST("+a(b.rc)+", "+b.literal+", "+a(b.ra)+")"}}),d({opcode:42,name:"XOR",alufn:"^",exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)^this.realReadRegister(b))}}),d({opcode:58,name:"XORC",alufn:"^",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,this.realReadRegister(a)^b)}}),d({opcode:43,name:"XNOR",alufn:"~^",exec:function(a,b,c){this.realWriteRegister(c,~(this.realReadRegister(a)^this.realReadRegister(b)))}}),d({opcode:59,name:"XNORC",alufn:"~^",has_literal:!0,exec:function(a,b,c){this.realWriteRegister(c,~(this.realReadRegister(a)^b))}}),d({opcode:0,name:"PRIV_OP",has_literal:!0,privileged:!0,exec:function(a,b,c){switch(b){case 0:return!1;case 1:if(!this.isOptionSet("tty"))return this.handleIllegalInstruction();null===this.mKeyboardInput?this.setPC(this.getPC()-4):(13==this.mKeyboardInput&&(this.mKeyboardInput=10),this.realWriteRegister(0,this.mKeyboardInput),this.mKeyboardInput=null);break;case 2:if(!this.isOptionSet("tty"))return this.handleIllegalInstruction();var d=String.fromCharCode(this.realReadRegister(a));this.ttyOut(d);break;case 3:this.realWriteRegister(0,this.getCycleCount());break;case 4:this.realWriteRegister(0,Date.now());break;case 5:if(!this.isOptionSet("tty"))return this.handleIllegalInstruction();this.realWriteRegister(0,this.mMouseCoords),this.mMouseCoords=-1;break;case 6:this.realWriteRegister(c,_.random(4294967295));break;case 7:throw new BSim.Beta.RuntimeError("SEED() is unimplemented. To implement, you must provide your own RNG (Math.random is unseedable)");case 8:this.mServerInfo.push(this.realReadRegister(0));break;default:return this.handleIllegalInstruction()}},disassemble:function(a){var b=["HALT()","RDCHAR()","WRCHAR()","CYCLE()","TIME()","CLICK()","RANDOM()","SEED()","SERVER()"];return a.literal>=0&&a.literal<b.length?b[a.literal]:"illop"}})}(),BSim.RegfileView=function(a,b){var c=$(a),d=$('<table class="regfile">'),e=new Array(32),f=b,g=function(a,b){var c=BSim.Common.FormatWord(b);"base"==a?$(".base").text(c):"bounds"==a?$(".bounds").text(c):e[a].text(c)},h=function(a){for(var b in a)g(b,a[b])},i=function(a){d.find("td").removeClass("last-read"),_.each(a,function(a){e[a].addClass("last-read").prev("td").addClass("last-read")})},j=function(a){d.find("td").removeClass("last-write"),_.each(a,function(a){e[a].addClass("last-write").prev("td").addClass("last-write")})},k=function(){for(var a=0;8>a;++a){for(var b=$("<tr>"),k=0;4>k;++k){b.append($('<td class="register">').text(BSim.Common.RegisterName(a+8*k)));var l=$('<td class="value">').text(BSim.Common.FormatWord(0));e[a+8*k]=l,b.append(l)}d.append(b)}c.append(d),f.on("change:register",g),f.on("change:bulk:register",h),f.on("read:register",i),f.on("write:register",j)};k()},BSim.Controls=function(a,b,c,d){var e=$(a),f=b,g=c,h=d,i=($('<div class="btn-group">'),null),j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=function(){f.isRunning()?f.stop():f.run(1)},r=function(){f.run(25e3)},s=function(){g.metadata_count("step"),f.executeCycle(),j.enable(),f.verifier()},t=function(){f.reset()};this.get_checkoff=function(){var a=f.verifier();if(!a)return void 0;var b={};return b[a.getChecksum().toString()]=a.verify()?"passed":a.getMessage()||"",b};var u=function(){g.metadata_count("run"),k.setLabel("icon-pause"),m.disable(),l.disable(),j.disable(),f.verifier()},v=function(){k.setLabel("icon-play"),m.enable(),l.enable(),j.enable(),g&&g.save_to_server&&g.save_to_server()},w=function(a){0===a?(k.disable(),l.disable(),m.disable(),j.disable(),i.disable()):(k.enable(),l.enable(),m.enable(),i.enable())},x=function(){f.undoCycle(),0===f.undoLength()&&j.disable()},y=function(){$("#programmer-view, #schematic-view").toggle(),$("#schematic-view").filter(":hidden").length?h.stopUpdating():h.startUpdating(),BSim.SchematicView.Scale()},z=function(){$(".cache-wrapper").toggle(),$(window).trigger("cache-resize")},A=function(){i=new ToolbarButton("icon-fast-backward",t,"Reset Simulation"),j=new ToolbarButton("icon-step-backward",x,"Step Back"),k=new ToolbarButton("icon-play",q),l=new ToolbarButton("icon-forward",r,"Run Fast"),m=new ToolbarButton("icon-step-forward",s,"Step Forward"),n=new ToolbarButton(e.parents("#schematic-view").length?"Programmer's View":"Schematic View",y),o=new ToolbarButton("Cache",z),p=new Toolbar(e),p.addButtonGroup([i,j,m,k,l]),p.addButtonGroup([n]),p.addButtonGroup([o]),f.on("run:start",u),f.on("run:stop",v),f.on("resize:memory",w),w(0)};A()},BSim.TTY=function(a,b){var c=$(a),d=b,e="",f=$('<pre class="tty-output" tabindex="1">'),g=!1,h=!1,i=function(){c.append(f);var a=f[0],i=function(){a.textContent+=e,e="",a.scrollTop=a.scrollHeight},j=_.throttle(i,50),k=function(a){e+=a,j()},l=function(){e="",a.textContent=""},m=function(b){e="",a.textContent=b};d.on("text:out",k),d.on("text:clear",l),d.on("text:replace",m),c.keypress(function(a){b.keyboardInterrupt(a.which)}),f.mousedown(function(a){if(h&&!g){var c=f.offset(),d=a.pageX-c.left,e=a.pageY-c.top;0>d&&(d=0),0>e&&(e=0),b.mouseInterrupt(d,e)}}),f.focus(function(a){g=!0,h=!0,setTimeout(function(){g=!1},100)}),f.blur(function(a){h=!1})};i()},BSim.DisassembledView=function(a,b){var c=$(a),d=$("#cycle_count",c.parent()),e=b,f=new BigTable(c,c.data("width")||450,c.data("height")||200,22,4),g=0,h=!1,i=function(a,b){var c=e.decodeInstruction(b),d=BSim.Beta.Opcodes[c.opcode],f="illop";return d&&(f=d.disassemble.call(e,c,parseInt(a,10))),f},j=function(a,b){f.updateCell(a/4,1,BSim.Common.FormatWord(b)),f.updateCell(a/4,3,i(a,b))},k=function(a){f.startBatch();for(var b in a)j(b,a[b]);f.endBatch()},l=function(a){f.startBatch();for(var b=f.rowCount(),c=0;b>c;++c){var d=4*c;a[d]&&f.updateCell(c,2,a[d]+":"),f.updateCell(c,3,i(d,e.memory.readWord(d)))}f.endBatch()},m=function(a){d.text(a.toString())},n=function(a){f.startBatch();try{var b=e.physicalAddr(a)/4;f.removeRowClass(g/4,"current-instruction")}catch(d){b=0}f.addRowClass(b,"current-instruction"),2147483648&a?h||(c.addClass("supervisor-mode"),h=!0):h&&(c.removeClass("supervisor-mode"),h=!1),f.scrollTo(b),g=4*b,f.endBatch(),e.highlightSource(g)},o=function(a){t(a)},p=function(a){_.each(a,r)},q=function(a){_.each(a,s)},r=function(a){var b=a/4;f.addRowClass(b,"breakpoint")},s=function(a){var b=a/4;f.removeRowClass(b,"breakpoint")},t=function(a){f.startBatch();var b=BSim.Common.FormatWord(0),c=i(0,0);Math.ceil(a/4);f.empty();for(var d=0;a>d;d+=4)f.insertRow([BSim.Common.FormatWord(d,4),b,"",c]);f.endBatch()};this.resize=function(a){f.resize(a)};var u=function(){c.append(f),e.on("change:word",j),e.on("change:pc",n),e.on("change:cycle_count",m),e.on("change:bulk:word",k),e.on("resize:memory",o),e.on("add:bulk:breakpoint",p),e.on("delete:bulk:breakpoint",q),e.on("add:breakpoint",r),e.on("delete:breakpoint",s),e.on("change:bulk:labels",l)};u()},BSim.MemoryView=function(a,b){var c=$(a),d=b,e=null,f=[],g=[],h=[],i=function(a){var b=BSim.Common.FormatWord(0);Math.ceil(a/4);e.startBatch(),e.empty();for(var c=0;a>c;c+=4)e.insertRow([BSim.Common.FormatWord(c,4),b]);e.endBatch()},j=function(a,b){e.updateCell(a/4,1,BSim.Common.FormatWord(b))},k=function(a){e.startBatch();for(var b in a)j(b,a[b]);e.endBatch()},l=function(a){n(a,"last-write","a",f)},m=function(a){n(a,"last-read","b",g)},n=function(a,b,c,d){e.startBatch();var f=a/4;e.scrollTo(f);for(var g=d.length-1;g>=0;g--)e.removeRowClass(d[g],c+g),3>=g?e.addRowClass(d[g],c+(g+1)):e.removeRowClass(d[g],b);d.length>5&&d.pop(),d.unshift(f),e.addRowClass(f,b),e.addRowClass(f,c+"0"),e.endBatch()},o=function(a){e.startBatch(),_.each(a,m),e.endBatch()},p=function(a){e.startBatch(),_.each(a,l),e.endBatch()},q=function(a){e.startBatch();for(var b=h.length-1;b>=0;b--)h[b].updateCell(h[b],0,BSim.Common.FormatWord(4*h[b],4));for(var c in a)c=parseInt(c,10),e.updateCell(c/4,0,a[c]);e.endBatch()};this.resize=function(a){e.resize(a)};var r=function(){var a=c.data("height")||350;e=new BigTable(c,140,a,22,2),d.on("change:word",j),d.on("change:bulk:word",k),d.on("resize:memory",i),d.on("write:word",l),d.on("read:word",m),d.on("read:bulk:word",o),d.on("write:bulk:word",p),d.on("change:bulk:labels",q)};r()},BSim.StackView=function(a,b){var c=$(a),d=b,e=null,f=null,g=[],h=[],i=[],j=[],k=29,l=27,m=function(a){e.startBatch();var b=BSim.Common.FormatWord(0);Math.ceil(a/4);e.empty();for(var c=0;a>c;c+=4)e.insertRow(["",BSim.Common.FormatWord(c,4),b]);e.endBatch()},n=function(a,b){e.updateCell(a/4,2,BSim.Common.FormatWord(b))},o=function(a){e.startBatch();for(var b in a)n(b,a[b]);e.endBatch()},p=function(a,b){if(a==k){var c=b/4;if(c>=e.rowCount())return;e.startBatch(),null!==f&&(e.removeRowClass(f,"current-sp"),e.updateCell(f,0,"")),f=c,e.addRowClass(c,"current-sp"),e.updateCell(c,0,"SP"),e.scrollTo(c,"bottom"),e.endBatch()}(a==l||a==k)&&d.isOptionSet("annotate")&&(e.startBatch(),q(),r(d.readRegister(l),!0),e.endBatch())},q=function(){e.startBatch(),_.each(g,function(a){e.updateCell(a,0,a==f?"SP":"")}),e.endBatch()},r=function(a,b){if(a&&!(a>d.readRegister(k))){var c=a/4;b&&s(c,"BP"),s(--c,"oldBP"),s(--c,"oldLP");try{var e=d.memory.readWord(d.memory.readWord(a-8));if(3351052288==BSim.Common.FixUint(4294901760&e)){for(var f=(65535&e)>>2,g=1;f>=g;++g)s(--c,"arg"+g);r(d.memory.readWord(a-4),!1)}}catch(h){}}},s=function(a,b){e.updateCell(a,0,b),g.push(a)},t=function(a){e.startBatch();for(var b in a)p(b,a[b]);e.endBatch()},u=function(a){w(a,"last-write","a",h)},v=function(a){w(a,"last-read","b",i)},w=function(a,b,c,d){e.startBatch();for(var f=a/4,g=d.length-1;g>=0;g--)e.removeRowClass(d[g],c+g),3>=g?e.addRowClass(d[g],c+(g+1)):e.removeRowClass(d[g],b);d.length>5&&d.pop(),d.unshift(f),e.addRowClass(f,b),e.addRowClass(f,c+"0"),e.endBatch()},x=function(a){e.startBatch(),_.each(a,v),e.endBatch()},y=function(a){e.startBatch(),_.each(a,u),e.endBatch()},z=function(a){e.startBatch();for(var b=j.length-1;b>=0;b--)j[b].updateCell(j[b],1,BSim.Common.FormatWord(4*j[b],4));for(var c in a)c=parseInt(c,10),e.updateCell(c/4,1,a[c]);e.endBatch()};this.resize=function(a){e.resize(a)};var A=function(){var b=c.data("height")||350;e=new BigTable(a,170,b,22,3),d.on("change:word",n),d.on("change:bulk:word",o),d.on("resize:memory",m),d.on("change:register",p),d.on("change:bulk:register",t),d.on("write:word",u),d.on("read:word",v),d.on("read:bulk:word",x),d.on("write:bulk:word",y),d.on("change:bulk:labels",z)};A()},BSim.Beta.ErrorHandler=function(a){var b=a,c=function(a){var b=new ModalDialog;b.setTitle("Runtime Error").setContent(a.message),b.addButton("Dismiss","dismiss"),b.show()},d=function(){b.on("error",c)};d()},BSim.SchematicView=function(a,b){var c=b,d=($(a),null),e={},f=!1,g=0;this.startUpdating=function(){f=!0,j(g)},this.stopUpdating=function(){f=!1};var h=function(a,b){if(null===b?b="_":"alufn"==a||(b|=0),"alufn"!=a){var c=a+String(b),f=d.cssRules.length;d.insertRule("."+c+" polyline, ."+c+" rect, ."+c+" polygon { stroke: black; }",f),d.insertRule("."+c+" text { fill: black; }",f+1),d.insertRule("."+c+" text.path-value { fill: blue; visibility: visible; }",f+2),e[a]=[f,f+1,f+2]}$("#"+a+"-value").text(b)},i=function(){for(;d.cssRules.length;)d.deleteRule(0);e={}},j=function(a){if(g=a,f){var b;try{b=c.readWord(a)}catch(d){return}var e,j=c.decodeInstruction(b),l=BSim.Beta.Opcodes[j.opcode];e=void 0===l?{alufn:null,werf:1,wdsel:0,wr:0,ra2sel:0,pcsel:3,asel:null,wasel:1}:l.paths,"z"==e.pcsel?e.pcsel=0|!c.readRegister(j.ra):"~z"==e.pcsel&&(e.pcsel=0|!!c.readRegister(j.ra)),i(),_.each(e,function(a,b){h(b,a)}),$("#z-value").text(0==c.readRegister(j.ra)?"1":"0");var m,n=4*j.literal+a+4,o=c.readRegister(j.ra),p=e.ra2sel?j.rc:j.rb,q=c.readRegister(p),r=e.asel?n:o,s=e.bsel?j.literal:c.readRegister(e.ra2sel?j.rc:j.rb),t=k(e.alufn,r,s);switch(e.wdsel){case 0:m=a+4;break;case 1:m=t;break;case 2:m=c.readWord(t)}var u;switch(e.pcsel){case 4:u=8;break;case 3:u=4;break;case 2:u=o;break;case 1:u=n;break;
case 0:u=a+4}$(".pc-plus4-value").text(BSim.Common.FormatWord(a+4)),$(".instruction-value").text(BSim.Common.FormatWord(b)),$(".raa-value").text(BSim.Common.FormatWord(j.ra,2)),$(".rab-value").text(BSim.Common.FormatWord(p,2)),$(".raw-value").text(BSim.Common.FormatWord(e.wasel?30:j.rc,2)),$(".address-adder-value").text(BSim.Common.FormatWord(n)),$(".rda-value").text(BSim.Common.FormatWord(o)),$(".rdb-value").text(BSim.Common.FormatWord(q)),$(".bsel1-value").text(BSim.Common.FormatWord(j.literal)),$(".alua-value").text(BSim.Common.FormatWord(r)),$(".alub-value").text(BSim.Common.FormatWord(s)),$(".alu-out-value").text(BSim.Common.FormatWord(t)),$(".rdw-value").text(BSim.Common.FormatWord(m)),$(".pcsel-out-value").text(BSim.Common.FormatWord(u)),$(".pc-value").text(BSim.Common.FormatWord(a))}},k=function(a,b,c){switch(a){case"+":return b+c;case"&":return b&c;case"=":return b==c|0;case"<=":return c>=b|0;case"<":return c>b|0;case"/":return b/c|0;case"A":return b;case"*":return b*c;case"|":return b|c;case"<<":return b<<c;case">>>":return b>>>c;case">>":return b>>c;case"-":return b-c;case"^":return b^c;case"~^":return~(b^c);case null:return 0;default:return console.warn("Unknown ALU operation: "+a),0}},l=function(){d=$("<style>").appendTo("head")[0].sheet,c.on("change:pc",j)};l()},BSim.SchematicView.Scale=function(){var a=$("#schematic-view").width()/940,b=($(window).height()-$("#schematic-holder").offset().top-20)/600,c=Math.min(a,b),d="scale("+c+")";$("#schematic-holder").css({"-webkit-transform":d,"-moz-transform":d,"-ms-transform":d,transform:d})},BSim.TextVerifier=function(a,b){var c=a,d=b.checksum,e=null,f=b,g=function(a){for(var b=0,c=0,d=a.length;d>c;c++)b=31*b+a.charCodeAt(c)<<0;return b+36036};this.verify=function(){if(!c||0===c.getCycleCount())return e="No simulation results to verify. Did you assemble and run the program?",!1;var a=c.ttyContent(),b=g(a);return b!==d?(e="The test program did not print out the expected result. Please check the lab writeup to see what result is expected.",BSim.hash=b,!1):(e=null,!0)},this.getMessage=function(){return e},this.checkoff=function(){return f},this.getChecksum=function(){return d}},BSim.MemoryVerifier=function(a,b){var c=a,d=b,e=b.addresses,f=b.checksum===b.running_checksum,g=null;this.verify=function(){if(!f)return g="<strong>Checkoff failed</strong>: invalid checksum",!1;for(var a in e){var b=e[a],d=c.memory.readWord(a);if(d!=b)return g="<p><strong>Checkoff failed.</strong></p><table><tr><td>Memory location:</td><td><code>0x"+BSim.Common.FormatWord(parseInt(a,10))+"</code></td></tr><tr><td>Expected value:</td><td><code>0x"+BSim.Common.FormatWord(b)+"</code></td></tr><tr><td>Actual value:</td><td><code>0x"+BSim.Common.FormatWord(d)+"</code></td></tr></table>",!1}return g=null,!0},this.getMessage=function(){return g},this.checkoff=function(){return d},this.getChecksum=function(){return b.checksum}},BSim.SubmitVerification=function(a,b,c,d){if(!a.verifier().verify())throw new Error("Attempted to submit checkoff without verifiable result.");$.post(a.verifier().checkoff().url,{_requester:sessionStorage.getItem("user")||"???",collaboration:c,pcheckoff:a.verifier().checkoff().name,checksum:a.verifier().checkoff().checksum,cycles:a.getCycleCount(),size:a.memorySize(),version:$("title").text(),"server info":a.mServerInfo.join(","),circuits:_.map(a.mSources,function(a){if(0==a.file.indexOf("/shared"))return"";var b="============== source: "+a.file;return a.metadata&&(b+=" metadata: "+JSON.stringify(a.metadata)),b+"\n"+a.content+"\n==============\n"}).join("")}).done(function(a){d(!0,a)}).fail(function(){d(!1)})};var Channel=function(){"use strict";function a(a,b,c,d){function f(b){for(var c=0;c<b.length;c++)if(b[c].win===a)return!0;return!1}var g=!1;if("*"===b){for(var h in e)if(e.hasOwnProperty(h)&&"*"!==h&&"object"==typeof e[h][c]&&(g=f(e[h][c])))break}else e["*"]&&e["*"][c]&&(g=f(e["*"][c])),!g&&e[b]&&e[b][c]&&(g=f(e[b][c]));if(g)throw"A channel is already bound to the same window which overlaps with origin '"+b+"' and has scope '"+c+"'";"object"!=typeof e[b]&&(e[b]={}),"object"!=typeof e[b][c]&&(e[b][c]=[]),e[b][c].push({win:a,handler:d})}function b(a,b,c){for(var d=e[b][c],f=0;f<d.length;f++)d[f].win===a&&d.splice(f,1);0===e[b][c].length&&delete e[b][c]}function c(a){return Array.isArray?Array.isArray(a):-1!=a.constructor.toString().indexOf("Array")}var d=Math.floor(1000001*Math.random()),e={},f={},g=function(a){try{var b=JSON.parse(a.data);if("object"!=typeof b||null===b)throw"malformed"}catch(a){return}var c,d,g,h=a.source,i=a.origin;if("string"==typeof b.method){var j=b.method.split("::");2==j.length?(c=j[0],g=j[1]):g=b.method}if("undefined"!=typeof b.id&&(d=b.id),"string"==typeof g){var k=!1;if(e[i]&&e[i][c])for(var l=0;l<e[i][c].length;l++)if(e[i][c][l].win===h){e[i][c][l].handler(i,g,b),k=!0;break}if(!k&&e["*"]&&e["*"][c])for(var l=0;l<e["*"][c].length;l++)if(e["*"][c][l].win===h){e["*"][c][l].handler(i,g,b);break}}else"undefined"!=typeof d&&f[d]&&f[d](i,g,b)};return window.addEventListener?window.addEventListener("message",g,!1):window.attachEvent&&window.attachEvent("onmessage",g),{build:function(e){var g=function(a){if(e.debugOutput&&window.console&&window.console.log){try{"string"!=typeof a&&(a=JSON.stringify(a))}catch(b){}console.log("["+j+"] "+a)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof e)throw"Channel build invoked without a proper object argument";if(!e.window||!e.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===e.window)throw"target window is same as present window -- not allowed";var h=!1;if("string"==typeof e.origin){var i;"*"===e.origin?h=!0:null!==(i=e.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(e.origin=i[0].toLowerCase(),h=!0)}if(!h)throw"Channel.build() called with an invalid origin";if("undefined"!=typeof e.scope){if("string"!=typeof e.scope)throw"scope, when specified, must be a string";if(e.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var j=function(){for(var a="",b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}(),k={},l={},m={},n=!1,o=[],p=function(a,b,c){var d=!1,e=!1;return{origin:b,invoke:function(b,d){if(!m[a])throw"attempting to invoke a callback of a nonexistent transaction: "+a;for(var e=!1,f=0;f<c.length;f++)if(b===c[f]){e=!0;break}if(!e)throw"request supports no such callback '"+b+"'";t({id:a,callback:b,params:d})},error:function(b,c){if(e=!0,!m[a])throw"error called for nonexistent message: "+a;delete m[a],t({id:a,error:b,message:c})},complete:function(b){if(e=!0,!m[a])throw"complete called for nonexistent message: "+a;delete m[a],t({id:a,result:b})},delayReturn:function(a){return"boolean"==typeof a&&(d=a===!0),d},completed:function(){return e}}},q=function(a,b,c){return window.setTimeout(function(){if(l[a]){var d="timeout ("+b+"ms) exceeded on method '"+c+"'";l[a].error("timeout_error",d),delete l[a],delete f[a]}},b)},r=function(a,b,d){if("function"==typeof e.gotMessageObserver)try{e.gotMessageObserver(a,d)}catch(h){g("gotMessageObserver() raised an exception: "+h.toString())}if(d.id&&b){if(k[b]){var i=p(d.id,a,d.callbacks?d.callbacks:[]);m[d.id]={};try{if(d.callbacks&&c(d.callbacks)&&d.callbacks.length>0)for(var j=0;j<d.callbacks.length;j++){for(var n=d.callbacks[j],o=d.params,q=n.split("/"),r=0;r<q.length-1;r++){var s=q[r];"object"!=typeof o[s]&&(o[s]={}),o=o[s]}o[q[q.length-1]]=function(){var a=n;return function(b){return i.invoke(a,b)}}()}var t=k[b](i,d.params);i.delayReturn()||i.completed()||i.complete(t)}catch(h){var u="runtime_error",v=null;if("string"==typeof h?v=h:"object"==typeof h&&(h&&c(h)&&2==h.length?(u=h[0],v=h[1]):"string"==typeof h.error&&(u=h.error,h.message?"string"==typeof h.message?v=h.message:h=h.message:v="")),null===v)try{v=JSON.stringify(h),"undefined"==typeof v&&(v=h.toString())}catch(w){v=h.toString()}i.error(u,v)}}}else d.id&&d.callback?l[d.id]&&l[d.id].callbacks&&l[d.id].callbacks[d.callback]?l[d.id].callbacks[d.callback](d.params):g("ignoring invalid callback, id:"+d.id+" ("+d.callback+")"):d.id?l[d.id]?(d.error?l[d.id].error(d.error,d.message):void 0!==d.result?l[d.id].success(d.result):l[d.id].success(),delete l[d.id],delete f[d.id]):g("ignoring invalid response: "+d.id):b&&k[b]&&k[b]({origin:a},d.params)};a(e.window,e.origin,"string"==typeof e.scope?e.scope:"",r);var s=function(a){return"string"==typeof e.scope&&e.scope.length&&(a=[e.scope,a].join("::")),a},t=function(a,b){if(!a)throw"postMessage called with null message";var c=n?"post  ":"queue ";if(g(c+" message: "+JSON.stringify(a)),b||n){if("function"==typeof e.postMessageObserver)try{e.postMessageObserver(e.origin,a)}catch(d){g("postMessageObserver() raised an exception: "+d.toString())}e.window.postMessage(JSON.stringify(a),e.origin)}else o.push(a)},u=function(a,b){if(g("ready msg received"),n)throw"received ready message while in ready state.  help!";for(j+="ping"===b?"-R":"-L",v.unbind("__ready"),n=!0,g("ready msg accepted."),"ping"===b&&v.notify({method:"__ready",params:"pong"});o.length;)t(o.pop());"function"==typeof e.onReady&&e.onReady(v)},v={unbind:function(a){if(k[a]){if(!delete k[a])throw"can't delete method: "+a;return!0}return!1},bind:function(a,b){if(!a||"string"!=typeof a)throw"'method' argument to bind must be string";if(!b||"function"!=typeof b)throw"callback missing from bind params";if(k[a])throw"method '"+a+"' is already bound!";return k[a]=b,this},call:function(a){if(!a)throw"missing arguments to call function";if(!a.method||"string"!=typeof a.method)throw"'method' argument to call must be string";if(!a.success||"function"!=typeof a.success)throw"'success' callback missing from call";var b={},c=[],e=[],g=function(a,d){if(e.indexOf(d)>=0)throw"params cannot be a recursive data structure";if(e.push(d),"object"==typeof d)for(var f in d)if(d.hasOwnProperty(f)){var h=a+(a.length?"/":"")+f;"function"==typeof d[f]?(b[h]=d[f],c.push(h),delete d[f]):"object"==typeof d[f]&&g(h,d[f])}};g("",a.params);var h={id:d,method:s(a.method),params:a.params};c.length&&(h.callbacks=c),a.timeout&&q(d,a.timeout,s(a.method)),l[d]={callbacks:b,error:a.error,success:a.success},f[d]=r,d++,t(h)},notify:function(a){if(!a)throw"missing arguments to notify function";if(!a.method||"string"!=typeof a.method)throw"'method' argument to notify must be string";t({method:s(a.method),params:a.params})},destroy:function(){b(e.window,e.origin,"string"==typeof e.scope?e.scope:""),window.removeEventListener?window.removeEventListener("message",r,!1):window.detachEvent&&window.detachEvent("onmessage",r),n=!1,k={},m={},l={},e.origin=null,o=[],g("channel destroyed"),j=""}};return v.bind("__ready",u),setTimeout(function(){t({method:s("__ready"),params:"ping"},!0)},0),v}}}();